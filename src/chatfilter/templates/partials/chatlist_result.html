{% if success %}
<div class="alert alert-success">
    <strong>Import successful!</strong> Found {{ entry_count }} chat{{ 's' if entry_count != 1 else '' }} from {{ source }}.
</div>

<div class="entry-actions">
    <button type="button" id="select-all" class="btn btn-secondary btn-sm">Select All</button>
    <button type="button" id="select-none" class="btn btn-secondary btn-sm">Select None</button>
    <span id="selection-count" class="selection-info">{{ entry_count }} of {{ entry_count }} selected</span>
</div>

<div class="entry-list">
    {% for entry in entries %}
    <div class="entry-item selected" data-value="{{ entry.value }}" data-normalized="{{ entry.normalized }}">
        <input type="checkbox"
               class="entry-checkbox"
               name="chat_entries"
               value="{{ entry.normalized }}"
               checked>
        <div class="entry-info">
            <div class="entry-value">{{ entry.value }}</div>
            <div class="entry-meta">
                <span class="entry-type {{ entry.entry_type.value }}">{{ entry.entry_type.value }}</span>
                {% if entry.normalized != entry.value %}
                <span>{{ entry.normalized }}</span>
                {% endif %}
            </div>
        </div>
    </div>
    {% endfor %}
</div>

<div class="import-summary">
    <div>
        <span class="count">{{ entry_count }}</span> chats ready for analysis
    </div>
    <input type="hidden" id="list-id" value="{{ list_id }}">
</div>

{% else %}
<div class="alert alert-error">
    <div><strong>Import failed:</strong> {{ error }}</div>
    <div style="margin-top: 0.75rem;">
        <button type="button"
                class="btn btn-sm btn-primary"
                onclick="document.querySelector('#chatlist-form button[type=submit]').click()">
            Retry Import
        </button>
    </div>
</div>
{% endif %}
