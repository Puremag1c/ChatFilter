{# Reconnect Flow - Result Display #}
{% if success %}
<div class="auth-result auth-result-success">
    <div class="alert alert-success">
        <strong>{{ message }}</strong>
    </div>

    <div class="form-actions" style="margin-top: 1rem;">
        <button type="button" class="btn btn-secondary" onclick="document.getElementById('reconnect-modal').remove()">
            {{ _("Close") }}
        </button>
        <button type="button" class="btn btn-primary" onclick="location.reload()">
            {{ _("Refresh Sessions") }}
        </button>
    </div>
</div>

<script>
    // Trigger sessions list refresh
    if (typeof htmx !== 'undefined') {
        htmx.trigger(document.body, 'refreshSessions');
    }
</script>
{% else %}
<div class="auth-result auth-result-error">
    <div class="alert alert-error">
        <strong>{{ _("Failed to Send Code") }}</strong>
        <p style="margin: 0.5rem 0 0 0;">{{ error }}</p>
        {% if suggestion %}
        <p style="margin: 0.5rem 0 0 0; font-style: italic;">{{ suggestion }}</p>
        {% endif %}
    </div>

    <div class="form-actions" style="margin-top: 1rem;">
        {% if allow_retry %}
        <button type="button" class="btn btn-primary" onclick="document.getElementById('reconnect-result').innerHTML = ''">
            {{ _("Try Again") }}
        </button>
        {% endif %}
        <button type="button" class="btn btn-secondary" onclick="document.getElementById('reconnect-modal').remove()">
            {{ _("Cancel") }}
        </button>
    </div>
</div>
{% endif %}
