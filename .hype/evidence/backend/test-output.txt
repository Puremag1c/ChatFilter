/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/argparse.py:2467: UserWarning: Do not expect file_or_dir in Namespace(keyword='', markexpr='', maxfail=0, confcutdir=None, noconftest=False, keepduplicates=False, collect_in_virtualenv=False, continue_on_collection_errors=False, importmode='prepend', basetemp=None, durations=None, durations_min=None, showfixtures=False, show_fixtures_per_test=False, version=0, plugins=[], disable_plugin_autoload=False, traceconfig=False, verbose=4, no_header=False, no_summary=False, fold_skipped=True, force_short_summary=False, reportchars='fE', disable_warnings=False, showlocals=False, tbstyle='short', xfail_tb=False, showcapture='all', fulltrace=False, color='auto', code_highlight='yes', capture='fd', runxfail=False, pastebin=None, assertmode='rewrite', xmlpath=None, junitprefix=None, doctestmodules=False, doctestreport='udiff', doctestglob=[], doctest_ignore_import_errors=False, doctest_continue_on_failure=False, last_failed_no_failures='all', stepwise=False, stepwise_skip=False, stepwise_reset=False, logger_disable=[], markers=False, strict_config=None, strict_markers=None, strict=None, pythonwarnings=None, collectonly=False, pyargs=False, ignore=None, ignore_glob=None, deselect=None, inifilename=None, rootdir=None, help=False, debug=None, override_ini=None, usepdb=False, usepdb_cls=None, trace=False, lf=False, failedfirst=False, newfirst=False, cacheshow=None, cacheclear=False, setuponly=False, setupshow=False, setupplan=False, log_level=None, log_format=None, log_date_format=None, log_cli_level=None, log_cli_format=None, log_cli_date_format=None, log_file=None, log_file_mode=None, log_file_level=None, log_file_format=None, log_file_date_format=None, log_auto_indent=None, file_or_dir=[], timeout=None, timeout_method=None, timeout_disable_debugger_detection=False, session_timeout=None, asyncio_mode=None, asyncio_debug=None, hypothesis_profile=None, hypothesis_verbosity=None, hypothesis_show_statistics=False, hypothesis_seed=None, hypothesis_explain=False)
  warn('Do not expect %s in %s' % (action.dest, namespace))
============================= test session starts ==============================
platform darwin -- Python 3.12.11, pytest-9.0.2, pluggy-1.6.0 -- /Users/m/Zen/Code/ChatFilter/.venv/bin/python
cachedir: .pytest_cache
hypothesis profile 'default'
rootdir: /Users/m/Zen/Code/ChatFilter
configfile: pyproject.toml
testpaths: tests
plugins: anyio-4.12.1, timeout-2.4.0, asyncio-1.3.0, hypothesis-6.151.5
timeout: 30.0s
timeout method: signal
timeout func_only: False
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 2017 items

tests/integration/test_auth_flow_fixes.py::TestVerifyCodeNeeds2FA::test_verify_code_returns_session_row_on_needs_2fa PASSED [  0%]
tests/integration/test_auth_flow_fixes.py::TestVerify2FASuccess::test_verify_2fa_returns_session_row_on_success PASSED [  0%]
tests/integration/test_auth_flow_fixes.py::TestLanguageSwitchTranslation::test_nav_menu_en_default PASSED [  0%]
tests/integration/test_auth_flow_fixes.py::TestLanguageSwitchTranslation::test_nav_menu_ru_via_cookie PASSED [  0%]
tests/integration/test_auth_flow_fixes.py::TestFullAuthFlowNoRefresh::test_code_to_2fa_to_connected_flow PASSED [  0%]
tests/integration/test_auth_flow_fixes.py::TestAdoptClientFailureHandling::test_adopt_client_failure_cleanup PASSED [  0%]
tests/integration/test_auth_flow_fixes.py::TestVerifyCodeHTTPStatusCodes::test_verify_code_invalid_code_returns_422 PASSED [  0%]
tests/integration/test_auth_flow_fixes.py::TestVerifyCodeHTTPStatusCodes::test_verify_code_expired_code_returns_422 PASSED [  0%]
tests/integration/test_auth_flow_fixes.py::TestVerifyCodeHTTPStatusCodes::test_verify_code_flood_wait_returns_429 PASSED [  0%]
tests/integration/test_auth_flow_fixes.py::TestVerifyCodeHTTPStatusCodes::test_verify_code_connection_error_returns_502 PASSED [  0%]
tests/integration/test_auth_flow_fixes.py::TestVerifyCodeHTTPStatusCodes::test_verify_code_timeout_returns_502 PASSED [  0%]
tests/integration/test_auth_flow_fixes.py::TestVerifyCodeHTTPStatusCodes::test_verify_code_generic_exception_returns_500_and_cleans_auth_state PASSED [  0%]
tests/integration/test_auth_flow_fixes.py::TestVerify2FAHTTPStatusCodes::test_verify_2fa_invalid_password_returns_422 PASSED [  0%]
tests/integration/test_auth_flow_fixes.py::TestVerify2FAHTTPStatusCodes::test_verify_2fa_flood_wait_returns_429 PASSED [  0%]
tests/integration/test_auth_flow_fixes.py::TestVerify2FAHTTPStatusCodes::test_verify_2fa_session_revoked_returns_401 PASSED [  0%]
tests/integration/test_auth_flow_fixes.py::TestVerify2FAHTTPStatusCodes::test_verify_2fa_connection_error_returns_502 PASSED [  0%]
tests/integration/test_auth_flow_fixes.py::TestVerify2FAHTTPStatusCodes::test_verify_2fa_timeout_returns_502 PASSED [  0%]
tests/integration/test_auth_flow_fixes.py::TestVerify2FAHTTPStatusCodes::test_verify_2fa_generic_exception_returns_500_and_cleans_auth_state PASSED [  0%]
tests/integration/test_device_confirmation_timeout.py::TestDeviceConfirmationTimeout::test_polling_task_timeout_triggers_cleanup PASSED [  0%]
tests/integration/test_device_confirmation_timeout.py::TestDeviceConfirmationTimeout::test_polling_task_timeout_with_disconnect_error PASSED [  0%]
tests/integration/test_device_confirmation_timeout.py::TestDeviceConfirmationTimeout::test_polling_task_stops_if_auth_state_removed_externally PASSED [  1%]
tests/integration/test_device_confirmation_timeout.py::TestDeviceConfirmationTimeout::test_polling_task_handles_auth_key_unregistered_error PASSED [  1%]
tests/integration/test_device_confirmation_timeout.py::TestDeviceConfirmationTimeout::test_polling_task_cleanup_on_rpc_error PASSED [  1%]
tests/integration/test_device_confirmation_timeout.py::TestDeviceConfirmationTimeout::test_polling_task_confirms_successfully_before_timeout PASSED [  1%]
tests/integration/test_device_confirmation_timeout.py::TestDeviceConfirmationTimeout::test_polling_task_handles_finalize_error PASSED [  1%]
tests/test_8_state_model.py::test_only_8_states_in_python_code PASSED    [  1%]
tests/test_8_state_model.py::test_only_8_states_in_templates PASSED      [  1%]
tests/test_8_state_model.py::test_only_8_states_in_javascript PASSED     [  1%]
tests/test_8_state_model.py::test_only_8_states_documented PASSED        [  1%]
tests/test_8_state_model.py::test_no_state_creep_in_recent_commits PASSED [  1%]
tests/test_account_info.py::TestAccountInfoModel::test_valid_account_info PASSED [  1%]
tests/test_account_info.py::TestAccountInfoModel::test_negative_user_id PASSED [  1%]
tests/test_account_info.py::TestAccountInfoModel::test_zero_user_id PASSED [  1%]
tests/test_account_info.py::TestAccountInfoModel::test_negative_chat_count PASSED [  1%]
tests/test_account_info.py::TestAccountInfoModel::test_optional_fields PASSED [  1%]
tests/test_account_info.py::TestAccountLimits::test_standard_chat_limit PASSED [  1%]
tests/test_account_info.py::TestAccountLimits::test_premium_chat_limit PASSED [  1%]
tests/test_account_info.py::TestAccountLimits::test_remaining_slots_standard PASSED [  1%]
tests/test_account_info.py::TestAccountLimits::test_remaining_slots_premium PASSED [  1%]
tests/test_account_info.py::TestAccountLimits::test_remaining_slots_at_limit PASSED [  1%]
tests/test_account_info.py::TestAccountLimits::test_remaining_slots_over_limit PASSED [  2%]
tests/test_account_info.py::TestLimitDetection::test_is_at_limit_false PASSED [  2%]
tests/test_account_info.py::TestLimitDetection::test_is_at_limit_true PASSED [  2%]
tests/test_account_info.py::TestLimitDetection::test_is_at_limit_over PASSED [  2%]
tests/test_account_info.py::TestLimitDetection::test_is_near_limit_false PASSED [  2%]
tests/test_account_info.py::TestLimitDetection::test_is_near_limit_true PASSED [  2%]
tests/test_account_info.py::TestLimitDetection::test_is_near_limit_just_under_threshold PASSED [  2%]
tests/test_account_info.py::TestLimitDetection::test_is_critical_false PASSED [  2%]
tests/test_account_info.py::TestLimitDetection::test_is_critical_true PASSED [  2%]
tests/test_account_info.py::TestLimitDetection::test_is_critical_premium PASSED [  2%]
tests/test_account_info.py::TestUsageCalculation::test_usage_percent_empty PASSED [  2%]
tests/test_account_info.py::TestUsageCalculation::test_usage_percent_half PASSED [  2%]
tests/test_account_info.py::TestUsageCalculation::test_usage_percent_full PASSED [  2%]
tests/test_account_info.py::TestUsageCalculation::test_usage_percent_over_limit PASSED [  2%]
tests/test_account_info.py::TestDisplayName::test_display_name_with_username PASSED [  2%]
tests/test_account_info.py::TestDisplayName::test_display_name_with_first_name_only PASSED [  2%]
tests/test_account_info.py::TestDisplayName::test_display_name_fallback_to_id PASSED [  2%]
tests/test_account_info.py::TestCanJoinChats::test_can_join_single_chat PASSED [  2%]
tests/test_account_info.py::TestCanJoinChats::test_can_join_multiple_chats PASSED [  2%]
tests/test_account_info.py::TestCanJoinChats::test_cannot_join_at_limit PASSED [  2%]
tests/test_account_info.py::TestCanJoinChats::test_cannot_join_insufficient_slots PASSED [  3%]
tests/test_account_info.py::TestCanJoinChats::test_can_join_exact_slots PASSED [  3%]
tests/test_account_info.py::TestFakeFactory::test_fake_default_values PASSED [  3%]
tests/test_account_info.py::TestFakeFactory::test_fake_custom_values PASSED [  3%]
tests/test_account_info.py::TestThresholdConstants::test_standard_limit PASSED [  3%]
tests/test_account_info.py::TestThresholdConstants::test_premium_limit PASSED [  3%]
tests/test_account_info.py::TestThresholdConstants::test_warning_threshold PASSED [  3%]
tests/test_account_info.py::TestThresholdConstants::test_critical_threshold PASSED [  3%]
tests/test_adopt_client.py::TestAdoptClient::test_adopt_client_registers_correctly PASSED [  3%]
tests/test_adopt_client.py::TestAdoptClient::test_adopt_client_disconnects_old_client PASSED [  3%]
tests/test_adopt_client.py::TestAdoptClient::test_adopt_client_rejects_not_connected PASSED [  3%]
tests/test_adopt_client.py::TestAdoptClient::test_adopt_client_rejects_not_authorized PASSED [  3%]
tests/test_adopt_client.py::TestAdoptClient::test_adopt_client_sets_timestamps PASSED [  3%]
tests/test_adopt_client.py::TestAdoptClient::test_adopt_client_thread_safety PASSED [  3%]
tests/test_analysis_router.py::TestAnalysisStatusEndpoint::test_get_status_valid_task PASSED [  3%]
tests/test_analysis_router.py::TestAnalysisStatusEndpoint::test_get_status_invalid_uuid PASSED [  3%]
tests/test_analysis_router.py::TestAnalysisStatusEndpoint::test_get_status_nonexistent_task PASSED [  3%]
tests/test_analysis_router.py::TestAnalysisResultsEndpoint::test_get_results_completed_task PASSED [  3%]
tests/test_analysis_router.py::TestAnalysisResultsEndpoint::test_get_results_in_progress_task PASSED [  3%]
tests/test_analysis_router.py::TestAnalysisResultsEndpoint::test_get_results_failed_task PASSED [  3%]
tests/test_analysis_router.py::TestAnalysisResultsEndpoint::test_get_results_invalid_uuid PASSED [  4%]
tests/test_analysis_router.py::TestAnalysisResultsEndpoint::test_get_results_pending_task PASSED [  4%]
tests/test_analysis_router.py::TestAnalysisResultsEndpoint::test_get_results_timeout_task PASSED [  4%]
tests/test_analysis_router.py::TestAnalysisResultsEndpoint::test_get_results_cancelled_task PASSED [  4%]
tests/test_analysis_router.py::TestAnalysisResultsEndpoint::test_get_results_nonexistent_task PASSED [  4%]
tests/test_analysis_router.py::TestAnalysisResultsEndpoint::test_get_results_clears_orphaned_session PASSED [  4%]
tests/test_analysis_router.py::TestProgressStreamEndpoint::test_progress_stream_invalid_uuid PASSED [  4%]
tests/test_analysis_router.py::TestProgressStreamEndpoint::test_progress_stream_nonexistent_task PASSED [  4%]
tests/test_analysis_router.py::TestProgressStreamEndpoint::test_progress_stream_valid_task PASSED [  4%]
tests/test_analysis_router.py::TestProgressStreamEndpoint::test_progress_stream_completed_task_immediate_close PASSED [  4%]
tests/test_analysis_router.py::TestProgressStreamEndpoint::test_progress_stream_failed_task PASSED [  4%]
tests/test_analysis_router.py::TestProgressStreamEndpoint::test_progress_stream_cancelled_task PASSED [  4%]
tests/test_analysis_router.py::TestProgressStreamEndpoint::test_progress_stream_timeout_task PASSED [  4%]
tests/test_analysis_router.py::TestStartAnalysisEndpoint::test_start_analysis_no_session PASSED [  4%]
tests/test_analysis_router.py::TestStartAnalysisEndpoint::test_start_analysis_no_chats PASSED [  4%]
tests/test_analysis_router.py::TestStartAnalysisEndpoint::test_start_analysis_message_limit_too_low PASSED [  4%]
tests/test_analysis_router.py::TestStartAnalysisEndpoint::test_start_analysis_message_limit_too_high PASSED [  4%]
tests/test_analysis_router.py::TestStartAnalysisEndpoint::test_start_analysis_session_not_found PASSED [  4%]
tests/test_analysis_router.py::TestStartAnalysisEndpoint::test_start_analysis_all_chats_invalid PASSED [  4%]
tests/test_analysis_router.py::TestStartAnalysisEndpoint::test_start_analysis_some_chats_invalid PASSED [  4%]
tests/test_analysis_router.py::TestStartAnalysisEndpoint::test_start_analysis_validation_timeout PASSED [  5%]
tests/test_analysis_router.py::TestStartAnalysisEndpoint::test_start_analysis_validation_error PASSED [  5%]
tests/test_analysis_router.py::TestStartAnalysisEndpoint::test_start_analysis_queue_full PASSED [  5%]
tests/test_analysis_router.py::TestStartAnalysisEndpoint::test_start_analysis_duplicate_task PASSED [  5%]
tests/test_analysis_router.py::TestStartAnalysisEndpoint::test_start_analysis_success PASSED [  5%]
tests/test_analysis_router.py::TestCancelAnalysisEndpoint::test_cancel_invalid_task_id PASSED [  5%]
tests/test_analysis_router.py::TestCancelAnalysisEndpoint::test_cancel_nonexistent_task PASSED [  5%]
tests/test_analysis_router.py::TestCancelAnalysisEndpoint::test_cancel_completed_task PASSED [  5%]
tests/test_analysis_router.py::TestCancelAnalysisEndpoint::test_cancel_pending_task PASSED [  5%]
tests/test_analysis_router.py::TestCancelAnalysisEndpoint::test_cancel_in_progress_task PASSED [  5%]
tests/test_analysis_router.py::TestForceCancelAnalysisEndpoint::test_force_cancel_invalid_task_id PASSED [  5%]
tests/test_analysis_router.py::TestForceCancelAnalysisEndpoint::test_force_cancel_nonexistent_task PASSED [  5%]
tests/test_analysis_router.py::TestForceCancelAnalysisEndpoint::test_force_cancel_completed_task PASSED [  5%]
tests/test_analysis_router.py::TestForceCancelAnalysisEndpoint::test_force_cancel_in_progress_task PASSED [  5%]
tests/test_analysis_router.py::TestForceCancelAnalysisEndpoint::test_force_cancel_with_custom_reason PASSED [  5%]
tests/test_analysis_router.py::TestCheckOrphanedEndpoint::test_check_orphaned_no_session_task PASSED [  5%]
tests/test_analysis_router.py::TestCheckOrphanedEndpoint::test_check_orphaned_invalid_task_id PASSED [  5%]
tests/test_analysis_router.py::TestCheckOrphanedEndpoint::test_check_orphaned_task_not_found PASSED [  5%]
tests/test_analysis_router.py::TestCheckOrphanedEndpoint::test_check_orphaned_task_completed PASSED [  5%]
tests/test_analysis_router.py::TestCheckOrphanedEndpoint::test_check_orphaned_task_failed PASSED [  5%]
tests/test_analysis_router.py::TestCheckOrphanedEndpoint::test_check_orphaned_task_in_progress PASSED [  5%]
tests/test_analysis_router.py::TestCheckOrphanedEndpoint::test_check_orphaned_already_notified PASSED [  6%]
tests/test_analysis_router.py::TestDismissNotificationEndpoint::test_dismiss_notification PASSED [  6%]
tests/test_analysis_router.py::TestDismissNotificationEndpoint::test_dismiss_notification_different_task PASSED [  6%]
tests/test_analysis_router.py::TestResultsPage::test_results_page_no_task_id PASSED [  6%]
tests/test_analysis_router.py::TestResultsPage::test_results_page_with_valid_task PASSED [  6%]
tests/test_analysis_router.py::TestResultsPage::test_results_page_with_invalid_task PASSED [  6%]
tests/test_analyzer.py::TestComputeMetrics::test_empty_messages PASSED   [  6%]
tests/test_analyzer.py::TestComputeMetrics::test_single_message PASSED   [  6%]
tests/test_analyzer.py::TestComputeMetrics::test_multiple_messages_same_author PASSED [  6%]
tests/test_analyzer.py::TestComputeMetrics::test_multiple_unique_authors PASSED [  6%]
tests/test_analyzer.py::TestComputeMetrics::test_anonymous_authors_counted_as_chat PASSED [  6%]
tests/test_analyzer.py::TestComputeMetrics::test_mixed_anonymous_and_regular_authors PASSED [  6%]
tests/test_analyzer.py::TestComputeMetrics::test_history_hours_calculation PASSED [  6%]
tests/test_analyzer.py::TestComputeMetrics::test_unsorted_messages PASSED [  6%]
tests/test_analyzer.py::TestComputeMetrics::test_fractional_hours PASSED [  6%]
tests/test_analyzer.py::TestComputeMetrics::test_preserves_timezone_info PASSED [  6%]
tests/test_analyzer.py::TestMessagesPerHour::test_empty_metrics_returns_zero PASSED [  6%]
tests/test_analyzer.py::TestMessagesPerHour::test_single_message_returns_zero PASSED [  6%]
tests/test_analyzer.py::TestMessagesPerHour::test_normal_calculation PASSED [  6%]
tests/test_analyzer.py::TestMessagesPerHour::test_fractional_rate PASSED [  6%]
tests/test_analyzer.py::TestMessagesPerHour::test_high_activity PASSED   [  7%]
tests/test_analyzer.py::TestMessagesPerHour::test_via_compute_metrics PASSED [  7%]
tests/test_analyzer.py::TestEdgeCases::test_messages_with_identical_timestamps PASSED [  7%]
tests/test_analyzer.py::TestEdgeCases::test_large_message_count PASSED   [  7%]
tests/test_analyzer.py::TestEdgeCases::test_microsecond_precision PASSED [  7%]
tests/test_analyzer.py::TestEdgeCases::test_very_long_time_span PASSED   [  7%]
tests/test_analyzer.py::TestEdgeCases::test_all_messages_same_author_different_times PASSED [  7%]
tests/test_analyzer.py::TestEdgeCases::test_extreme_author_diversity PASSED [  7%]
tests/test_analyzer.py::TestEdgeCases::test_two_authors_alternating PASSED [  7%]
tests/test_analyzer.py::TestEdgeCases::test_messages_in_reverse_chronological_order PASSED [  7%]
tests/test_analyzer.py::TestEdgeCases::test_single_author_with_zero_time_span PASSED [  7%]
tests/test_analyzer.py::TestEdgeCases::test_deleted_accounts_counted_by_id PASSED [  7%]
tests/test_analyzer.py::TestEdgeCases::test_multiple_deleted_accounts_are_distinct PASSED [  7%]
tests/test_analyzer.py::TestEdgeCases::test_forwarded_messages_count_forwarder PASSED [  7%]
tests/test_analyzer.py::TestEdgeCases::test_same_user_forwarding_and_posting PASSED [  7%]
tests/test_analyzer.py::TestMessageGapDetection::test_no_gaps_sequential_ids PASSED [  7%]
tests/test_analyzer.py::TestMessageGapDetection::test_gaps_detected_with_missing_ids PASSED [  7%]
tests/test_analyzer.py::TestMessageGapDetection::test_single_message_has_no_gaps PASSED [  7%]
tests/test_analyzer.py::TestMessageGapDetection::test_empty_messages_has_no_gaps PASSED [  7%]
tests/test_analyzer.py::TestMessageGapDetection::test_gaps_affect_history_hours_note PASSED [  7%]
tests/test_analyzer.py::TestStreamingMetricsAggregator::test_empty_aggregator_returns_empty_metrics PASSED [  8%]
tests/test_analyzer.py::TestStreamingMetricsAggregator::test_add_single_batch PASSED [  8%]
tests/test_analyzer.py::TestStreamingMetricsAggregator::test_add_multiple_batches PASSED [  8%]
tests/test_analyzer.py::TestStreamingMetricsAggregator::test_add_single_message PASSED [  8%]
tests/test_analyzer.py::TestStreamingMetricsAggregator::test_empty_batch_ignored PASSED [  8%]
tests/test_analyzer.py::TestStreamingMetricsAggregator::test_batches_with_out_of_order_timestamps PASSED [  8%]
tests/test_analyzer.py::TestStreamingMetricsAggregator::test_reset_clears_state PASSED [  8%]
tests/test_analyzer.py::TestStreamingMetricsAggregator::test_large_number_of_batches PASSED [  8%]
tests/test_analyzer.py::TestStreamingMetricsAggregator::test_matches_compute_metrics_result PASSED [  8%]
tests/test_analyzer.py::TestStreamingMetricsAggregator::test_author_set_size_bytes_estimation PASSED [  8%]
tests/test_analyzer.py::TestStreamingMetricsAggregator::test_progressive_properties PASSED [  8%]
tests/test_auth_state.py::TestAuthState::test_creation PASSED            [  8%]
tests/test_auth_state.py::TestAuthState::test_is_expired_false PASSED    [  8%]
tests/test_auth_state.py::TestAuthState::test_is_expired_true PASSED     [  8%]
tests/test_auth_state.py::TestAuthState::test_touch PASSED               [  8%]
tests/test_auth_state.py::TestAuthState::test_is_locked_false PASSED     [  8%]
tests/test_auth_state.py::TestAuthState::test_is_locked_true PASSED      [  8%]
tests/test_auth_state.py::TestAuthState::test_is_locked_expired PASSED   [  8%]
tests/test_auth_state.py::TestAuthState::test_get_lock_remaining_seconds PASSED [  8%]
tests/test_auth_state.py::TestAuthState::test_get_lock_remaining_seconds_not_locked PASSED [  8%]
tests/test_auth_state.py::TestAuthStep::test_values PASSED               [  9%]
tests/test_auth_state.py::TestAuthStateManager::test_create_auth_state PASSED [  9%]
tests/test_auth_state.py::TestAuthStateManager::test_get_auth_state PASSED [  9%]
tests/test_auth_state.py::TestAuthStateManager::test_get_auth_state_missing PASSED [  9%]
tests/test_auth_state.py::TestAuthStateManager::test_get_auth_state_expired PASSED [  9%]
tests/test_auth_state.py::TestAuthStateManager::test_update_auth_state PASSED [  9%]
tests/test_auth_state.py::TestAuthStateManager::test_update_auth_state_missing PASSED [  9%]
tests/test_auth_state.py::TestAuthStateManager::test_remove_auth_state PASSED [  9%]
tests/test_auth_state.py::TestAuthStateManager::test_cleanup_all PASSED  [  9%]
tests/test_auth_state.py::TestAuthStateManager::test_increment_failed_attempts PASSED [  9%]
tests/test_auth_state.py::TestAuthStateManager::test_increment_failed_attempts_locks_at_max PASSED [  9%]
tests/test_auth_state.py::TestAuthStateManager::test_check_auth_lock_not_locked PASSED [  9%]
tests/test_auth_state.py::TestAuthStateManager::test_check_auth_lock_locked PASSED [  9%]
tests/test_auth_state.py::TestAuthStateManager::test_check_auth_lock_missing_state PASSED [  9%]
tests/test_auth_state.py::TestAuthStateManager::test_reset_failed_attempts PASSED [  9%]
tests/test_auth_state.py::TestAuthStateManager::test_reset_failed_attempts_missing_state PASSED [  9%]
tests/test_auth_state.py::TestGetAuthStateManager::test_returns_manager PASSED [  9%]
tests/test_auth_state.py::TestGetAuthStateManager::test_singleton PASSED [  9%]
tests/test_chat_validation.py::TestChatIdValidation::test_validate_all_valid_ids PASSED [  9%]
tests/test_chat_validation.py::TestChatIdValidation::test_validate_some_invalid_ids PASSED [  9%]
tests/test_chat_validation.py::TestChatIdValidation::test_validate_all_invalid_ids PASSED [ 10%]
tests/test_chat_validation.py::TestChatIdValidation::test_validate_clears_cache PASSED [ 10%]
tests/test_chat_validation.py::TestChatIdValidation::test_validate_empty_list PASSED [ 10%]
tests/test_chatlist_router.py::TestStoreChatList::test_store_chat_list_returns_id PASSED [ 10%]
tests/test_chatlist_router.py::TestStoreChatList::test_store_chat_list_empty PASSED [ 10%]
tests/test_chatlist_router.py::TestStoreChatList::test_store_multiple_lists PASSED [ 10%]
tests/test_chatlist_router.py::TestGetChatList::test_get_chat_list_found PASSED [ 10%]
tests/test_chatlist_router.py::TestGetChatList::test_get_chat_list_not_found PASSED [ 10%]
tests/test_chatlist_router.py::TestGetChatList::test_get_chat_list_empty_id PASSED [ 10%]
tests/test_chatlist_router.py::TestClearChatList::test_clear_chat_list_exists PASSED [ 10%]
tests/test_chatlist_router.py::TestClearChatList::test_clear_chat_list_not_found PASSED [ 10%]
tests/test_chatlist_router.py::TestUploadChatList::test_upload_text_file_success PASSED [ 10%]
tests/test_chatlist_router.py::TestUploadChatList::test_upload_csv_file_success PASSED [ 10%]
tests/test_chatlist_router.py::TestUploadChatList::test_upload_file_too_large PASSED [ 10%]
tests/test_chatlist_router.py::TestUploadChatList::test_upload_empty_file PASSED [ 10%]
tests/test_chatlist_router.py::TestUploadChatList::test_upload_parse_error PASSED [ 10%]
tests/test_chatlist_router.py::TestUploadChatList::test_upload_no_valid_entries PASSED [ 10%]
tests/test_chatlist_router.py::TestUploadChatList::test_upload_removes_duplicates PASSED [ 10%]
tests/test_chatlist_router.py::TestUploadChatList::test_upload_unexpected_error PASSED [ 10%]
tests/test_chatlist_router.py::TestUploadChatList::test_upload_xlsx_file PASSED [ 10%]
tests/test_chatlist_router.py::TestFetchGoogleSheet::test_fetch_sheet_success PASSED [ 11%]
tests/test_chatlist_router.py::TestFetchGoogleSheet::test_fetch_sheet_empty_url PASSED [ 11%]
tests/test_chatlist_router.py::TestFetchGoogleSheet::test_fetch_sheet_whitespace_url PASSED [ 11%]
tests/test_chatlist_router.py::TestFetchGoogleSheet::test_fetch_sheet_invalid_url PASSED [ 11%]
tests/test_chatlist_router.py::TestFetchGoogleSheet::test_fetch_sheet_google_sheets_error PASSED [ 11%]
tests/test_chatlist_router.py::TestFetchGoogleSheet::test_fetch_sheet_no_valid_entries PASSED [ 11%]
tests/test_chatlist_router.py::TestFetchGoogleSheet::test_fetch_sheet_removes_duplicates PASSED [ 11%]
tests/test_chatlist_router.py::TestFetchGoogleSheet::test_fetch_sheet_unexpected_error PASSED [ 11%]
tests/test_chatlist_router.py::TestFetchGoogleSheet::test_fetch_sheet_url_with_whitespace PASSED [ 11%]
tests/test_chatlist_router.py::TestGetChatListEntries::test_get_entries_success PASSED [ 11%]
tests/test_chatlist_router.py::TestGetChatListEntries::test_get_entries_not_found PASSED [ 11%]
tests/test_chatlist_router.py::TestGetChatListEntries::test_get_entries_empty_list PASSED [ 11%]
tests/test_chatlist_router.py::TestGetChatListEntries::test_get_entries_invalid_id_format PASSED [ 11%]
tests/test_chatlist_router.py::TestDeleteChatList::test_delete_existing_list PASSED [ 11%]
tests/test_chatlist_router.py::TestDeleteChatList::test_delete_non_existent_list PASSED [ 11%]
tests/test_chatlist_router.py::TestDeleteChatList::test_delete_already_deleted_list PASSED [ 11%]
tests/test_chatlist_router.py::TestIntegrationScenarios::test_upload_then_retrieve_workflow PASSED [ 11%]
tests/test_chatlist_router.py::TestIntegrationScenarios::test_fetch_sheet_then_delete_workflow PASSED [ 11%]
tests/test_chatlist_router.py::TestIntegrationScenarios::test_multiple_uploads_different_lists PASSED [ 11%]
tests/test_chatlist_router.py::TestEdgeCases::test_upload_file_exactly_at_size_limit PASSED [ 11%]
tests/test_chatlist_router.py::TestEdgeCases::test_upload_file_one_byte_over_limit PASSED [ 11%]
tests/test_chatlist_router.py::TestEdgeCases::test_upload_with_unicode_filename PASSED [ 12%]
tests/test_chatlist_router.py::TestEdgeCases::test_upload_with_special_chars_in_filename PASSED [ 12%]
tests/test_chatlist_router.py::TestEdgeCases::test_store_list_with_many_entries PASSED [ 12%]
tests/test_chatlist_router.py::TestEdgeCases::test_fetch_sheet_with_international_domain PASSED [ 12%]
tests/test_chatlist_router.py::TestEdgeCases::test_concurrent_list_operations PASSED [ 12%]
tests/test_chatlist_router.py::TestImportResultModel::test_import_result_success PASSED [ 12%]
tests/test_chatlist_router.py::TestImportResultModel::test_import_result_error PASSED [ 12%]
tests/test_chats_router.py::TestChatsPage::test_chats_page_loads PASSED  [ 12%]
tests/test_chats_router.py::TestChatsAPI::test_get_chats_session_not_found PASSED [ 12%]
tests/test_chats_router.py::TestChatsAPI::test_get_chats_success PASSED  [ 12%]
tests/test_chats_router.py::TestChatsAPI::test_get_chats_with_pagination PASSED [ 12%]
tests/test_chats_router.py::TestChatsAPI::test_get_chats_last_page PASSED [ 12%]
tests/test_chats_router.py::TestChatsAPI::test_get_chats_session_invalid_error PASSED [ 12%]
tests/test_chats_router.py::TestChatsAPI::test_get_chats_session_reauth_required_error PASSED [ 12%]
tests/test_chats_router.py::TestChatsAPI::test_get_chats_session_reauth_2fa_error PASSED [ 12%]
tests/test_chats_router.py::TestChatsAPI::test_get_chats_generic_telethon_error PASSED [ 12%]
tests/test_chats_router.py::TestChatsAPI::test_get_chats_generic_error PASSED [ 12%]
tests/test_chats_router.py::TestChatsAPI::test_get_chats_error_info_extraction_fails PASSED [ 12%]
tests/test_chats_router.py::TestChatsAPI::test_get_chats_json_no_session PASSED [ 12%]
tests/test_chats_router.py::TestChatsAPI::test_get_chats_json_session_not_found PASSED [ 12%]
tests/test_chats_router.py::TestChatsAPI::test_get_chats_json_success PASSED [ 13%]
tests/test_chats_router.py::TestChatsAPI::test_get_chats_json_session_invalid_error PASSED [ 13%]
tests/test_chats_router.py::TestChatsAPI::test_get_chats_json_session_reauth_required PASSED [ 13%]
tests/test_chats_router.py::TestChatsAPI::test_get_chats_json_generic_error PASSED [ 13%]
tests/test_chats_router.py::TestAccountInfoAPI::test_get_account_info_no_session PASSED [ 13%]
tests/test_chats_router.py::TestAccountInfoAPI::test_get_account_info_success PASSED [ 13%]
tests/test_chats_router.py::TestAccountInfoAPI::test_get_account_info_session_not_found PASSED [ 13%]
tests/test_chats_router.py::TestAccountInfoAPI::test_get_account_info_error PASSED [ 13%]
tests/test_chats_router.py::TestAccountInfoAPI::test_get_account_info_json_no_session PASSED [ 13%]
tests/test_chats_router.py::TestAccountInfoAPI::test_get_account_info_json_success PASSED [ 13%]
tests/test_chats_router.py::TestAccountInfoAPI::test_get_account_info_json_non_premium PASSED [ 13%]
tests/test_chats_router.py::TestAccountInfoAPI::test_get_account_info_json_at_limit PASSED [ 13%]
tests/test_chats_router.py::TestAccountInfoAPI::test_get_account_info_json_session_not_found PASSED [ 13%]
tests/test_chats_router.py::TestAccountInfoAPI::test_get_account_info_json_error PASSED [ 13%]
tests/test_chats_router.py::TestHelperFunctions::test_get_session_paths_success PASSED [ 13%]
tests/test_chats_router.py::TestHelperFunctions::test_get_session_paths_directory_not_found PASSED [ 13%]
tests/test_chats_router.py::TestHelperFunctions::test_get_session_paths_missing_files PASSED [ 13%]
tests/test_chats_router.py::TestHelperFunctions::test_cleanup_invalid_session PASSED [ 13%]
tests/test_chats_router.py::TestHelperFunctions::test_cleanup_invalid_session_nonexistent PASSED [ 13%]
tests/test_chats_router.py::TestHelperFunctions::test_cleanup_invalid_session_error_handling PASSED [ 13%]
tests/test_chats_router.py::TestWebSessionPersistence::test_get_chats_stores_session_in_web_session PASSED [ 14%]
tests/test_chats_router.py::TestWebSessionPersistence::test_get_chats_json_stores_session_in_web_session PASSED [ 14%]
tests/test_chats_router.py::TestPaginationEdgeCases::test_get_chats_with_zero_offset PASSED [ 14%]
tests/test_chats_router.py::TestPaginationEdgeCases::test_get_chats_with_max_limit PASSED [ 14%]
tests/test_chats_router.py::TestPaginationEdgeCases::test_get_chats_empty_result PASSED [ 14%]
tests/test_cleanup.py::TestCleanupOrphanedTempFiles::test_removes_temp_files PASSED [ 14%]
tests/test_cleanup.py::TestCleanupOrphanedTempFiles::test_removes_temp_files_recursively PASSED [ 14%]
tests/test_cleanup.py::TestCleanupOrphanedTempFiles::test_handles_no_temp_files PASSED [ 14%]
tests/test_cleanup.py::TestCleanupOrphanedTempFiles::test_handles_nonexistent_directory PASSED [ 14%]
tests/test_cleanup.py::TestCleanupOrphanedTempFiles::test_skips_temp_directories PASSED [ 14%]
tests/test_cleanup.py::TestCleanupOrphanedDbJournals::test_removes_journal_files PASSED [ 14%]
tests/test_cleanup.py::TestCleanupOrphanedDbJournals::test_handles_missing_journal_files PASSED [ 14%]
tests/test_cleanup.py::TestCleanupOrphanedDbJournals::test_removes_only_relevant_journals PASSED [ 14%]
tests/test_cleanup.py::TestCleanupOrphanedDbJournals::test_handles_nonexistent_db_path PASSED [ 14%]
tests/test_cleanup.py::TestCleanupOrphanedDbJournals::test_cleanup_with_real_sqlite_database PASSED [ 14%]
tests/test_cleanup.py::TestCleanupOrphanedResources::test_comprehensive_cleanup PASSED [ 14%]
tests/test_cleanup.py::TestCleanupOrphanedResources::test_handles_no_orphaned_resources PASSED [ 14%]
tests/test_cleanup.py::TestCleanupOrphanedResources::test_handles_partial_failures_gracefully PASSED [ 14%]
tests/test_cleanup.py::TestCleanupOrphanedResources::test_custom_db_name PASSED [ 14%]
tests/test_cleanup.py::TestCleanupOrphanedResources::test_cleanup_stats_dataclass PASSED [ 14%]
tests/test_cleanup.py::TestCleanupOldSessionFiles::test_skips_cleanup_when_disabled PASSED [ 15%]
tests/test_cleanup.py::TestCleanupOldSessionFiles::test_delegates_to_storage_module PASSED [ 15%]
tests/test_config_validation.py::TestConfigValidation::test_valid_config PASSED [ 15%]
tests/test_config_validation.py::TestConfigValidation::test_invalid_port_too_low PASSED [ 15%]
tests/test_config_validation.py::TestConfigValidation::test_data_dir_is_file PASSED [ 15%]
tests/test_config_validation.py::TestConfigValidation::test_readonly_parent_directory PASSED [ 15%]
tests/test_config_validation.py::TestConfigValidation::test_port_in_use PASSED [ 15%]
tests/test_config_validation.py::TestConfigValidation::test_writable_data_directory PASSED [ 15%]
tests/test_config_validation.py::TestConfigValidation::test_validation_messages_have_fixes PASSED [ 15%]
tests/test_config_validation.py::TestConfigCheck::test_debug_mode_production_warning PASSED [ 15%]
tests/test_config_validation.py::TestConfigCheck::test_no_warnings_for_valid_config PASSED [ 15%]
tests/test_config_validation.py::TestLoggingConfig::test_default_logging_config PASSED [ 15%]
tests/test_config_validation.py::TestLoggingConfig::test_custom_log_level PASSED [ 15%]
tests/test_config_validation.py::TestLoggingConfig::test_invalid_log_level PASSED [ 15%]
tests/test_config_validation.py::TestLoggingConfig::test_log_file_disabled PASSED [ 15%]
tests/test_config_validation.py::TestLoggingConfig::test_custom_log_rotation_settings PASSED [ 15%]
tests/test_config_validation.py::TestLoggingConfig::test_log_file_path_property PASSED [ 15%]
tests/test_config_validation.py::TestLoggingConfig::test_log_dir_creation PASSED [ 15%]
tests/test_config_validation.py::TestLoggingConfig::test_log_dir_not_created_when_disabled PASSED [ 15%]
tests/test_config_validation.py::TestLoggingConfig::test_log_config_in_print_config PASSED [ 15%]
tests/test_conftest_fixtures.py::TestFakeChatFactory::test_creates_default_chat PASSED [ 16%]
tests/test_conftest_fixtures.py::TestFakeChatFactory::test_creates_custom_chat PASSED [ 16%]
tests/test_conftest_fixtures.py::TestFakeChatFactory::test_deterministic_with_seed_offset PASSED [ 16%]
tests/test_conftest_fixtures.py::TestFakeChatFactory::test_different_seed_offsets_produce_different_ids PASSED [ 16%]
tests/test_conftest_fixtures.py::TestFakeMessageFactory::test_creates_default_message PASSED [ 16%]
tests/test_conftest_fixtures.py::TestFakeMessageFactory::test_creates_custom_message PASSED [ 16%]
tests/test_conftest_fixtures.py::TestFakeMessageFactory::test_deterministic_with_seed_offset PASSED [ 16%]
tests/test_conftest_fixtures.py::TestMockDialogFactory::test_creates_user_dialog PASSED [ 16%]
tests/test_conftest_fixtures.py::TestMockDialogFactory::test_creates_channel_dialog PASSED [ 16%]
tests/test_conftest_fixtures.py::TestMockDialogFactory::test_creates_megagroup_dialog PASSED [ 16%]
tests/test_conftest_fixtures.py::TestMockDialogFactory::test_creates_forum_dialog PASSED [ 16%]
tests/test_conftest_fixtures.py::TestMockMessageFactory::test_creates_basic_message PASSED [ 16%]
tests/test_conftest_fixtures.py::TestMockMessageFactory::test_creates_message_with_media PASSED [ 16%]
tests/test_conftest_fixtures.py::TestMockMessageFactory::test_creates_channel_post PASSED [ 16%]
tests/test_conftest_fixtures.py::test_mock_telegram_client PASSED        [ 16%]
tests/test_conftest_fixtures.py::TestEdgeCaseChats::test_has_expected_edge_cases PASSED [ 16%]
tests/test_conftest_fixtures.py::TestEdgeCaseChats::test_empty_chat PASSED [ 16%]
tests/test_conftest_fixtures.py::TestEdgeCaseChats::test_unicode_chat PASSED [ 16%]
tests/test_conftest_fixtures.py::TestEdgeCaseChats::test_forum_chat PASSED [ 16%]
tests/test_conftest_fixtures.py::TestEdgeCaseMessages::test_has_expected_edge_cases PASSED [ 16%]
tests/test_conftest_fixtures.py::TestEdgeCaseMessages::test_empty_message PASSED [ 17%]
tests/test_conftest_fixtures.py::TestEdgeCaseMessages::test_unicode_message PASSED [ 17%]
tests/test_conftest_fixtures.py::TestEdgeCaseMessages::test_emoji_only_message PASSED [ 17%]
tests/test_conftest_fixtures.py::TestEdgeCaseMessages::test_newlines_message PASSED [ 17%]
tests/test_connect_flow_smoke.py::TestConnectFlowSmoke::test_scenario_1_save_without_api_id PASSED [ 17%]
tests/test_connect_flow_smoke.py::TestConnectFlowSmoke::test_scenario_2_connect_without_credentials PASSED [ 17%]
tests/test_connect_flow_smoke.py::TestConnectFlowSmoke::test_scenario_3_expired_session_auto_send_code PASSED [ 17%]
tests/test_connect_flow_smoke.py::TestConnectFlowSmoke::test_scenario_4_normal_connect_success PASSED [ 17%]
tests/test_connect_flow_smoke.py::TestConnectFlowSmoke::test_scenario_5_banned_account PASSED [ 17%]
tests/test_connect_flow_smoke.py::TestConnectFlowSmoke::test_scenario_6_corrupted_session_auto_send_code PASSED [ 17%]
tests/test_connect_flow_states.py::TestConnectFlowConfigValidation::test_disconnected_to_needs_config_no_api_id PASSED [ 17%]
tests/test_connect_flow_states.py::TestConnectFlowConfigValidation::test_disconnected_to_needs_config_no_proxy PASSED [ 17%]
tests/test_connect_flow_states.py::TestConnectFlowFirstTimeAuth::test_disconnected_to_needs_code_first_time PASSED [ 17%]
tests/test_connect_flow_states.py::TestConnectFlowCodeVerification::test_needs_code_to_connected_success PASSED [ 17%]
tests/test_connect_flow_states.py::TestConnectFlowCodeVerification::test_needs_code_to_needs_2fa PASSED [ 17%]
tests/test_connect_flow_states.py::TestConnectFlow2FA::test_needs_2fa_to_connected_success PASSED [ 17%]
tests/test_connect_flow_states.py::TestConnectFlowErrorRecovery::test_error_to_recovery_via_retry PASSED [ 17%]
tests/test_connect_flow_states.py::TestConnectFlowErrorRecovery::test_banned_terminal_state PASSED [ 17%]
tests/test_connect_flow_states.py::TestConnectFlowIntermediateStates::test_connecting_state_shows_spinner PASSED [ 17%]
tests/test_connect_flow_states.py::TestConnectFlowSessionExpiredRecovery::test_expired_session_auto_recovery PASSED [ 17%]
tests/test_connect_flow_states.py::TestConnectFlowAllStates::test_all_8_states_covered PASSED [ 17%]
tests/test_csrf.py::TestGenerateCsrfToken::test_returns_string PASSED    [ 18%]
tests/test_csrf.py::TestGenerateCsrfToken::test_token_length PASSED      [ 18%]
tests/test_csrf.py::TestGenerateCsrfToken::test_tokens_are_unique PASSED [ 18%]
tests/test_csrf.py::TestGenerateCsrfToken::test_token_is_url_safe PASSED [ 18%]
tests/test_csrf.py::TestGetCsrfToken::test_creates_token_if_missing PASSED [ 18%]
tests/test_csrf.py::TestGetCsrfToken::test_returns_existing_token PASSED [ 18%]
tests/test_csrf.py::TestGetCsrfToken::test_stores_generated_token PASSED [ 18%]
tests/test_csrf.py::TestValidateCsrfToken::test_valid_token PASSED       [ 18%]
tests/test_csrf.py::TestValidateCsrfToken::test_invalid_token PASSED     [ 18%]
tests/test_csrf.py::TestValidateCsrfToken::test_missing_session_token PASSED [ 18%]
tests/test_csrf.py::TestValidateCsrfToken::test_empty_submitted_token PASSED [ 18%]
tests/test_csrf.py::TestValidateCsrfToken::test_timing_safe_comparison PASSED [ 18%]
tests/test_csrf.py::TestRotateCsrfToken::test_generates_new_token PASSED [ 18%]
tests/test_csrf.py::TestRotateCsrfToken::test_stores_new_token PASSED    [ 18%]
tests/test_csrf.py::TestRotateCsrfToken::test_returns_new_token PASSED   [ 18%]
tests/test_csrf.py::TestRotateCsrfToken::test_subsequent_rotations_different PASSED [ 18%]
tests/test_csrf.py::TestCsrfIntegration::test_full_csrf_flow PASSED      [ 18%]
tests/test_dependencies.py::TestGetWebSession::test_returns_session PASSED [ 18%]
tests/test_dependencies.py::TestGetSessionManager::test_creates_session_manager PASSED [ 18%]
tests/test_dependencies.py::TestGetSessionManager::test_returns_cached_instance PASSED [ 18%]
tests/test_dependencies.py::TestGetChatAnalysisService::test_creates_service PASSED [ 19%]
tests/test_dependencies.py::TestGetChatAnalysisService::test_returns_cached_instance PASSED [ 19%]
tests/test_dependencies.py::TestGetDatabase::test_creates_database PASSED [ 19%]
tests/test_dependencies.py::TestGetDatabase::test_returns_cached_instance PASSED [ 19%]
tests/test_device_confirmation.py::TestDeviceConfirmation::test_verify_code_needs_confirmation PASSED [ 19%]
tests/test_device_confirmation.py::TestDeviceConfirmation::test_verify_2fa_needs_confirmation PASSED [ 19%]
tests/test_device_confirmation.py::TestDeviceConfirmation::test_list_stored_sessions_needs_confirmation_state PASSED [ 19%]
tests/test_device_confirmation.py::TestDeviceConfirmation::test_check_device_confirmation_auth_key_unregistered PASSED [ 19%]
tests/test_device_confirmation.py::TestDeviceConfirmation::test_verify_2fa_auth_key_unregistered_goes_to_finalize PASSED [ 19%]
tests/test_device_confirmation.py::TestDeviceConfirmation::test_verify_code_auth_key_unregistered_goes_to_finalize PASSED [ 19%]
tests/test_device_confirmation.py::TestDeviceConfirmation::test_auto_2fa_auth_key_unregistered_goes_to_finalize PASSED [ 19%]
tests/test_diagnostics.py::test_get_os_info PASSED                       [ 19%]
tests/test_diagnostics.py::test_get_python_info PASSED                   [ 19%]
tests/test_diagnostics.py::test_get_dependency_versions_success PASSED   [ 19%]
tests/test_diagnostics.py::test_get_dependency_versions_error PASSED     [ 19%]
tests/test_diagnostics.py::test_get_dependency_versions_timeout PASSED   [ 19%]
tests/test_diagnostics.py::test_get_dependency_versions_exception PASSED [ 19%]
tests/test_diagnostics.py::test_get_disk_space_success PASSED            [ 19%]
tests/test_diagnostics.py::test_get_disk_space_error PASSED              [ 19%]
tests/test_diagnostics.py::test_sanitize_config PASSED                   [ 19%]
tests/test_diagnostics.py::test_get_recent_logs_file_exists PASSED       [ 20%]
tests/test_diagnostics.py::test_get_recent_logs_file_not_exists PASSED   [ 20%]
tests/test_diagnostics.py::test_get_recent_logs_small_file PASSED        [ 20%]
tests/test_diagnostics.py::test_get_recent_logs_read_error PASSED        [ 20%]
tests/test_diagnostics.py::test_collect_diagnostics_with_logs PASSED     [ 20%]
tests/test_diagnostics.py::test_collect_diagnostics_without_logs PASSED  [ 20%]
tests/test_diagnostics.py::test_export_diagnostics_to_json PASSED        [ 20%]
tests/test_diagnostics.py::test_export_diagnostics_to_text PASSED        [ 20%]
tests/test_diagnostics.py::test_export_diagnostics_to_text_with_disk_error PASSED [ 20%]
tests/test_diagnostics.py::test_export_diagnostics_to_text_without_logs PASSED [ 20%]
tests/test_disk_utils.py::test_get_available_space PASSED                [ 20%]
tests/test_disk_utils.py::test_get_available_space_nonexistent_file PASSED [ 20%]
tests/test_disk_utils.py::test_ensure_space_available_success PASSED     [ 20%]
tests/test_disk_utils.py::test_ensure_space_available_insufficient_space PASSED [ 20%]
tests/test_disk_utils.py::test_ensure_space_available_without_buffer PASSED [ 20%]
tests/test_disk_utils.py::test_format_bytes PASSED                       [ 20%]
tests/test_disk_utils.py::test_disk_space_error_message PASSED           [ 20%]
tests/test_disk_utils.py::test_ensure_space_available_with_real_write PASSED [ 20%]
tests/test_disk_utils.py::test_ensure_space_available_csv_scenario PASSED [ 20%]
tests/test_disk_utils.py::test_ensure_space_available_session_scenario PASSED [ 20%]
tests/test_disk_utils.py::test_get_available_space_error_handling PASSED [ 21%]
tests/test_e2e_integration.py::TestE2EIntegration::test_csv_export_flow PASSED [ 21%]
tests/test_e2e_integration.py::TestE2EIntegration::test_session_upload_with_invalid_file PASSED [ 21%]
tests/test_e2e_integration.py::TestE2EIntegration::test_export_csv_with_empty_results PASSED [ 21%]
tests/test_e2e_integration.py::TestE2EIntegration::test_export_csv_with_unicode_content PASSED [ 21%]
tests/test_e2e_integration.py::TestE2EIntegration::test_export_preserves_data_integrity PASSED [ 21%]
tests/test_error_mapping.py::TestFormatDuration::test_format_seconds PASSED [ 21%]
tests/test_error_mapping.py::TestFormatDuration::test_format_minutes PASSED [ 21%]
tests/test_error_mapping.py::TestFormatDuration::test_format_hours PASSED [ 21%]
tests/test_error_mapping.py::TestExtractWaitTime::test_extract_from_seconds_attribute PASSED [ 21%]
tests/test_error_mapping.py::TestExtractWaitTime::test_extract_from_error_message PASSED [ 21%]
tests/test_error_mapping.py::TestExtractWaitTime::test_no_wait_time_found PASSED [ 21%]
tests/test_error_mapping.py::TestGetUserFriendlyMessage::test_telethon_auth_expiry_error PASSED [ 21%]
tests/test_error_mapping.py::TestGetUserFriendlyMessage::test_auth_key_unregistered_error PASSED [ 21%]
tests/test_error_mapping.py::TestGetUserFriendlyMessage::test_chat_forbidden_error PASSED [ 21%]
tests/test_error_mapping.py::TestGetUserFriendlyMessage::test_channel_private_error PASSED [ 21%]
tests/test_error_mapping.py::TestGetUserFriendlyMessage::test_user_banned_error PASSED [ 21%]
tests/test_error_mapping.py::TestGetUserFriendlyMessage::test_flood_wait_error_with_time PASSED [ 21%]
tests/test_error_mapping.py::TestGetUserFriendlyMessage::test_flood_wait_error_short_time PASSED [ 21%]
tests/test_error_mapping.py::TestGetUserFriendlyMessage::test_username_invalid_error PASSED [ 21%]
tests/test_error_mapping.py::TestGetUserFriendlyMessage::test_invite_hash_expired_error PASSED [ 22%]
tests/test_error_mapping.py::TestGetUserFriendlyMessage::test_timeout_error PASSED [ 22%]
tests/test_error_mapping.py::TestGetUserFriendlyMessage::test_unknown_error_fallback PASSED [ 22%]
tests/test_error_mapping.py::TestGetUserFriendlyMessage::test_error_message_pattern_matching_flood PASSED [ 22%]
tests/test_error_mapping.py::TestGetUserFriendlyMessage::test_error_message_pattern_matching_session PASSED [ 22%]
tests/test_error_mapping.py::TestGetUserFriendlyMessage::test_error_message_pattern_matching_banned PASSED [ 22%]
tests/test_error_mapping.py::TestGetUserFriendlyMessage::test_slow_mode_wait_error PASSED [ 22%]
tests/test_error_mapping.py::TestGetErrorCategory::test_auth_category PASSED [ 22%]
tests/test_error_mapping.py::TestGetErrorCategory::test_access_category PASSED [ 22%]
tests/test_error_mapping.py::TestGetErrorCategory::test_rate_limit_category PASSED [ 22%]
tests/test_error_mapping.py::TestGetErrorCategory::test_network_category PASSED [ 22%]
tests/test_error_mapping.py::TestGetErrorCategory::test_invalid_input_category PASSED [ 22%]
tests/test_error_mapping.py::TestGetErrorCategory::test_other_category PASSED [ 22%]
tests/test_error_mapping.py::TestShouldRetryOnError::test_retry_network_errors PASSED [ 22%]
tests/test_error_mapping.py::TestShouldRetryOnError::test_no_retry_auth_errors PASSED [ 22%]
tests/test_error_mapping.py::TestShouldRetryOnError::test_no_retry_access_errors PASSED [ 22%]
tests/test_error_mapping.py::TestShouldRetryOnError::test_no_retry_invalid_input PASSED [ 22%]
tests/test_error_mapping.py::TestShouldRetryOnError::test_retry_flood_wait PASSED [ 22%]
tests/test_error_mapping.py::TestShouldRetryOnError::test_retry_slow_mode PASSED [ 22%]
tests/test_error_mapping.py::TestShouldRetryOnError::test_no_retry_unknown_errors PASSED [ 22%]
tests/test_error_mapping.py::TestErrorMessagesCoverage::test_all_error_messages_are_non_empty PASSED [ 23%]
tests/test_error_mapping.py::TestErrorMessagesCoverage::test_error_messages_are_user_friendly PASSED [ 23%]
tests/test_error_mapping.py::TestErrorMessagesCoverage::test_error_messages_provide_guidance PASSED [ 23%]
tests/test_error_mapping.py::TestErrorMessagesCoverage::test_coverage_of_common_telegram_errors PASSED [ 23%]
tests/test_error_sanitization.py::TestSanitizeErrorMessageForClient::test_safe_message_passes_through PASSED [ 23%]
tests/test_error_sanitization.py::TestSanitizeErrorMessageForClient::test_file_path_unix_sanitized PASSED [ 23%]
tests/test_error_sanitization.py::TestSanitizeErrorMessageForClient::test_file_path_windows_sanitized PASSED [ 23%]
tests/test_error_sanitization.py::TestSanitizeErrorMessageForClient::test_stack_trace_sanitized PASSED [ 23%]
tests/test_error_sanitization.py::TestSanitizeErrorMessageForClient::test_python_file_reference_sanitized PASSED [ 23%]
tests/test_error_sanitization.py::TestSanitizeErrorMessageForClient::test_line_numbers_sanitized PASSED [ 23%]
tests/test_error_sanitization.py::TestSanitizeErrorMessageForClient::test_error_class_names_sanitized PASSED [ 23%]
tests/test_error_sanitization.py::TestSanitizeErrorMessageForClient::test_internal_ids_sanitized PASSED [ 23%]
tests/test_error_sanitization.py::TestSanitizeErrorMessageForClient::test_hex_hashes_sanitized PASSED [ 23%]
tests/test_error_sanitization.py::TestSanitizeErrorMessageForClient::test_error_state_specific_fallback PASSED [ 23%]
tests/test_error_sanitization.py::TestSanitizeErrorMessageForClient::test_unknown_error_state_fallback PASSED [ 23%]
tests/test_error_sanitization.py::TestSanitizeErrorMessageForClient::test_multiple_sensitive_patterns PASSED [ 23%]
tests/test_events.py::TestSessionEventBus::test_initialization PASSED    [ 23%]
tests/test_events.py::TestSessionEventBus::test_subscribe_and_publish PASSED [ 23%]
tests/test_events.py::TestSessionEventBus::test_multiple_subscribers PASSED [ 23%]
tests/test_events.py::TestSessionEventBus::test_unsubscribe PASSED       [ 23%]
tests/test_events.py::TestSessionEventBus::test_duplicate_subscription PASSED [ 23%]
tests/test_events.py::TestSessionEventBus::test_unsubscribe_nonexistent PASSED [ 24%]
tests/test_events.py::TestSessionEventBus::test_publish_without_subscribers PASSED [ 24%]
tests/test_events.py::TestSessionEventBus::test_subscriber_exception_isolation PASSED [ 24%]
tests/test_events.py::TestSessionEventBus::test_multiple_events PASSED   [ 24%]
tests/test_events.py::TestSessionEventBus::test_clear_subscribers PASSED [ 24%]
tests/test_events.py::TestSessionEventBus::test_async_handler_execution PASSED [ 24%]
tests/test_events.py::TestGlobalEventBus::test_get_event_bus_singleton PASSED [ 24%]
tests/test_events.py::TestGlobalEventBus::test_global_bus_persistence PASSED [ 24%]
tests/test_events.py::TestGlobalEventBus::test_reset_event_bus PASSED    [ 24%]
tests/test_events.py::TestEventBusIntegration::test_session_lifecycle_events PASSED [ 24%]
tests/test_events.py::TestEventBusIntegration::test_multiple_sessions PASSED [ 24%]
tests/test_events.py::TestEventThrottling::test_deduplication PASSED     [ 24%]
tests/test_events.py::TestEventThrottling::test_deduplication_different_status PASSED [ 24%]
tests/test_events.py::TestEventThrottling::test_rate_limiting PASSED     [ 24%]
tests/test_events.py::TestEventThrottling::test_rate_limiting_per_session PASSED [ 24%]
tests/test_events.py::TestEventThrottling::test_slow_subscriber_timeout PASSED [ 24%]
tests/test_events.py::TestEventThrottling::test_rate_limiting_window_resets PASSED [ 24%]
tests/test_events.py::TestEventThrottling::test_reset_session_status_allows_duplicate PASSED [ 24%]
tests/test_events.py::TestEventThrottling::test_reset_session_status_nonexistent_session PASSED [ 24%]
tests/test_export_validation.py::TestAnalysisResultInputValidation::test_valid_input PASSED [ 24%]
tests/test_export_validation.py::TestAnalysisResultInputValidation::test_negative_chat_id PASSED [ 25%]
tests/test_export_validation.py::TestAnalysisResultInputValidation::test_negative_message_count PASSED [ 25%]
tests/test_export_validation.py::TestAnalysisResultInputValidation::test_negative_unique_authors PASSED [ 25%]
tests/test_export_validation.py::TestAnalysisResultInputValidation::test_negative_history_hours PASSED [ 25%]
tests/test_export_validation.py::TestAnalysisResultInputValidation::test_nan_history_hours PASSED [ 25%]
tests/test_export_validation.py::TestAnalysisResultInputValidation::test_inf_history_hours PASSED [ 25%]
tests/test_export_validation.py::TestAnalysisResultInputValidation::test_unique_authors_exceeds_message_count PASSED [ 25%]
tests/test_export_validation.py::TestAnalysisResultInputValidation::test_messages_without_authors PASSED [ 25%]
tests/test_export_validation.py::TestAnalysisResultInputValidation::test_inverted_date_range PASSED [ 25%]
tests/test_export_validation.py::TestAnalysisResultInputValidation::test_future_first_message PASSED [ 25%]
tests/test_export_validation.py::TestAnalysisResultInputValidation::test_future_last_message PASSED [ 25%]
tests/test_export_validation.py::TestAnalysisResultInputValidation::test_future_analyzed_at PASSED [ 25%]
tests/test_export_validation.py::TestAnalysisResultInputValidation::test_analyzed_at_before_last_message PASSED [ 25%]
tests/test_export_validation.py::TestAnalysisResultInputValidation::test_to_analysis_result_conversion PASSED [ 25%]
tests/test_export_validation.py::TestAnalysisResultInputValidation::test_empty_chat_valid PASSED [ 25%]
tests/test_export_validation.py::TestAnalysisResultInputValidation::test_missing_optional_fields PASSED [ 25%]
tests/test_export_validation.py::TestAnalysisResultInputValidation::test_all_chat_types_valid PASSED [ 25%]
tests/test_export_validation.py::TestExportValidationEdgeCases::test_very_long_chat_title PASSED [ 25%]
tests/test_export_validation.py::TestExportValidationEdgeCases::test_unicode_chat_title PASSED [ 25%]
tests/test_export_validation.py::TestExportValidationEdgeCases::test_zero_values_valid_for_empty_chat PASSED [ 25%]
tests/test_export_validation.py::TestExportValidationEdgeCases::test_boundary_positive_chat_id PASSED [ 26%]
tests/test_export_validation.py::TestExportValidationEdgeCases::test_very_large_chat_id PASSED [ 26%]
tests/test_exporter.py::TestToCsvRows::test_empty_results_yields_header_only PASSED [ 26%]
tests/test_exporter.py::TestToCsvRows::test_single_result PASSED         [ 26%]
tests/test_exporter.py::TestToCsvRows::test_multiple_results PASSED      [ 26%]
tests/test_exporter.py::TestToCsvRows::test_chat_without_username PASSED [ 26%]
tests/test_exporter.py::TestToCsvRows::test_different_chat_types PASSED  [ 26%]
tests/test_exporter.py::TestToCsvRows::test_history_hours_formatting PASSED [ 26%]
tests/test_exporter.py::TestToCsvRows::test_messages_per_hour_formatting PASSED [ 26%]
tests/test_exporter.py::TestExportToCsv::test_returns_string PASSED      [ 26%]
tests/test_exporter.py::TestExportToCsv::test_includes_bom_by_default PASSED [ 26%]
tests/test_exporter.py::TestExportToCsv::test_can_exclude_bom PASSED     [ 26%]
tests/test_exporter.py::TestExportToCsv::test_valid_csv_format PASSED    [ 26%]
tests/test_exporter.py::TestExportToCsv::test_writes_to_file PASSED      [ 26%]
tests/test_exporter.py::TestExportToCsv::test_file_has_bom PASSED        [ 26%]
tests/test_exporter.py::TestExportToCsv::test_handles_special_characters PASSED [ 26%]
tests/test_exporter.py::TestExportToCsv::test_handles_unicode PASSED     [ 26%]
tests/test_exporter.py::TestExportToCsv::test_empty_results_produces_header_only PASSED [ 26%]
tests/test_exporter.py::TestExportToCsv::test_handles_rtl_characters PASSED [ 26%]
tests/test_exporter.py::TestExportToCsv::test_handles_zero_width_characters PASSED [ 26%]
tests/test_exporter.py::TestExportToCsv::test_handles_complex_emoji PASSED [ 27%]
tests/test_exporter.py::TestExportToCsv::test_handles_mixed_special_characters PASSED [ 27%]
tests/test_exporter.py::TestExportToCsv::test_handles_newlines_in_chat_title PASSED [ 27%]
tests/test_exporter.py::TestExportToCsv::test_handles_very_long_chat_names PASSED [ 27%]
tests/test_exporter.py::TestExportToCsv::test_handles_extremely_long_chat_names_with_unicode PASSED [ 27%]
tests/test_finalize_reconnect_auth.py::TestFinalizeReconnectAuth::test_finalize_does_not_call_session_manager_connect PASSED [ 27%]
tests/test_finalize_reconnect_auth.py::TestFinalizeReconnectAuth::test_finalize_does_not_call_client_disconnect PASSED [ 27%]
tests/test_finalize_reconnect_auth.py::TestFinalizeReconnectAuth::test_finalize_calls_client_session_save PASSED [ 27%]
tests/test_finalize_reconnect_auth.py::TestFinalizeReconnectAuth::test_finalize_adopts_client_with_correct_args PASSED [ 27%]
tests/test_finalize_reconnect_auth.py::TestFinalizeReconnectAuth::test_full_cycle_finalize_to_connected PASSED [ 27%]
tests/test_finalize_reconnect_auth.py::TestPollingUsesSameClient::test_poll_device_confirmation_uses_same_client PASSED [ 27%]
tests/test_finalize_reconnect_auth.py::TestPollingUsesSameClient::test_poll_does_not_create_new_client PASSED [ 27%]
tests/test_first_run.py::TestFirstRun::test_first_run_detection PASSED   [ 27%]
tests/test_first_run.py::TestFirstRun::test_first_run_marker_content PASSED [ 27%]
tests/test_first_run.py::TestFirstRun::test_ensure_data_dirs_returns_empty_on_success PASSED [ 27%]
tests/test_first_run.py::TestFirstRun::test_ensure_data_dirs_creates_log_dir_when_enabled PASSED [ 27%]
tests/test_first_run.py::TestFirstRun::test_ensure_data_dirs_handles_permission_errors_gracefully PASSED [ 27%]
tests/test_first_run.py::TestFirstRun::test_first_run_marker_path_property PASSED [ 27%]
tests/test_fuzz_parsing.py::TestFuzzSessionFile::test_fuzz_random_bytes_as_session PASSED [ 27%]
tests/test_fuzz_parsing.py::TestFuzzSessionFile::test_fuzz_valid_sqlite_random_data PASSED [ 27%]
tests/test_fuzz_parsing.py::TestFuzzSessionFile::test_fuzz_truncated_sqlite_file PASSED [ 28%]
tests/test_fuzz_parsing.py::TestFuzzSessionFile::test_fuzz_corrupted_sqlite_header PASSED [ 28%]
tests/test_fuzz_parsing.py::TestFuzzSessionFile::test_fuzz_appended_garbage PASSED [ 28%]
tests/test_fuzz_parsing.py::TestFuzzConfigJSON::test_fuzz_random_json_strings PASSED [ 28%]
tests/test_fuzz_parsing.py::TestFuzzConfigJSON::test_fuzz_config_dictionary_values PASSED [ 28%]
tests/test_fuzz_parsing.py::TestFuzzConfigJSON::test_fuzz_config_field_types PASSED [ 28%]
tests/test_fuzz_parsing.py::TestFuzzConfigJSON::test_fuzz_invalid_utf8_sequences PASSED [ 28%]
tests/test_fuzz_parsing.py::TestFuzzConfigJSON::test_fuzz_deeply_nested_json PASSED [ 28%]
tests/test_fuzz_parsing.py::TestFuzzAccountMetadata::test_fuzz_account_metadata_fields PASSED [ 28%]
tests/test_fuzz_parsing.py::TestFuzzAccountMetadata::test_fuzz_arbitrary_metadata_dict PASSED [ 28%]
tests/test_fuzz_parsing.py::TestFuzzFileSizeLimits::test_fuzz_session_file_size_boundaries PASSED [ 28%]
tests/test_fuzz_parsing.py::TestFuzzFileSizeLimits::test_fuzz_config_file_size_boundaries PASSED [ 28%]
tests/test_graceful_shutdown.py::TestGracefulShutdownMiddleware::test_middleware_tracks_active_connections PASSED [ 28%]
tests/test_graceful_shutdown.py::TestGracefulShutdownMiddleware::test_rejects_requests_during_shutdown PASSED [ 28%]
tests/test_graceful_shutdown.py::TestGracefulShutdownMiddleware::test_health_check_fails_during_shutdown PASSED [ 28%]
tests/test_graceful_shutdown.py::TestLifespanShutdown::test_lifespan_initializes_app_state PASSED [ 28%]
tests/test_graceful_shutdown.py::TestLifespanShutdown::test_shutdown_waits_for_active_connections PASSED [ 28%]
tests/test_graceful_shutdown.py::TestPollingTaskCleanupOnShutdown::test_shutdown_cancels_active_polling_task PASSED [ 28%]
tests/test_graceful_shutdown.py::TestPollingTaskCleanupOnShutdown::test_shutdown_handles_already_finished_polling_task PASSED [ 28%]
tests/test_graceful_shutdown.py::TestPollingTaskCleanupOnShutdown::test_no_task_destroyed_warnings_on_shutdown PASSED [ 28%]
tests/test_graceful_shutdown.py::TestAppState::test_app_state_initialization PASSED [ 29%]
tests/test_graceful_shutdown.py::TestAppState::test_app_state_tracks_connections PASSED [ 29%]
tests/test_graceful_shutdown.py::TestAppState::test_app_state_shutdown_flag PASSED [ 29%]
tests/test_group_database.py::test_database_initialization PASSED        [ 29%]
tests/test_group_database.py::test_save_and_load_group PASSED            [ 29%]
tests/test_group_database.py::test_load_nonexistent_group PASSED         [ 29%]
tests/test_group_database.py::test_update_group PASSED                   [ 29%]
tests/test_group_database.py::test_load_all_groups PASSED                [ 29%]
tests/test_group_database.py::test_save_chat PASSED                      [ 29%]
tests/test_group_database.py::test_update_chat_status PASSED             [ 29%]
tests/test_group_database.py::test_update_chat_status_with_error PASSED  [ 29%]
tests/test_group_database.py::test_save_and_load_result PASSED           [ 29%]
tests/test_group_database.py::test_load_results_with_limit PASSED        [ 29%]
tests/test_group_database.py::test_get_group_stats_empty PASSED          [ 29%]
tests/test_group_database.py::test_get_group_stats PASSED                [ 29%]
tests/test_group_database.py::test_cascade_delete PASSED                 [ 29%]
tests/test_group_database.py::test_foreign_key_constraint PASSED         [ 29%]
tests/test_group_database.py::test_timestamps PASSED                     [ 29%]
tests/test_group_database.py::test_json_serialization PASSED             [ 29%]
tests/test_groups_api.py::test_create_group_endpoint_accepts_file PASSED [ 29%]
tests/test_groups_api.py::test_create_group_without_csrf_fails PASSED    [ 29%]
tests/test_groups_api.py::test_empty_csv_file PASSED                     [ 30%]
tests/test_groups_api.py::test_start_analysis_endpoint PASSED            [ 30%]
tests/test_groups_api.py::test_stop_analysis_endpoint PASSED             [ 30%]
tests/test_groups_api.py::test_nonexistent_group_operations PASSED       [ 30%]
tests/test_history.py::TestDatabaseHistoryMethods::test_load_completed_tasks_all PASSED [ 30%]
tests/test_history.py::TestDatabaseHistoryMethods::test_load_completed_tasks_pagination PASSED [ 30%]
tests/test_history.py::TestDatabaseHistoryMethods::test_load_completed_tasks_status_filter PASSED [ 30%]
tests/test_history.py::TestDatabaseHistoryMethods::test_count_completed_tasks PASSED [ 30%]
tests/test_history.py::TestDatabaseHistoryMethods::test_count_completed_tasks_with_filter PASSED [ 30%]
tests/test_history.py::TestDatabaseHistoryMethods::test_load_completed_tasks_with_results PASSED [ 30%]
tests/test_history.py::TestTaskQueueHistoryPreservation::test_clear_completed_preserves_database PASSED [ 30%]
tests/test_history.py::TestTaskQueueHistoryPreservation::test_get_task_with_include_historical PASSED [ 30%]
tests/test_history.py::TestHistoryAPI::test_list_history_endpoint PASSED [ 30%]
tests/test_history.py::TestHistoryAPI::test_list_history_pagination PASSED [ 30%]
tests/test_history.py::TestHistoryAPI::test_list_history_status_filter PASSED [ 30%]
tests/test_history.py::TestHistoryAPI::test_get_task_history_detail PASSED [ 30%]
tests/test_history.py::TestHistoryAPI::test_get_nonexistent_task_history PASSED [ 30%]
tests/test_history.py::TestHistoryAPI::test_history_stats_endpoint PASSED [ 30%]
tests/test_i18n_middleware.py::TestLocaleMiddleware::test_sets_locale_from_cookie PASSED [ 30%]
tests/test_i18n_middleware.py::TestLocaleMiddleware::test_sets_locale_from_query_param PASSED [ 30%]
tests/test_i18n_middleware.py::TestLocaleMiddleware::test_sets_cookie_on_response PASSED [ 31%]
tests/test_i18n_middleware.py::TestDetectLocale::test_from_cookie PASSED [ 31%]
tests/test_i18n_middleware.py::TestDetectLocale::test_from_query_param PASSED [ 31%]
tests/test_i18n_middleware.py::TestDetectLocale::test_from_accept_language PASSED [ 31%]
tests/test_i18n_middleware.py::TestDetectLocale::test_fallback_to_default PASSED [ 31%]
tests/test_i18n_middleware.py::TestDetectLocale::test_ignores_unsupported_locale PASSED [ 31%]
tests/test_i18n_middleware.py::TestParseAcceptLanguage::test_simple_header PASSED [ 31%]
tests/test_i18n_middleware.py::TestParseAcceptLanguage::test_with_quality PASSED [ 31%]
tests/test_i18n_middleware.py::TestParseAcceptLanguage::test_with_region PASSED [ 31%]
tests/test_i18n_middleware.py::TestParseAcceptLanguage::test_multiple_languages PASSED [ 31%]
tests/test_i18n_middleware.py::TestParseAcceptLanguage::test_no_supported PASSED [ 31%]
tests/test_i18n_middleware.py::TestParseAcceptLanguage::test_empty_header PASSED [ 31%]
tests/test_i18n_middleware.py::TestParseAcceptLanguage::test_malformed_quality PASSED [ 31%]
tests/test_importer_google_sheets.py::TestExtractSheetId::test_extract_from_full_url PASSED [ 31%]
tests/test_importer_google_sheets.py::TestExtractSheetId::test_extract_from_url_without_gid PASSED [ 31%]
tests/test_importer_google_sheets.py::TestExtractSheetId::test_extract_from_url_without_https PASSED [ 31%]
tests/test_importer_google_sheets.py::TestExtractSheetId::test_extract_from_http_url PASSED [ 31%]
tests/test_importer_google_sheets.py::TestExtractSheetId::test_extract_with_underscores_and_dashes PASSED [ 31%]
tests/test_importer_google_sheets.py::TestExtractSheetId::test_extract_from_short_url PASSED [ 31%]
tests/test_importer_google_sheets.py::TestExtractSheetId::test_extract_case_insensitive PASSED [ 31%]
tests/test_importer_google_sheets.py::TestExtractSheetId::test_extract_with_query_params PASSED [ 32%]
tests/test_importer_google_sheets.py::TestExtractSheetId::test_extract_with_multiple_path_segments PASSED [ 32%]
tests/test_importer_google_sheets.py::TestExtractSheetId::test_invalid_url_raises_error PASSED [ 32%]
tests/test_importer_google_sheets.py::TestExtractSheetId::test_empty_url_raises_error PASSED [ 32%]
tests/test_importer_google_sheets.py::TestExtractSheetId::test_google_docs_url_raises_error PASSED [ 32%]
tests/test_importer_google_sheets.py::TestExtractSheetId::test_malformed_sheets_url_raises_error PASSED [ 32%]
tests/test_importer_google_sheets.py::TestExtractGid::test_extract_from_fragment PASSED [ 32%]
tests/test_importer_google_sheets.py::TestExtractGid::test_extract_from_query_params PASSED [ 32%]
tests/test_importer_google_sheets.py::TestExtractGid::test_no_gid_returns_none PASSED [ 32%]
tests/test_importer_google_sheets.py::TestExtractGid::test_empty_url_returns_none PASSED [ 32%]
tests/test_importer_google_sheets.py::TestExtractGid::test_gid_zero PASSED [ 32%]
tests/test_importer_google_sheets.py::TestExtractGid::test_fragment_takes_priority_over_query PASSED [ 32%]
tests/test_importer_google_sheets.py::TestExtractGid::test_fragment_with_multiple_params PASSED [ 32%]
tests/test_importer_google_sheets.py::TestExtractGid::test_query_with_multiple_params PASSED [ 32%]
tests/test_importer_google_sheets.py::TestExtractGid::test_url_without_scheme PASSED [ 32%]
tests/test_importer_google_sheets.py::TestBuildCsvExportUrl::test_build_without_gid PASSED [ 32%]
tests/test_importer_google_sheets.py::TestBuildCsvExportUrl::test_build_with_gid PASSED [ 32%]
tests/test_importer_google_sheets.py::TestBuildCsvExportUrl::test_build_with_gid_zero PASSED [ 32%]
tests/test_importer_google_sheets.py::TestBuildCsvExportUrl::test_build_with_gid_none PASSED [ 32%]
tests/test_importer_google_sheets.py::TestBuildCsvExportUrl::test_build_with_complex_sheet_id PASSED [ 32%]
tests/test_importer_google_sheets.py::TestIsGoogleSheetsUrl::test_valid_sheets_url PASSED [ 33%]
tests/test_importer_google_sheets.py::TestIsGoogleSheetsUrl::test_sheets_url_without_https PASSED [ 33%]
tests/test_importer_google_sheets.py::TestIsGoogleSheetsUrl::test_case_insensitive_match PASSED [ 33%]
tests/test_importer_google_sheets.py::TestIsGoogleSheetsUrl::test_non_sheets_url PASSED [ 33%]
tests/test_importer_google_sheets.py::TestIsGoogleSheetsUrl::test_google_docs_url PASSED [ 33%]
tests/test_importer_google_sheets.py::TestIsGoogleSheetsUrl::test_empty_url PASSED [ 33%]
tests/test_importer_google_sheets.py::TestIsGoogleSheetsUrl::test_partial_match PASSED [ 33%]
tests/test_importer_google_sheets.py::TestFetchGoogleSheet::test_successful_fetch PASSED [ 33%]
tests/test_importer_google_sheets.py::TestFetchGoogleSheet::test_fetch_with_custom_timeout PASSED [ 33%]
tests/test_importer_google_sheets.py::TestFetchGoogleSheet::test_fetch_builds_correct_export_url PASSED [ 33%]
tests/test_importer_google_sheets.py::TestFetchGoogleSheet::test_invalid_url_raises_error PASSED [ 33%]
tests/test_importer_google_sheets.py::TestFetchGoogleSheet::test_timeout_error PASSED [ 33%]
tests/test_importer_google_sheets.py::TestFetchGoogleSheet::test_404_error PASSED [ 33%]
tests/test_importer_google_sheets.py::TestFetchGoogleSheet::test_403_error PASSED [ 33%]
tests/test_importer_google_sheets.py::TestFetchGoogleSheet::test_500_error PASSED [ 33%]
tests/test_importer_google_sheets.py::TestFetchGoogleSheet::test_request_error PASSED [ 33%]
tests/test_importer_google_sheets.py::TestFetchGoogleSheet::test_html_response_error PASSED [ 33%]
tests/test_importer_google_sheets.py::TestFetchGoogleSheet::test_parse_error_wrapped PASSED [ 33%]
tests/test_importer_google_sheets.py::TestFetchGoogleSheet::test_empty_sheet PASSED [ 33%]
tests/test_importer_google_sheets.py::TestFetchGoogleSheet::test_sheet_with_headers_only PASSED [ 33%]
tests/test_importer_google_sheets.py::TestFetchGoogleSheet::test_sheet_with_multiple_columns PASSED [ 34%]
tests/test_importer_google_sheets.py::TestFetchGoogleSheet::test_sheet_with_links PASSED [ 34%]
tests/test_importer_google_sheets.py::TestFetchGoogleSheet::test_sheet_with_numeric_ids PASSED [ 34%]
tests/test_importer_google_sheets.py::TestFetchGoogleSheet::test_sheet_with_comments_and_empty_lines PASSED [ 34%]
tests/test_importer_google_sheets.py::TestFetchGoogleSheet::test_fetch_without_gid PASSED [ 34%]
tests/test_importer_google_sheets.py::TestFetchGoogleSheet::test_content_type_with_charset PASSED [ 34%]
tests/test_importer_google_sheets.py::TestFetchGoogleSheet::test_missing_content_type_header PASSED [ 34%]
tests/test_importer_google_sheets.py::TestGoogleSheetsError::test_exception_can_be_raised PASSED [ 34%]
tests/test_importer_google_sheets.py::TestGoogleSheetsError::test_exception_message PASSED [ 34%]
tests/test_importer_google_sheets.py::TestGoogleSheetsError::test_exception_is_exception_subclass PASSED [ 34%]
tests/test_importer_google_sheets.py::TestGoogleSheetsError::test_exception_with_empty_message PASSED [ 34%]
tests/test_importer_google_sheets.py::TestEdgeCases::test_extract_sheet_id_with_very_long_id PASSED [ 34%]
tests/test_importer_google_sheets.py::TestEdgeCases::test_extract_gid_with_very_large_number PASSED [ 34%]
tests/test_importer_google_sheets.py::TestEdgeCases::test_is_google_sheets_url_with_special_characters PASSED [ 34%]
tests/test_importer_google_sheets.py::TestEdgeCases::test_fetch_with_unicode_content PASSED [ 34%]
tests/test_importer_google_sheets.py::TestEdgeCases::test_extract_sheet_id_preserves_case PASSED [ 34%]
tests/test_importer_google_sheets.py::TestEdgeCases::test_build_csv_export_url_with_empty_string_gid PASSED [ 34%]
tests/test_importer_parser.py::TestChatListEntry::test_valid_username_entry PASSED [ 34%]
tests/test_importer_parser.py::TestChatListEntry::test_valid_link_entry PASSED [ 34%]
tests/test_importer_parser.py::TestChatListEntry::test_valid_id_entry PASSED [ 34%]
tests/test_importer_parser.py::TestChatListEntry::test_empty_value_rejected PASSED [ 35%]
tests/test_importer_parser.py::TestChatListEntry::test_whitespace_only_value_rejected PASSED [ 35%]
tests/test_importer_parser.py::TestChatListEntry::test_value_is_stripped PASSED [ 35%]
tests/test_importer_parser.py::TestChatListEntry::test_model_is_frozen PASSED [ 35%]
tests/test_importer_parser.py::TestChatListEntry::test_extra_fields_forbidden PASSED [ 35%]
tests/test_importer_parser.py::TestPatterns::test_telegram_link_pattern_https PASSED [ 35%]
tests/test_importer_parser.py::TestPatterns::test_telegram_link_pattern_http PASSED [ 35%]
tests/test_importer_parser.py::TestPatterns::test_telegram_link_pattern_no_protocol PASSED [ 35%]
tests/test_importer_parser.py::TestPatterns::test_telegram_link_pattern_telegram_me PASSED [ 35%]
tests/test_importer_parser.py::TestPatterns::test_telegram_link_pattern_joinchat PASSED [ 35%]
tests/test_importer_parser.py::TestPatterns::test_telegram_link_pattern_plus_prefix PASSED [ 35%]
tests/test_importer_parser.py::TestPatterns::test_telegram_link_pattern_case_insensitive PASSED [ 35%]
tests/test_importer_parser.py::TestPatterns::test_username_pattern_with_at PASSED [ 35%]
tests/test_importer_parser.py::TestPatterns::test_username_pattern_without_at PASSED [ 35%]
tests/test_importer_parser.py::TestPatterns::test_username_pattern_minimum_length PASSED [ 35%]
tests/test_importer_parser.py::TestPatterns::test_username_pattern_maximum_length PASSED [ 35%]
tests/test_importer_parser.py::TestPatterns::test_username_pattern_must_start_with_letter PASSED [ 35%]
tests/test_importer_parser.py::TestPatterns::test_username_pattern_allows_underscores PASSED [ 35%]
tests/test_importer_parser.py::TestPatterns::test_numeric_id_pattern_positive PASSED [ 35%]
tests/test_importer_parser.py::TestPatterns::test_numeric_id_pattern_negative PASSED [ 35%]
tests/test_importer_parser.py::TestPatterns::test_numeric_id_pattern_rejects_non_numeric PASSED [ 35%]
tests/test_importer_parser.py::TestClassifyEntry::test_empty_string_returns_none PASSED [ 36%]
tests/test_importer_parser.py::TestClassifyEntry::test_whitespace_only_returns_none PASSED [ 36%]
tests/test_importer_parser.py::TestClassifyEntry::test_comment_line_returns_none PASSED [ 36%]
tests/test_importer_parser.py::TestClassifyEntry::test_telegram_link_https PASSED [ 36%]
tests/test_importer_parser.py::TestClassifyEntry::test_telegram_link_normalized_lowercase PASSED [ 36%]
tests/test_importer_parser.py::TestClassifyEntry::test_telegram_link_without_protocol PASSED [ 36%]
tests/test_importer_parser.py::TestClassifyEntry::test_numeric_id_positive PASSED [ 36%]
tests/test_importer_parser.py::TestClassifyEntry::test_numeric_id_negative PASSED [ 36%]
tests/test_importer_parser.py::TestClassifyEntry::test_username_with_at PASSED [ 36%]
tests/test_importer_parser.py::TestClassifyEntry::test_username_without_at PASSED [ 36%]
tests/test_importer_parser.py::TestClassifyEntry::test_username_normalized_lowercase PASSED [ 36%]
tests/test_importer_parser.py::TestClassifyEntry::test_short_username_fallback PASSED [ 36%]
tests/test_importer_parser.py::TestClassifyEntry::test_username_with_special_chars_fallback PASSED [ 36%]
tests/test_importer_parser.py::TestClassifyEntry::test_whitespace_stripped_before_classification PASSED [ 36%]
tests/test_importer_parser.py::TestClassifyEntry::test_single_char_returns_none PASSED [ 36%]
tests/test_importer_parser.py::TestClassifyEntry::test_mixed_case_link PASSED [ 36%]
tests/test_importer_parser.py::TestClassifyEntry::test_joinchat_link PASSED [ 36%]
tests/test_importer_parser.py::TestParseText::test_empty_string PASSED   [ 36%]
tests/test_importer_parser.py::TestParseText::test_empty_bytes PASSED    [ 36%]
tests/test_importer_parser.py::TestParseText::test_single_username PASSED [ 36%]
tests/test_importer_parser.py::TestParseText::test_multiple_usernames PASSED [ 37%]
tests/test_importer_parser.py::TestParseText::test_mixed_entry_types PASSED [ 37%]
tests/test_importer_parser.py::TestParseText::test_skip_empty_lines PASSED [ 37%]
tests/test_importer_parser.py::TestParseText::test_skip_comment_lines PASSED [ 37%]
tests/test_importer_parser.py::TestParseText::test_utf8_decoding PASSED  [ 37%]
tests/test_importer_parser.py::TestParseText::test_cp1251_decoding PASSED [ 37%]
tests/test_importer_parser.py::TestParseText::test_invalid_encoding_raises_parse_error PASSED [ 37%]
tests/test_importer_parser.py::TestParseText::test_string_input_no_decoding PASSED [ 37%]
tests/test_importer_parser.py::TestParseText::test_windows_line_endings PASSED [ 37%]
tests/test_importer_parser.py::TestParseText::test_mac_line_endings PASSED [ 37%]
tests/test_importer_parser.py::TestParseText::test_mixed_line_endings PASSED [ 37%]
tests/test_importer_parser.py::TestParseCsv::test_empty_csv PASSED       [ 37%]
tests/test_importer_parser.py::TestParseCsv::test_single_column_no_header PASSED [ 37%]
tests/test_importer_parser.py::TestParseCsv::test_single_column_with_header PASSED [ 37%]
tests/test_importer_parser.py::TestParseCsv::test_multiple_columns_username_header PASSED [ 37%]
tests/test_importer_parser.py::TestParseCsv::test_multiple_columns_chat_header PASSED [ 37%]
tests/test_importer_parser.py::TestParseCsv::test_multiple_columns_link_header PASSED [ 37%]
tests/test_importer_parser.py::TestParseCsv::test_multiple_columns_id_header PASSED [ 37%]
tests/test_importer_parser.py::TestParseCsv::test_semicolon_delimiter PASSED [ 37%]
tests/test_importer_parser.py::TestParseCsv::test_tab_delimiter PASSED   [ 37%]
tests/test_importer_parser.py::TestParseCsv::test_delimiter_detection_fallback PASSED [ 38%]
tests/test_importer_parser.py::TestParseCsv::test_no_recognized_header_includes_first_row PASSED [ 38%]
tests/test_importer_parser.py::TestParseCsv::test_skip_empty_cells PASSED [ 38%]
tests/test_importer_parser.py::TestParseCsv::test_column_index_out_of_range PASSED [ 38%]
tests/test_importer_parser.py::TestParseCsv::test_utf8_csv PASSED        [ 38%]
tests/test_importer_parser.py::TestParseCsv::test_cp1251_csv PASSED      [ 38%]
tests/test_importer_parser.py::TestParseCsv::test_invalid_csv_encoding PASSED [ 38%]
tests/test_importer_parser.py::TestParseCsv::test_all_known_column_names PASSED [ 38%]
tests/test_importer_parser.py::TestParseCsv::test_case_insensitive_headers PASSED [ 38%]
tests/test_importer_parser.py::TestParseCsv::test_header_with_whitespace PASSED [ 38%]
tests/test_importer_parser.py::TestParseCsv::test_quoted_fields PASSED   [ 38%]
tests/test_importer_parser.py::TestParseXlsx::test_openpyxl_not_installed PASSED [ 38%]
tests/test_importer_parser.py::TestParseXlsx::test_empty_workbook PASSED [ 38%]
tests/test_importer_parser.py::TestParseXlsx::test_single_column_no_header PASSED [ 38%]
tests/test_importer_parser.py::TestParseXlsx::test_single_column_with_header PASSED [ 38%]
tests/test_importer_parser.py::TestParseXlsx::test_multiple_columns_username_header PASSED [ 38%]
tests/test_importer_parser.py::TestParseXlsx::test_skip_empty_cells PASSED [ 38%]
tests/test_importer_parser.py::TestParseXlsx::test_invalid_excel_file PASSED [ 38%]
tests/test_importer_parser.py::TestParseXlsx::test_all_known_column_names PASSED [ 38%]
tests/test_importer_parser.py::TestParseXlsx::test_case_insensitive_headers PASSED [ 38%]
tests/test_importer_parser.py::TestParseXlsx::test_numeric_cells_converted_to_string PASSED [ 39%]
tests/test_importer_parser.py::TestParseChatList::test_txt_extension PASSED [ 39%]
tests/test_importer_parser.py::TestParseChatList::test_csv_extension PASSED [ 39%]
tests/test_importer_parser.py::TestParseChatList::test_xlsx_extension PASSED [ 39%]
tests/test_importer_parser.py::TestParseChatList::test_xls_extension PASSED [ 39%]
tests/test_importer_parser.py::TestParseChatList::test_unknown_extension_with_pk_header PASSED [ 39%]
tests/test_importer_parser.py::TestParseChatList::test_unknown_extension_tries_csv_then_text PASSED [ 39%]
tests/test_importer_parser.py::TestParseChatList::test_unknown_extension_fallback_to_text PASSED [ 39%]
tests/test_importer_parser.py::TestParseChatList::test_unknown_extension_csv_parse_error_fallback PASSED [ 39%]
tests/test_importer_parser.py::TestParseChatList::test_case_insensitive_extension PASSED [ 39%]
tests/test_importer_parser.py::TestParseChatList::test_extension_with_path PASSED [ 39%]
tests/test_importer_parser.py::TestEdgeCasesAndErrors::test_very_long_username PASSED [ 39%]
tests/test_importer_parser.py::TestEdgeCasesAndErrors::test_unicode_usernames PASSED [ 39%]
tests/test_importer_parser.py::TestEdgeCasesAndErrors::test_mixed_valid_and_invalid_entries PASSED [ 39%]
tests/test_importer_parser.py::TestEdgeCasesAndErrors::test_duplicate_entries_not_deduplicated PASSED [ 39%]
tests/test_importer_parser.py::TestEdgeCasesAndErrors::test_link_with_query_params PASSED [ 39%]
tests/test_importer_parser.py::TestEdgeCasesAndErrors::test_csv_with_bom PASSED [ 39%]
tests/test_importer_parser.py::TestEdgeCasesAndErrors::test_csv_with_empty_rows PASSED [ 39%]
tests/test_importer_parser.py::TestEdgeCasesAndErrors::test_text_with_only_comments PASSED [ 39%]
tests/test_importer_parser.py::TestEdgeCasesAndErrors::test_text_with_only_empty_lines PASSED [ 39%]
tests/test_importer_parser.py::TestEdgeCasesAndErrors::test_negative_zero_id PASSED [ 40%]
tests/test_importer_parser.py::TestEdgeCasesAndErrors::test_very_large_numeric_id PASSED [ 40%]
tests/test_importer_parser.py::TestEdgeCasesAndErrors::test_whitespace_in_middle_of_value PASSED [ 40%]
tests/test_importer_parser.py::TestEdgeCasesAndErrors::test_parse_error_exception PASSED [ 40%]
tests/test_importer_parser.py::TestEdgeCasesAndErrors::test_chat_list_entry_type_enum_values PASSED [ 40%]
tests/test_importer_parser.py::TestIntegration::test_real_world_text_file PASSED [ 40%]
tests/test_importer_parser.py::TestIntegration::test_real_world_csv_file PASSED [ 40%]
tests/test_importer_parser.py::TestIntegration::test_round_trip_text_to_entries PASSED [ 40%]
tests/test_importer_parser.py::TestIntegration::test_normalization_consistency PASSED [ 40%]
tests/test_key_manager.py::TestEnvironmentBackend::test_get_key_not_found PASSED [ 40%]
tests/test_key_manager.py::TestEnvironmentBackend::test_set_and_get_key PASSED [ 40%]
tests/test_key_manager.py::TestEnvironmentBackend::test_delete_key PASSED [ 40%]
tests/test_key_manager.py::TestEnvironmentBackend::test_multiple_keys PASSED [ 40%]
tests/test_key_manager.py::TestEnvironmentBackend::test_env_var_name_format PASSED [ 40%]
tests/test_key_manager.py::TestEnvironmentBackend::test_invalid_base64_raises_error SKIPPED) [ 40%]
tests/test_key_manager.py::TestPasswordBackend::test_requires_password PASSED [ 40%]
tests/test_key_manager.py::TestPasswordBackend::test_accepts_password_parameter PASSED [ 40%]
tests/test_key_manager.py::TestPasswordBackend::test_accepts_password_from_env PASSED [ 40%]
tests/test_key_manager.py::TestPasswordBackend::test_deterministic_key_derivation PASSED [ 40%]
tests/test_key_manager.py::TestPasswordBackend::test_different_passwords_produce_different_keys PASSED [ 40%]
tests/test_key_manager.py::TestPasswordBackend::test_different_key_ids_produce_different_keys PASSED [ 41%]
tests/test_key_manager.py::TestPasswordBackend::test_set_key_validates_match PASSED [ 41%]
tests/test_key_manager.py::TestPasswordBackend::test_set_key_accepts_matching_key PASSED [ 41%]
tests/test_key_manager.py::TestPasswordBackend::test_delete_key_is_noop PASSED [ 41%]
tests/test_key_manager.py::TestMachineKeyBackend::test_get_key_returns_consistent_key PASSED [ 41%]
tests/test_key_manager.py::TestMachineKeyBackend::test_key_id_ignored PASSED [ 41%]
tests/test_key_manager.py::TestMachineKeyBackend::test_key_is_valid_fernet_key PASSED [ 41%]
tests/test_key_manager.py::TestMachineKeyBackend::test_set_key_is_noop PASSED [ 41%]
tests/test_key_manager.py::TestMachineKeyBackend::test_delete_key_is_noop PASSED [ 41%]
tests/test_key_manager.py::TestKeyManager::test_create_with_environment_backend PASSED [ 41%]
tests/test_key_manager.py::TestKeyManager::test_create_with_password_backend PASSED [ 41%]
tests/test_key_manager.py::TestKeyManager::test_create_with_machine_backend PASSED [ 41%]
tests/test_key_manager.py::TestKeyManager::test_create_with_invalid_backend PASSED [ 41%]
tests/test_key_manager.py::TestKeyManager::test_create_auto_tries_environment_first PASSED [ 41%]
tests/test_key_manager.py::TestKeyManager::test_create_auto_tries_password_from_env PASSED [ 41%]
tests/test_key_manager.py::TestKeyManager::test_create_auto_falls_back_to_machine PASSED [ 41%]
tests/test_key_manager.py::TestKeyManager::test_get_key_returns_none_for_missing PASSED [ 41%]
tests/test_key_manager.py::TestKeyManager::test_get_or_create_key_creates_new_key PASSED [ 41%]
tests/test_key_manager.py::TestKeyManager::test_get_or_create_key_returns_existing PASSED [ 41%]
tests/test_key_manager.py::TestKeyManager::test_set_key_validates_length PASSED [ 41%]
tests/test_key_manager.py::TestKeyManager::test_set_key_calls_backend PASSED [ 41%]
tests/test_key_manager.py::TestKeyManager::test_delete_key_calls_backend PASSED [ 42%]
tests/test_key_manager.py::TestKeyManager::test_rotate_key_generates_new_key PASSED [ 42%]
tests/test_key_manager.py::TestKeyManager::test_rotate_key_requires_old_key_exists PASSED [ 42%]
tests/test_key_manager.py::TestKeyManager::test_rotate_key_keeps_old_key PASSED [ 42%]
tests/test_key_manager.py::TestKeyManagerIntegration::test_encrypted_storage_with_environment_backend PASSED [ 42%]
tests/test_key_manager.py::TestKeyManagerIntegration::test_encrypted_storage_with_password_backend PASSED [ 42%]
tests/test_key_manager.py::TestKeyManagerIntegration::test_encrypted_storage_with_machine_backend PASSED [ 42%]
tests/test_key_manager.py::TestKeyManagerIntegration::test_encrypted_storage_backward_compatible PASSED [ 42%]
tests/test_key_manager.py::TestKeyManagerIntegration::test_cross_backend_compatibility PASSED [ 42%]
tests/test_leak_detection.py::test_no_leak PASSED                        [ 42%]
tests/test_leak_detection.py::test_intentional_leak_with_skip_marker PASSED [ 42%]
tests/test_leak_detection.py::test_small_allocation PASSED               [ 42%]
tests/test_leak_detection.py::test_large_leak_example SKIPPED (Example
of test that would fail leak detection)                                  [ 42%]
tests/test_leak_detection.py::test_cleanup_after_use PASSED              [ 42%]
tests/test_loading_states.py::TestLoadingStateConnect::test_connect_button_has_htmx_attributes PASSED [ 42%]
tests/test_loading_states.py::TestLoadingStateConnect::test_connect_button_disabled_during_loading PASSED [ 42%]
tests/test_loading_states.py::TestLoadingStateDisconnect::test_disconnect_button_has_htmx_attributes PASSED [ 42%]
tests/test_loading_states.py::TestLoadingStateDisconnect::test_disconnect_button_target_and_swap PASSED [ 42%]
tests/test_loading_states.py::TestLoadingStateReconnect::test_connect_button_for_disconnected_with_session_file PASSED [ 42%]
tests/test_loading_states.py::TestLoadingStateReconnect::test_connect_button_target_and_swap PASSED [ 42%]
tests/test_loading_states.py::TestLoadingStateSendCode::test_code_modal_button_appears_for_needs_code PASSED [ 43%]
tests/test_loading_states.py::TestLoadingStateSendCode::test_code_modal_button_has_session_data PASSED [ 43%]
tests/test_loading_states.py::TestLoadingStateVerifyCode::test_code_form_has_loading_attributes PASSED [ 43%]
tests/test_loading_states.py::TestLoadingStateVerifyCode::test_code_modal_button_accessible PASSED [ 43%]
tests/test_loading_states.py::TestLoadingStateVerify2FA::test_2fa_modal_button_appears_for_needs_2fa PASSED [ 43%]
tests/test_loading_states.py::TestLoadingStateVerify2FA::test_2fa_modal_button_has_session_data PASSED [ 43%]
tests/test_loading_states.py::TestLoadingStateVerify2FA::test_2fa_modal_button_accessible PASSED [ 43%]
tests/test_loading_states.py::TestStatusCellSpinner::test_status_cell_shows_spinner_when_connecting PASSED [ 43%]
tests/test_loading_states.py::TestStatusCellSpinner::test_status_cell_updates_after_connection PASSED [ 43%]
tests/test_loading_states.py::TestStatusCellSpinner::test_status_cell_updates_after_disconnection PASSED [ 43%]
tests/test_loading_states.py::TestAllActionTypesComplete::test_all_six_action_types_present PASSED [ 43%]
tests/test_loading_states.py::TestAllActionTypesComplete::test_all_action_types_have_loading_states PASSED [ 43%]
tests/test_logging.py::test_setup_logging_console_only PASSED            [ 43%]
tests/test_logging.py::test_setup_logging_debug_mode PASSED              [ 43%]
tests/test_logging.py::test_setup_logging_with_file PASSED               [ 43%]
tests/test_logging.py::test_setup_logging_file_rotation PASSED           [ 43%]
tests/test_logging.py::test_setup_logging_invalid_path PASSED            [ 43%]
tests/test_logging.py::test_setup_logging_format PASSED                  [ 43%]
tests/test_logging.py::test_logging_levels PASSED                        [ 43%]
tests/test_logging.py::test_setup_logging_clears_existing_handlers PASSED [ 43%]
tests/test_logging.py::test_log_sanitization_session_tokens PASSED       [ 44%]
tests/test_logging.py::test_log_sanitization_phone_numbers PASSED        [ 44%]
tests/test_logging.py::test_log_sanitization_ip_addresses PASSED         [ 44%]
tests/test_logging.py::test_log_sanitization_bot_tokens PASSED           [ 44%]
tests/test_logging.py::test_log_sanitization_api_hash PASSED             [ 44%]
tests/test_logging.py::test_correlation_id_in_logs PASSED                [ 44%]
tests/test_logging.py::test_correlation_id_context_isolation PASSED      [ 44%]
tests/test_logging.py::test_generate_correlation_id PASSED               [ 44%]
tests/test_logging.py::test_exception_traceback_sanitization PASSED      [ 44%]
tests/test_logging.py::test_exception_with_bot_token_sanitization PASSED [ 44%]
tests/test_logging.py::test_sanitize_text_function PASSED                [ 44%]
tests/test_logging.py::test_sanitizing_formatter_directly PASSED         [ 44%]
tests/test_logging.py::test_json_formatter PASSED                        [ 44%]
tests/test_logging.py::test_json_formatter_sanitizes_sensitive_data PASSED [ 44%]
tests/test_logging.py::test_json_formatter_includes_extra_fields PASSED  [ 44%]
tests/test_logging.py::test_chat_context_filter PASSED                   [ 44%]
tests/test_logging.py::test_chat_context_functions PASSED                [ 44%]
tests/test_logging.py::test_timing_context PASSED                        [ 44%]
tests/test_logging.py::test_timing_context_decorator PASSED              [ 44%]
tests/test_logging.py::test_module_log_levels PASSED                     [ 44%]
tests/test_logging.py::test_setup_logging_with_json_format PASSED        [ 45%]
tests/test_logging.py::test_setup_logging_with_verbose_mode PASSED       [ 45%]
tests/test_logging.py::test_setup_logging_with_module_levels PASSED      [ 45%]
tests/test_logging.py::test_log_format_with_chat_id PASSED               [ 45%]
tests/test_main_module.py::TestSetupLogging::test_setup_logging_console_only_default PASSED [ 45%]
tests/test_main_module.py::TestSetupLogging::test_setup_logging_debug_mode_overrides_level PASSED [ 45%]
tests/test_main_module.py::TestSetupLogging::test_setup_logging_verbose_mode_enables_debug PASSED [ 45%]
tests/test_main_module.py::TestSetupLogging::test_setup_logging_warning_level PASSED [ 45%]
tests/test_main_module.py::TestSetupLogging::test_setup_logging_error_level PASSED [ 45%]
tests/test_main_module.py::TestSetupLogging::test_setup_logging_invalid_level_falls_back_to_info PASSED [ 45%]
tests/test_main_module.py::TestSetupLogging::test_setup_logging_clears_existing_handlers PASSED [ 45%]
tests/test_main_module.py::TestSetupLogging::test_setup_logging_with_file_creates_handlers PASSED [ 45%]
tests/test_main_module.py::TestSetupLogging::test_setup_logging_file_handler_configuration PASSED [ 45%]
tests/test_main_module.py::TestSetupLogging::test_setup_logging_file_creates_log_directory PASSED [ 45%]
tests/test_main_module.py::TestSetupLogging::test_setup_logging_file_writes_to_file PASSED [ 45%]
tests/test_main_module.py::TestSetupLogging::test_setup_logging_file_permission_error_graceful_degradation PASSED [ 45%]
tests/test_main_module.py::TestSetupLogging::test_setup_logging_json_format PASSED [ 45%]
tests/test_main_module.py::TestSetupLogging::test_setup_logging_text_format PASSED [ 45%]
tests/test_main_module.py::TestSetupLogging::test_setup_logging_adds_filters_to_handlers PASSED [ 45%]
tests/test_main_module.py::TestSetupLogging::test_setup_logging_module_levels_configuration PASSED [ 45%]
tests/test_main_module.py::TestSetupLogging::test_setup_logging_no_module_levels PASSED [ 46%]
tests/test_main_module.py::TestSetupLogging::test_setup_logging_verbose_without_debug_logs_message PASSED [ 46%]
tests/test_main_module.py::TestSetupLogging::test_setup_logging_debug_and_verbose_both_set_debug_level PASSED [ 46%]
tests/test_main_module.py::TestSetupLogging::test_setup_logging_file_with_utf8_encoding PASSED [ 46%]
tests/test_main_module.py::TestSetupLogging::test_setup_logging_console_outputs_to_stdout PASSED [ 46%]
tests/test_main_module.py::TestMain::test_main_version_argument_exits PASSED [ 46%]
tests/test_main_module.py::TestMain::test_main_help_argument_exits PASSED [ 46%]
tests/test_main_module.py::TestMain::test_main_validate_argument_success PASSED [ 46%]
tests/test_main_module.py::TestMain::test_main_validate_argument_with_errors PASSED [ 46%]
tests/test_main_module.py::TestMain::test_main_validate_argument_with_warnings PASSED [ 46%]
tests/test_main_module.py::TestMain::test_main_check_config_deprecated_still_works PASSED [ 46%]
tests/test_main_module.py::TestMain::test_main_self_test_success PASSED  [ 46%]
tests/test_main_module.py::TestMain::test_main_self_test_failures PASSED [ 46%]
tests/test_main_module.py::TestMain::test_main_cli_overrides_env_settings PASSED [ 46%]
tests/test_main_module.py::TestMain::test_main_calls_setup_logging PASSED [ 46%]
tests/test_main_module.py::TestMain::test_main_validation_failure_before_server_start PASSED [ 46%]
tests/test_main_module.py::TestMain::test_main_readonly_data_dir_auto_relocates PASSED [ 46%]
tests/test_main_module.py::TestMain::test_main_ensure_data_dirs_errors_exit PASSED [ 46%]
tests/test_main_module.py::TestMain::test_main_first_run_shows_welcome_banner PASSED [ 46%]
tests/test_main_module.py::TestMain::test_main_first_run_marks_complete PASSED [ 46%]
tests/test_main_module.py::TestMain::test_main_not_first_run_no_welcome_banner PASSED [ 47%]
tests/test_main_module.py::TestMain::test_main_uvicorn_called_with_correct_params PASSED [ 47%]
tests/test_main_module.py::TestMain::test_main_uvicorn_debug_mode_sets_log_level PASSED [ 47%]
tests/test_main_module.py::TestMain::test_main_keyboard_interrupt_graceful_shutdown PASSED [ 47%]
tests/test_main_module.py::TestMain::test_main_startup_banner_displays_system_info PASSED [ 47%]
tests/test_main_module.py::TestEdgeCases::test_setup_logging_case_insensitive_level PASSED [ 47%]
tests/test_main_module.py::TestEdgeCases::test_setup_logging_both_debug_and_verbose PASSED [ 47%]
tests/test_main_module.py::TestEdgeCases::test_setup_logging_file_path_with_spaces PASSED [ 47%]
tests/test_main_module.py::TestEdgeCases::test_setup_logging_very_long_path PASSED [ 47%]
tests/test_main_module.py::TestEdgeCases::test_setup_logging_file_already_exists PASSED [ 47%]
tests/test_main_module.py::TestEdgeCases::test_main_first_run_with_dir_errors_no_mark_complete PASSED [ 47%]
tests/test_memory.py::TestMemoryStats::test_creation PASSED              [ 47%]
tests/test_memory.py::TestGetMemoryUsage::test_returns_memory_stats SKIPPED [ 47%]
tests/test_memory.py::TestGetMemoryUsage::test_memory_values_consistent SKIPPED [ 47%]
tests/test_memory.py::TestLogMemoryUsage::test_logs_memory PASSED        [ 47%]
tests/test_memory.py::TestLogMemoryUsage::test_logs_with_prefix PASSED   [ 47%]
tests/test_memory.py::TestMemoryMonitor::test_initialization PASSED      [ 47%]
tests/test_memory.py::TestMemoryMonitor::test_custom_threshold PASSED    [ 47%]
tests/test_memory.py::TestMemoryMonitor::test_check_within_threshold PASSED [ 47%]
tests/test_memory.py::TestMemoryMonitor::test_check_exceeds_threshold PASSED [ 47%]
tests/test_memory.py::TestMemoryMonitor::test_circuit_breaker PASSED     [ 47%]
tests/test_memory.py::TestMemoryMonitor::test_threshold_callback PASSED  [ 48%]
tests/test_memory.py::TestMemoryMonitor::test_get_stats PASSED           [ 48%]
tests/test_memory.py::TestMemoryTracker::test_initialization PASSED      [ 48%]
tests/test_memory.py::TestMemoryTracker::test_snapshot PASSED            [ 48%]
tests/test_memory.py::TestMemoryTracker::test_get_diff PASSED            [ 48%]
tests/test_memory.py::TestMemoryTracker::test_get_diff_missing_snapshot PASSED [ 48%]
tests/test_memory.py::TestMemoryTracker::test_log_diff PASSED            [ 48%]
tests/test_memory.py::TestMemoryTracker::test_clear PASSED               [ 48%]
tests/test_memory_stability.py::TestMemoryCleanup::test_clear_completed_tasks_removes_from_memory PASSED [ 48%]
tests/test_memory_stability.py::TestMemoryCleanup::test_auto_cleanup_triggers_at_threshold PASSED [ 48%]
tests/test_memory_stability.py::TestMemoryCleanup::test_cleanup_orphaned_subscribers PASSED [ 48%]
tests/test_memory_stability.py::TestMemoryCleanup::test_chat_analysis_service_cache_clearing PASSED [ 48%]
tests/test_memory_stability.py::TestMemoryMonitoring::test_get_memory_usage SKIPPED [ 48%]
tests/test_memory_stability.py::TestMemoryMonitoring::test_memory_monitor_within_threshold SKIPPED [ 48%]
tests/test_memory_stability.py::TestMemoryMonitoring::test_memory_monitor_exceeds_threshold SKIPPED [ 48%]
tests/test_memory_stability.py::TestMemoryMonitoring::test_memory_monitor_callback_on_threshold SKIPPED [ 48%]
tests/test_memory_stability.py::TestMemoryMonitoring::test_memory_monitor_circuit_breaker SKIPPED [ 48%]
tests/test_memory_stability.py::TestMemoryMonitoring::test_memory_tracker_snapshots SKIPPED [ 48%]
tests/test_memory_stability.py::TestMemoryMonitoring::test_memory_tracker_missing_snapshot SKIPPED [ 48%]
tests/test_memory_stability.py::TestMemoryStability::test_task_queue_memory_stable_over_iterations SKIPPED [ 48%]
tests/test_memory_stability.py::TestMemoryStability::test_task_queue_with_memory_monitoring SKIPPED [ 49%]
tests/test_memory_stability.py::TestMemoryStability::test_subscriber_queues_cleaned_up SKIPPED [ 49%]
tests/test_memory_stability.py::TestResourceCleanup::test_task_results_cleared_on_completion SKIPPED [ 49%]
tests/test_memory_stability.py::TestResourceCleanup::test_service_cache_stats SKIPPED [ 49%]
tests/test_message.py::TestMessageCreation::test_valid_message PASSED    [ 49%]
tests/test_message.py::TestMessageCreation::test_default_text PASSED     [ 49%]
tests/test_message.py::TestMessageCreation::test_frozen_model PASSED     [ 49%]
tests/test_message.py::TestChatIdValidation::test_positive_chat_id PASSED [ 49%]
tests/test_message.py::TestChatIdValidation::test_zero_chat_id_rejected PASSED [ 49%]
tests/test_message.py::TestChatIdValidation::test_negative_chat_id_rejected PASSED [ 49%]
tests/test_message.py::TestAuthorIdValidation::test_positive_author_id PASSED [ 49%]
tests/test_message.py::TestAuthorIdValidation::test_zero_author_id_rejected PASSED [ 49%]
tests/test_message.py::TestAuthorIdValidation::test_negative_author_id_rejected PASSED [ 49%]
tests/test_message.py::TestTimestampValidation::test_past_timestamp PASSED [ 49%]
tests/test_message.py::TestTimestampValidation::test_future_timestamp_rejected PASSED [ 49%]
tests/test_message.py::TestTimestampValidation::test_near_future_allowed PASSED [ 49%]
tests/test_message.py::TestTimestampValidation::test_naive_timestamp_rejected PASSED [ 49%]
tests/test_message.py::TestMessageFake::test_creates_valid_message PASSED [ 49%]
tests/test_message.py::TestMessageFake::test_custom_values PASSED        [ 49%]
tests/test_message.py::TestMessageFake::test_custom_timestamp PASSED     [ 49%]
tests/test_message.py::TestMessageFake::test_different_each_call PASSED  [ 50%]
tests/test_middleware.py::TestRequestIDMiddleware::test_generates_request_id PASSED [ 50%]
tests/test_middleware.py::TestRequestIDMiddleware::test_uses_existing_request_id PASSED [ 50%]
tests/test_middleware.py::TestGetRequestId::test_returns_none_when_not_set PASSED [ 50%]
tests/test_middleware.py::TestGetRequestId::test_returns_value_when_set PASSED [ 50%]
tests/test_middleware.py::TestRequestLoggingMiddleware::test_logs_request PASSED [ 50%]
tests/test_middleware.py::TestSessionMiddleware::test_creates_session PASSED [ 50%]
tests/test_middleware.py::TestSecurityHeadersMiddleware::test_adds_security_headers PASSED [ 50%]
tests/test_middleware.py::TestGracefulShutdownMiddleware::test_normal_request PASSED [ 50%]
tests/test_middleware.py::TestGracefulShutdownMiddleware::test_rejects_during_shutdown PASSED [ 50%]
tests/test_middleware.py::TestGracefulShutdownMiddleware::test_health_check_during_shutdown PASSED [ 50%]
tests/test_middleware.py::TestCSRFProtectionMiddleware::test_is_exempt_health PASSED [ 50%]
tests/test_middleware.py::TestCSRFProtectionMiddleware::test_is_exempt_export PASSED [ 50%]
tests/test_middleware.py::TestCSRFProtectionMiddleware::test_is_not_exempt PASSED [ 50%]
tests/test_middleware.py::TestCSRFProtectionMiddleware::test_skips_get_requests PASSED [ 50%]
tests/test_middleware.py::TestCSRFProtectionMiddleware::test_rejects_missing_token PASSED [ 50%]
tests/test_middleware.py::TestCSRFProtectionMiddleware::test_accepts_valid_token PASSED [ 50%]
tests/test_middleware.py::TestNetworkStatusMiddleware::test_adds_network_status_header PASSED [ 50%]
tests/test_middleware.py::TestNetworkStatusMiddleware::test_is_exempt PASSED [ 50%]
tests/test_models_validation.py::TestChatMetricsValidation::test_valid_metrics PASSED [ 50%]
tests/test_models_validation.py::TestChatMetricsValidation::test_negative_message_count PASSED [ 51%]
tests/test_models_validation.py::TestChatMetricsValidation::test_negative_unique_authors PASSED [ 51%]
tests/test_models_validation.py::TestChatMetricsValidation::test_negative_history_hours PASSED [ 51%]
tests/test_models_validation.py::TestChatMetricsValidation::test_nan_history_hours PASSED [ 51%]
tests/test_models_validation.py::TestChatMetricsValidation::test_inf_history_hours PASSED [ 51%]
tests/test_models_validation.py::TestChatMetricsValidation::test_unique_authors_exceeds_message_count PASSED [ 51%]
tests/test_models_validation.py::TestChatMetricsValidation::test_messages_without_authors PASSED [ 51%]
tests/test_models_validation.py::TestChatMetricsValidation::test_inverted_date_range PASSED [ 51%]
tests/test_models_validation.py::TestChatMetricsValidation::test_future_first_message PASSED [ 51%]
tests/test_models_validation.py::TestChatMetricsValidation::test_future_last_message PASSED [ 51%]
tests/test_models_validation.py::TestChatMetricsValidation::test_empty_chat_valid PASSED [ 51%]
tests/test_models_validation.py::TestChatMetricsValidation::test_messages_per_hour_computed_correctly PASSED [ 51%]
tests/test_models_validation.py::TestChatMetricsValidation::test_messages_per_hour_zero_for_empty PASSED [ 51%]
tests/test_models_validation.py::TestChatMetricsValidation::test_messages_per_hour_zero_for_zero_history PASSED [ 51%]
tests/test_models_validation.py::TestAnalysisResultValidation::test_valid_result PASSED [ 51%]
tests/test_models_validation.py::TestAnalysisResultValidation::test_analyzed_at_in_future PASSED [ 51%]
tests/test_models_validation.py::TestAnalysisResultValidation::test_analyzed_at_before_last_message PASSED [ 51%]
tests/test_models_validation.py::TestAnalysisResultValidation::test_analyzed_at_near_last_message_with_tolerance PASSED [ 51%]
tests/test_models_validation.py::TestAnalysisResultValidation::test_is_active_recent_messages PASSED [ 51%]
tests/test_models_validation.py::TestAnalysisResultValidation::test_is_active_old_messages PASSED [ 51%]
tests/test_models_validation.py::TestAnalysisResultValidation::test_is_active_no_messages PASSED [ 52%]
tests/test_models_validation.py::TestValidationEdgeCases::test_single_message_chat PASSED [ 52%]
tests/test_models_validation.py::TestValidationEdgeCases::test_very_large_message_count PASSED [ 52%]
tests/test_models_validation.py::TestValidationEdgeCases::test_very_small_history_hours PASSED [ 52%]
tests/test_models_validation.py::TestValidationEdgeCases::test_equal_first_and_last_message_times PASSED [ 52%]
tests/test_monitoring.py::TestChatMonitorState::test_create_monitor_state PASSED [ 52%]
tests/test_monitoring.py::TestChatMonitorState::test_computed_unique_authors PASSED [ 52%]
tests/test_monitoring.py::TestChatMonitorState::test_computed_history_hours PASSED [ 52%]
tests/test_monitoring.py::TestChatMonitorState::test_computed_messages_per_hour PASSED [ 52%]
tests/test_monitoring.py::TestChatMonitorState::test_messages_per_hour_zero_history PASSED [ 52%]
tests/test_monitoring.py::TestSyncSnapshot::test_create_snapshot PASSED  [ 52%]
tests/test_monitoring.py::TestGrowthMetrics::test_create_growth_metrics PASSED [ 52%]
tests/test_monitoring.py::TestMonitoringDatabase::test_database_initialization PASSED [ 52%]
tests/test_monitoring.py::TestMonitoringDatabase::test_save_and_load_monitor_state PASSED [ 52%]
tests/test_monitoring.py::TestMonitoringDatabase::test_load_nonexistent_monitor PASSED [ 52%]
tests/test_monitoring.py::TestMonitoringDatabase::test_update_monitor_state PASSED [ 52%]
tests/test_monitoring.py::TestMonitoringDatabase::test_load_all_monitors PASSED [ 52%]
tests/test_monitoring.py::TestMonitoringDatabase::test_load_enabled_monitors PASSED [ 52%]
tests/test_monitoring.py::TestMonitoringDatabase::test_delete_monitor_state PASSED [ 52%]
tests/test_monitoring.py::TestMonitoringDatabase::test_delete_nonexistent_monitor PASSED [ 52%]
tests/test_monitoring.py::TestMonitoringDatabase::test_save_and_load_snapshots PASSED [ 52%]
tests/test_monitoring.py::TestMonitoringDatabase::test_load_snapshots_with_since PASSED [ 53%]
tests/test_monitoring.py::TestMonitoringDatabase::test_count_snapshots PASSED [ 53%]
tests/test_monitoring.py::TestMonitoringDatabase::test_delete_old_snapshots PASSED [ 53%]
tests/test_monitoring.py::TestMonitoringDatabase::test_cascade_delete_snapshots PASSED [ 53%]
tests/test_network_graceful_degradation.py::TestDNSCheckStrategy::test_dns_check_online PASSED [ 53%]
tests/test_network_graceful_degradation.py::TestDNSCheckStrategy::test_dns_check_offline PASSED [ 53%]
tests/test_network_graceful_degradation.py::TestDNSCheckStrategy::test_dns_check_timeout PASSED [ 53%]
tests/test_network_graceful_degradation.py::TestNetworkMonitor::test_monitor_caches_status PASSED [ 53%]
tests/test_network_graceful_degradation.py::TestNetworkMonitor::test_monitor_force_check_bypasses_cache PASSED [ 53%]
tests/test_network_graceful_degradation.py::TestNetworkMonitor::test_monitor_is_online PASSED [ 53%]
tests/test_network_graceful_degradation.py::TestNetworkMonitor::test_monitor_ensure_online_when_online PASSED [ 53%]
tests/test_network_graceful_degradation.py::TestNetworkMonitor::test_monitor_ensure_online_when_offline PASSED [ 53%]
tests/test_network_graceful_degradation.py::TestNetworkMonitor::test_monitor_wait_for_connectivity_succeeds PASSED [ 53%]
tests/test_network_graceful_degradation.py::TestNetworkMonitor::test_monitor_wait_for_connectivity_timeout PASSED [ 53%]
tests/test_network_graceful_degradation.py::TestNetworkErrorDetection::test_detect_network_error_connection_error PASSED [ 53%]
tests/test_network_graceful_degradation.py::TestNetworkErrorDetection::test_detect_network_error_timeout PASSED [ 53%]
tests/test_network_graceful_degradation.py::TestNetworkErrorDetection::test_detect_network_error_socket_error PASSED [ 53%]
tests/test_network_graceful_degradation.py::TestNetworkErrorDetection::test_detect_network_error_network_offline_error PASSED [ 53%]
tests/test_network_graceful_degradation.py::TestNetworkErrorDetection::test_detect_network_error_by_message PASSED [ 53%]
tests/test_network_graceful_degradation.py::TestNetworkErrorDetection::test_detect_network_error_non_network PASSED [ 53%]
tests/test_network_graceful_degradation.py::TestNetworkGracefulDegradation::test_service_handles_network_offline PASSED [ 54%]
tests/test_network_graceful_degradation.py::TestNetworkGracefulDegradation::test_exception_handler_detects_network_errors PASSED [ 54%]
tests/test_network_graceful_degradation.py::test_global_network_monitor_singleton PASSED [ 54%]
tests/test_paths.py::TestGetBasePath::test_development_mode PASSED       [ 54%]
tests/test_paths.py::TestGetBasePath::test_frozen_mode PASSED            [ 54%]
tests/test_paths.py::TestGetApplicationPath::test_development_mode PASSED [ 54%]
tests/test_paths.py::TestGetApplicationPath::test_frozen_mode PASSED     [ 54%]
tests/test_paths.py::TestIsFrozen::test_not_frozen PASSED                [ 54%]
tests/test_paths.py::TestIsFrozen::test_frozen_without_meipass PASSED    [ 54%]
tests/test_paths.py::TestIsFrozen::test_frozen_with_meipass PASSED       [ 54%]
tests/test_ports.py::TestPortAvailability::test_port_is_available PASSED [ 54%]
tests/test_ports.py::TestPortAvailability::test_port_is_not_available PASSED [ 54%]
tests/test_ports.py::TestFindAvailablePort::test_find_available_port_in_range PASSED [ 54%]
tests/test_ports.py::TestFindAvailablePort::test_find_available_port_when_all_occupied PASSED [ 54%]
tests/test_ports.py::TestFindAvailablePort::test_find_available_port_default_range PASSED [ 54%]
tests/test_ports.py::TestGetPortInfo::test_get_port_info_for_free_port PASSED [ 54%]
tests/test_ports.py::TestGetPortInfo::test_get_port_info_for_occupied_port PASSED [ 54%]
tests/test_ports.py::TestFormatPortConflictMessage::test_format_message_for_occupied_port PASSED [ 54%]
tests/test_ports.py::TestFormatPortConflictMessage::test_format_message_includes_process_info PASSED [ 54%]
tests/test_proxy.py::TestProxyEntryCreation::test_valid_proxy PASSED     [ 54%]
tests/test_proxy.py::TestProxyEntryCreation::test_auto_generated_id PASSED [ 55%]
tests/test_proxy.py::TestProxyEntryCreation::test_with_auth PASSED       [ 55%]
tests/test_proxy.py::TestProxyEntryCreation::test_frozen_model PASSED    [ 55%]
tests/test_proxy.py::TestNameValidation::test_valid_name PASSED          [ 55%]
tests/test_proxy.py::TestNameValidation::test_name_stripped PASSED       [ 55%]
tests/test_proxy.py::TestNameValidation::test_empty_name_rejected PASSED [ 55%]
tests/test_proxy.py::TestNameValidation::test_whitespace_only_name_rejected PASSED [ 55%]
tests/test_proxy.py::TestHostValidation::test_valid_hostname PASSED      [ 55%]
tests/test_proxy.py::TestHostValidation::test_valid_ip PASSED            [ 55%]
tests/test_proxy.py::TestHostValidation::test_host_lowercased PASSED     [ 55%]
tests/test_proxy.py::TestHostValidation::test_host_with_spaces_rejected PASSED [ 55%]
tests/test_proxy.py::TestPortValidation::test_valid_port PASSED          [ 55%]
tests/test_proxy.py::TestPortValidation::test_port_min PASSED            [ 55%]
tests/test_proxy.py::TestPortValidation::test_port_max PASSED            [ 55%]
tests/test_proxy.py::TestPortValidation::test_port_zero_rejected PASSED  [ 55%]
tests/test_proxy.py::TestPortValidation::test_port_too_high_rejected PASSED [ 55%]
tests/test_proxy.py::TestTypeCoercion::test_enum_value PASSED            [ 55%]
tests/test_proxy.py::TestTypeCoercion::test_string_value PASSED          [ 55%]
tests/test_proxy.py::TestTypeCoercion::test_invalid_type_rejected PASSED [ 55%]
tests/test_proxy.py::TestStatusCoercion::test_enum_value PASSED          [ 55%]
tests/test_proxy.py::TestStatusCoercion::test_string_value PASSED        [ 56%]
tests/test_proxy.py::TestProperties::test_has_auth_false PASSED          [ 56%]
tests/test_proxy.py::TestProperties::test_has_auth_true PASSED           [ 56%]
tests/test_proxy.py::TestProperties::test_is_available_untested PASSED   [ 56%]
tests/test_proxy.py::TestProperties::test_is_available_working PASSED    [ 56%]
tests/test_proxy.py::TestProperties::test_is_available_no_ping PASSED    [ 56%]
tests/test_proxy.py::TestWithHealthUpdate::test_success_sets_working PASSED [ 56%]
tests/test_proxy.py::TestWithHealthUpdate::test_failure_increments_counter PASSED [ 56%]
tests/test_proxy.py::TestWithHealthUpdate::test_auto_disable_after_three_failures PASSED [ 56%]
tests/test_proxy.py::TestWithHealthUpdate::test_preserves_other_fields PASSED [ 56%]
tests/test_proxy.py::TestWithStatusReset::test_resets_status PASSED      [ 56%]
tests/test_proxy.py::TestWithStatusReset::test_preserves_timestamps PASSED [ 56%]
tests/test_proxy.py::TestToTelethonProxy::test_socks5_conversion PASSED  [ 56%]
tests/test_proxy.py::TestToTelethonProxy::test_with_auth PASSED          [ 56%]
tests/test_proxy_health.py::TestCheckProxyHealth::test_success PASSED    [ 56%]
tests/test_proxy_health.py::TestCheckProxyHealth::test_timeout PASSED    [ 56%]
tests/test_proxy_health.py::TestCheckProxyHealth::test_connection_error PASSED [ 56%]
tests/test_proxy_health.py::TestUpdateProxyHealth::test_success_updates_status PASSED [ 56%]
tests/test_proxy_health.py::TestUpdateProxyHealth::test_failure_increments_counter PASSED [ 56%]
tests/test_proxy_health.py::TestUpdateProxyHealth::test_auto_disable_after_failures PASSED [ 56%]
tests/test_proxy_health.py::TestCheckSingleProxy::test_combines_health_and_update PASSED [ 57%]
tests/test_proxy_health.py::TestCheckAllProxies::test_checks_all_proxies PASSED [ 57%]
tests/test_proxy_health.py::TestCheckAllProxies::test_empty_pool PASSED  [ 57%]
tests/test_proxy_health.py::TestRetestProxy::test_resets_and_retests PASSED [ 57%]
tests/test_proxy_health.py::TestRetestProxy::test_proxy_not_found PASSED [ 57%]
tests/test_proxy_health.py::TestProxyHealthMonitor::test_initialization PASSED [ 57%]
tests/test_proxy_health.py::TestProxyHealthMonitor::test_custom_interval PASSED [ 57%]
tests/test_proxy_health.py::TestProxyHealthMonitor::test_start PASSED    [ 57%]
tests/test_proxy_health.py::TestProxyHealthMonitor::test_start_already_running PASSED [ 57%]
tests/test_proxy_health.py::TestProxyHealthMonitor::test_stop PASSED     [ 57%]
tests/test_proxy_health.py::TestGetProxyHealthMonitor::test_returns_monitor PASSED [ 57%]
tests/test_proxy_health.py::TestGetProxyHealthMonitor::test_singleton PASSED [ 57%]
tests/test_proxy_pool_api.py::TestListProxies::test_list_proxies_empty PASSED [ 57%]
tests/test_proxy_pool_api.py::TestListProxies::test_list_proxies_returns_all PASSED [ 57%]
tests/test_proxy_pool_api.py::TestCreateProxy::test_create_proxy_success PASSED [ 57%]
tests/test_proxy_pool_api.py::TestCreateProxy::test_create_proxy_with_auth PASSED [ 57%]
tests/test_proxy_pool_api.py::TestCreateProxy::test_create_proxy_invalid_type PASSED [ 57%]
tests/test_proxy_pool_api.py::TestCreateProxy::test_create_proxy_invalid_port PASSED [ 57%]
tests/test_proxy_pool_api.py::TestUpdateProxy::test_update_proxy_success PASSED [ 57%]
tests/test_proxy_pool_api.py::TestUpdateProxy::test_update_proxy_with_new_password PASSED [ 57%]
tests/test_proxy_pool_api.py::TestUpdateProxy::test_update_proxy_not_found PASSED [ 58%]
tests/test_proxy_pool_api.py::TestUpdateProxy::test_update_proxy_invalid_type PASSED [ 58%]
tests/test_proxy_pool_api.py::TestDeleteProxy::test_delete_proxy_success PASSED [ 58%]
tests/test_proxy_pool_api.py::TestDeleteProxy::test_delete_proxy_in_use PASSED [ 58%]
tests/test_proxy_pool_api.py::TestDeleteProxy::test_delete_proxy_not_found PASSED [ 58%]
tests/test_proxy_pool_api.py::TestGetSessionsUsingProxy::test_get_sessions_using_proxy_finds_match PASSED [ 58%]
tests/test_proxy_pool_api.py::TestGetSessionsUsingProxy::test_get_sessions_using_proxy_no_match PASSED [ 58%]
tests/test_proxy_pool_migration.py::TestLegacyProxyMigration::test_migration_creates_proxies_json PASSED [ 58%]
tests/test_proxy_pool_migration.py::TestLegacyProxyMigration::test_migration_skipped_if_proxies_exists PASSED [ 58%]
tests/test_proxy_pool_migration.py::TestLegacyProxyMigration::test_migration_skipped_if_no_legacy_file PASSED [ 58%]
tests/test_proxy_pool_migration.py::TestLegacyProxyMigration::test_migration_handles_http_proxy_type PASSED [ 58%]
tests/test_proxy_pool_migration.py::TestLegacyProxyMigration::test_migration_handles_unknown_proxy_type PASSED [ 58%]
tests/test_proxy_pool_migration.py::TestLegacyProxyMigration::test_migration_handles_invalid_json PASSED [ 58%]
tests/test_proxy_pool_migration.py::TestLegacyProxyMigration::test_migration_handles_invalid_format PASSED [ 58%]
tests/test_rate_limiter.py::TestRateLimitConfig::test_default_config PASSED [ 58%]
tests/test_rate_limiter.py::TestRateLimitConfig::test_custom_config PASSED [ 58%]
tests/test_rate_limiter.py::TestTelegramRateLimiter::test_first_call_no_delay PASSED [ 58%]
tests/test_rate_limiter.py::TestTelegramRateLimiter::test_second_call_enforces_delay PASSED [ 58%]
tests/test_rate_limiter.py::TestTelegramRateLimiter::test_different_operations_independent PASSED [ 58%]
tests/test_rate_limiter.py::TestTelegramRateLimiter::test_disabled_rate_limiting PASSED [ 58%]
tests/test_rate_limiter.py::TestTelegramRateLimiter::test_concurrent_calls_serialized PASSED [ 58%]
tests/test_rate_limiter.py::TestTelegramRateLimiter::test_natural_delay_honored PASSED [ 59%]
tests/test_rate_limiter.py::TestTelegramRateLimiter::test_reset_clears_state PASSED [ 59%]
tests/test_rate_limiter.py::TestTelegramRateLimiter::test_get_config PASSED [ 59%]
tests/test_rate_limiter.py::TestTelegramRateLimiter::test_update_config PASSED [ 59%]
tests/test_rate_limiter.py::TestTelegramRateLimiter::test_all_operation_types PASSED [ 59%]
tests/test_rate_limiter.py::TestGlobalRateLimiter::test_get_rate_limiter_creates_instance PASSED [ 59%]
tests/test_rate_limiter.py::TestGlobalRateLimiter::test_get_rate_limiter_returns_same_instance PASSED [ 59%]
tests/test_rate_limiter.py::TestGlobalRateLimiter::test_set_rate_limiter_replaces_instance PASSED [ 59%]
tests/test_rate_limiter.py::TestGlobalRateLimiter::test_get_rate_limiter_with_config_on_first_call PASSED [ 59%]
tests/test_realtime_e2e.py::test_sse_endpoint_delivers_events_over_http PASSED [ 59%]
tests/test_realtime_e2e.py::test_sse_multiple_clients_receive_events PASSED [ 59%]
tests/test_realtime_e2e.py::test_sse_connection_cleanup_on_disconnect PASSED [ 59%]
tests/test_realtime_e2e.py::test_template_has_sse_htmx_integration PASSED [ 59%]
tests/test_realtime_e2e.py::test_sse_delivers_rapid_status_changes PASSED [ 59%]
tests/test_release_smoke_v082.py::test_bug1_encrypted_credentials_logic PASSED [ 59%]
tests/test_release_smoke_v082.py::test_bug2_error_message_in_template PASSED [ 59%]
tests/test_release_smoke_v082.py::test_bug3_russian_translations_exist PASSED [ 59%]
tests/test_removed_states_verification.py::test_removed_states_not_in_templates PASSED [ 59%]
tests/test_removed_states_verification.py::test_removed_states_not_in_css PASSED [ 59%]
tests/test_removed_states_verification.py::test_removed_states_not_in_translations PASSED [ 59%]
tests/test_removed_states_verification.py::test_classify_error_state_never_returns_removed PASSED [ 60%]
tests/test_removed_states_verification.py::test_classify_error_state_exception_types PASSED [ 60%]
tests/test_retry.py::TestCalculateBackoffDelay::test_exponential_growth PASSED [ 60%]
tests/test_retry.py::TestCalculateBackoffDelay::test_max_delay_cap PASSED [ 60%]
tests/test_retry.py::TestCalculateBackoffDelay::test_jitter_adds_randomness PASSED [ 60%]
tests/test_retry.py::TestCalculateBackoffDelay::test_zero_jitter_deterministic PASSED [ 60%]
tests/test_retry.py::TestCalculateBackoffDelay::test_negative_delay_prevented PASSED [ 60%]
tests/test_retry.py::TestRetryDecorator::test_success_on_first_attempt PASSED [ 60%]
tests/test_retry.py::TestRetryDecorator::test_retry_on_connection_error PASSED [ 60%]
tests/test_retry.py::TestRetryDecorator::test_retry_on_timeout_error PASSED [ 60%]
tests/test_retry.py::TestRetryDecorator::test_retry_on_asyncio_timeout_error PASSED [ 60%]
tests/test_retry.py::TestRetryDecorator::test_retry_on_os_error PASSED   [ 60%]
tests/test_retry.py::TestRetryDecorator::test_retry_on_ssl_error PASSED  [ 60%]
tests/test_retry.py::TestRetryDecorator::test_no_retry_on_cancelled_error PASSED [ 60%]
tests/test_retry.py::TestRetryDecorator::test_failure_after_max_attempts PASSED [ 60%]
tests/test_retry.py::TestRetryDecorator::test_exponential_backoff_delays PASSED [ 60%]
tests/test_retry.py::TestRetryDecorator::test_custom_retryable_exceptions PASSED [ 60%]
tests/test_retry.py::TestRetryDecorator::test_non_retryable_exception_not_caught PASSED [ 60%]
tests/test_retry.py::TestRetryDecorator::test_operation_name_in_logs PASSED [ 60%]
tests/test_retry.py::TestConvenienceDecorators::test_with_retry_for_reads PASSED [ 60%]
tests/test_retry.py::TestRetryIntegration::test_multiple_concurrent_retries PASSED [ 61%]
tests/test_retry.py::TestRetryIntegration::test_timeout_with_retry PASSED [ 61%]
tests/test_retry.py::TestFloodWaitHandling::test_flood_wait_success_after_retry PASSED [ 61%]
tests/test_retry.py::TestFloodWaitHandling::test_flood_wait_disabled PASSED [ 61%]
tests/test_retry.py::TestFloodWaitHandling::test_flood_wait_exceeds_max_wait PASSED [ 61%]
tests/test_retry.py::TestFloodWaitHandling::test_flood_wait_on_final_attempt PASSED [ 61%]
tests/test_retry.py::TestFloodWaitHandling::test_flood_wait_cancelled_during_sleep PASSED [ 61%]
tests/test_retry.py::TestFloodWaitHandling::test_flood_wait_with_explicit_seconds PASSED [ 61%]
tests/test_retry.py::TestFormatFloodWaitDuration::test_format_seconds PASSED [ 61%]
tests/test_retry.py::TestFormatFloodWaitDuration::test_format_minutes PASSED [ 61%]
tests/test_retry.py::TestFormatFloodWaitDuration::test_format_hours PASSED [ 61%]
tests/test_retry.py::TestFormatFloodWaitDuration::test_format_hours_and_minutes PASSED [ 61%]
tests/test_retry.py::TestTelethonErrorRetries::test_retry_broken_pipe_error PASSED [ 61%]
tests/test_retry.py::TestTelethonErrorRetries::test_retry_connection_reset_error PASSED [ 61%]
tests/test_retry.py::TestTelethonErrorRetries::test_retry_connection_aborted_error PASSED [ 61%]
tests/test_retry.py::TestTelethonErrorRetries::test_retry_connection_refused_error PASSED [ 61%]
tests/test_retry.py::TestTelethonErrorRetries::test_retry_file_migrate_error PASSED [ 61%]
tests/test_retry.py::TestTelethonErrorRetries::test_retry_network_migrate_error PASSED [ 61%]
tests/test_retry.py::TestTelethonErrorRetries::test_retry_phone_migrate_error PASSED [ 61%]
tests/test_retry.py::TestTelethonErrorRetries::test_retry_user_migrate_error PASSED [ 61%]
tests/test_retry.py::TestTelethonErrorRetries::test_retry_stats_migrate_error PASSED [ 62%]
tests/test_retry.py::TestTelethonErrorRetries::test_retry_rpc_call_fail_error PASSED [ 62%]
tests/test_retry.py::TestTelethonErrorRetries::test_retry_server_error PASSED [ 62%]
tests/test_retry.py::TestEdgeCases::test_max_attempts_one PASSED         [ 62%]
tests/test_retry.py::TestEdgeCases::test_custom_operation_name PASSED    [ 62%]
tests/test_retry.py::TestEdgeCases::test_zero_base_delay PASSED          [ 62%]
tests/test_retry.py::TestEdgeCases::test_very_large_max_delay PASSED     [ 62%]
tests/test_retry.py::TestEdgeCases::test_function_with_args_and_kwargs PASSED [ 62%]
tests/test_retry.py::TestEdgeCases::test_decorated_function_preserves_name PASSED [ 62%]
tests/test_retry.py::TestEdgeCases::test_multiple_exception_types_in_sequence PASSED [ 62%]
tests/test_save_not_connect.py::TestSaveNotConnect::test_save_account_only_name_phone PASSED [ 62%]
tests/test_save_not_connect.py::TestSaveNotConnect::test_save_account_appears_disconnected PASSED [ 62%]
tests/test_save_not_connect.py::TestSaveNotConnect::test_save_validates_credentials_before_connect PASSED [ 62%]
tests/test_save_not_connect.py::TestSaveNotConnect::test_start_auth_flow_no_telethon_call PASSED [ 62%]
tests/test_save_not_connect.py::TestSaveNotConnect::test_save_with_credentials_no_connect PASSED [ 62%]
tests/test_security_credentials.py::TestCredentialStorageBackend::test_base_store_credentials_not_implemented PASSED [ 62%]
tests/test_security_credentials.py::TestCredentialStorageBackend::test_base_retrieve_credentials_not_implemented PASSED [ 62%]
tests/test_security_credentials.py::TestCredentialStorageBackend::test_base_delete_credentials_not_implemented PASSED [ 62%]
tests/test_security_credentials.py::TestCredentialStorageBackend::test_base_is_available_not_implemented PASSED [ 62%]
tests/test_security_credentials.py::TestEncryptedFileBackend::test_init PASSED [ 62%]
tests/test_security_credentials.py::TestEncryptedFileBackend::test_is_available_always_true PASSED [ 63%]
tests/test_security_credentials.py::TestEncryptedFileBackend::test_get_or_create_key_creates_new_key PASSED [ 63%]
tests/test_security_credentials.py::TestEncryptedFileBackend::test_get_or_create_key_returns_existing_key PASSED [ 63%]
tests/test_security_credentials.py::TestEncryptedFileBackend::test_get_or_create_key_creates_storage_directory PASSED [ 63%]
tests/test_security_credentials.py::TestEncryptedFileBackend::test_get_fernet_returns_fernet_instance PASSED [ 63%]
tests/test_security_credentials.py::TestEncryptedFileBackend::test_store_credentials_success PASSED [ 63%]
tests/test_security_credentials.py::TestEncryptedFileBackend::test_store_and_retrieve_credentials PASSED [ 63%]
tests/test_security_credentials.py::TestEncryptedFileBackend::test_store_multiple_sessions PASSED [ 63%]
tests/test_security_credentials.py::TestEncryptedFileBackend::test_store_credentials_updates_existing_session PASSED [ 63%]
tests/test_security_credentials.py::TestEncryptedFileBackend::test_retrieve_credentials_not_found PASSED [ 63%]
tests/test_security_credentials.py::TestEncryptedFileBackend::test_retrieve_credentials_empty_file PASSED [ 63%]
tests/test_security_credentials.py::TestEncryptedFileBackend::test_retrieve_credentials_corrupted_file PASSED [ 63%]
tests/test_security_credentials.py::TestEncryptedFileBackend::test_retrieve_credentials_invalid_format_missing_api_id PASSED [ 63%]
tests/test_security_credentials.py::TestEncryptedFileBackend::test_retrieve_credentials_invalid_format_non_numeric_api_id PASSED [ 63%]
tests/test_security_credentials.py::TestEncryptedFileBackend::test_delete_credentials_success PASSED [ 63%]
tests/test_security_credentials.py::TestEncryptedFileBackend::test_delete_credentials_keeps_other_sessions PASSED [ 63%]
tests/test_security_credentials.py::TestEncryptedFileBackend::test_delete_credentials_nonexistent_session PASSED [ 63%]
tests/test_security_credentials.py::TestEncryptedFileBackend::test_load_credentials_file_missing_file PASSED [ 63%]
tests/test_security_credentials.py::TestEncryptedFileBackend::test_save_credentials_file_error_handling PASSED [ 63%]
tests/test_security_credentials.py::TestEncryptedFileBackend::test_credentials_file_encrypted PASSED [ 63%]
tests/test_security_credentials.py::TestEncryptedFileBackend::test_encryption_key_persistence PASSED [ 64%]
tests/test_security_credentials.py::TestEnvironmentBackend::test_is_available_always_true PASSED [ 64%]
tests/test_security_credentials.py::TestEnvironmentBackend::test_store_credentials_raises_error PASSED [ 64%]
tests/test_security_credentials.py::TestEnvironmentBackend::test_delete_credentials_raises_error PASSED [ 64%]
tests/test_security_credentials.py::TestEnvironmentBackend::test_retrieve_credentials_success PASSED [ 64%]
tests/test_security_credentials.py::TestEnvironmentBackend::test_retrieve_credentials_with_hyphens_in_session_id PASSED [ 64%]
tests/test_security_credentials.py::TestEnvironmentBackend::test_retrieve_credentials_with_lowercase_session_id PASSED [ 64%]
tests/test_security_credentials.py::TestEnvironmentBackend::test_retrieve_credentials_not_found_missing_api_id PASSED [ 64%]
tests/test_security_credentials.py::TestEnvironmentBackend::test_retrieve_credentials_not_found_missing_api_hash PASSED [ 64%]
tests/test_security_credentials.py::TestEnvironmentBackend::test_retrieve_credentials_invalid_api_id PASSED [ 64%]
tests/test_security_credentials.py::TestSecureCredentialManager::test_init_uses_file_backend PASSED [ 64%]
tests/test_security_credentials.py::TestSecureCredentialManager::test_store_credentials_uses_storage_backend PASSED [ 64%]
tests/test_security_credentials.py::TestSecureCredentialManager::test_retrieve_credentials_tries_environment_first PASSED [ 64%]
tests/test_security_credentials.py::TestSecureCredentialManager::test_retrieve_credentials_uses_file_backend PASSED [ 64%]
tests/test_security_credentials.py::TestSecureCredentialManager::test_retrieve_credentials_not_found_in_any_backend PASSED [ 64%]
tests/test_security_credentials.py::TestSecureCredentialManager::test_delete_credentials_deletes_from_file_backend PASSED [ 64%]
tests/test_security_credentials.py::TestSecureCredentialManager::test_delete_credentials_handles_file_backend_errors_gracefully PASSED [ 64%]
tests/test_security_credentials.py::TestSecureCredentialManager::test_has_credentials_returns_true_when_found PASSED [ 64%]
tests/test_security_credentials.py::TestSecureCredentialManager::test_has_credentials_returns_false_when_not_found PASSED [ 64%]
tests/test_security_credentials.py::TestSecureCredentialManager::test_integration_store_and_retrieve PASSED [ 64%]
tests/test_security_credentials.py::TestSecureCredentialManager::test_integration_store_retrieve_delete PASSED [ 64%]
tests/test_security_credentials.py::TestSecureCredentialManager::test_integration_multiple_sessions PASSED [ 65%]
tests/test_security_credentials.py::TestSecurityProperties::test_encrypted_file_backend_file_permissions PASSED [ 65%]
tests/test_security_credentials.py::TestSecurityProperties::test_encrypted_file_backend_directory_permissions PASSED [ 65%]
tests/test_security_credentials.py::TestSecurityProperties::test_credentials_not_in_plaintext PASSED [ 65%]
tests/test_security_credentials.py::TestSecurityProperties::test_different_encryption_keys_produce_different_ciphertext PASSED [ 65%]
tests/test_security_credentials.py::TestErrorScenarios::test_empty_session_id PASSED [ 65%]
tests/test_security_credentials.py::TestErrorScenarios::test_special_characters_in_session_id PASSED [ 65%]
tests/test_security_credentials.py::TestErrorScenarios::test_very_long_session_id PASSED [ 65%]
tests/test_security_credentials.py::TestErrorScenarios::test_unicode_in_session_id PASSED [ 65%]
tests/test_security_credentials.py::TestErrorScenarios::test_very_long_api_hash PASSED [ 65%]
tests/test_security_credentials.py::TestErrorScenarios::test_zero_api_id PASSED [ 65%]
tests/test_security_credentials.py::TestErrorScenarios::test_negative_api_id PASSED [ 65%]
tests/test_security_credentials.py::TestErrorScenarios::test_very_large_api_id PASSED [ 65%]
tests/test_security_credentials.py::TestErrorScenarios::test_empty_api_hash PASSED [ 65%]
tests/test_self_test.py::test_test_status_enum PASSED                    [ 65%]
tests/test_self_test.py::test_test_result_dataclass PASSED               [ 65%]
tests/test_self_test.py::test_self_test_init PASSED                      [ 65%]
tests/test_self_test.py::test_add_result PASSED                          [ 65%]
tests/test_self_test.py::test_network_connectivity_success PASSED        [ 65%]
tests/test_self_test.py::test_network_connectivity_failure PASSED        [ 65%]
tests/test_self_test.py::test_dns_resolution_success PASSED              [ 66%]
tests/test_self_test.py::test_dns_resolution_timeout PASSED              [ 66%]
tests/test_self_test.py::test_dns_resolution_gaierror PASSED             [ 66%]
tests/test_self_test.py::test_dns_resolution_empty_result PASSED         [ 66%]
tests/test_self_test.py::test_telegram_connectivity_success PASSED       [ 66%]
tests/test_self_test.py::test_telegram_connectivity_partial_success PASSED [ 66%]
tests/test_self_test.py::test_telegram_connectivity_failure PASSED       [ 66%]
tests/test_self_test.py::test_write_permissions_success PASSED           [ 66%]
tests/test_self_test.py::test_write_permissions_mkdir_failure PASSED     [ 66%]
tests/test_self_test.py::test_port_availability_success PASSED           [ 66%]
tests/test_self_test.py::test_port_availability_in_use PASSED            [ 66%]
tests/test_self_test.py::test_configuration_success PASSED               [ 66%]
tests/test_self_test.py::test_configuration_failure PASSED               [ 66%]
tests/test_self_test.py::test_configuration_exception PASSED             [ 66%]
tests/test_self_test.py::test_run_all_tests PASSED                       [ 66%]
tests/test_self_test.py::test_has_failures PASSED                        [ 66%]
tests/test_self_test.py::test_has_warnings PASSED                        [ 66%]
tests/test_self_test.py::test_to_dict PASSED                             [ 66%]
tests/test_self_test.py::test_format_table PASSED                        [ 66%]
tests/test_self_test.py::test_format_table_all_passed PASSED             [ 66%]
tests/test_self_test.py::test_format_table_with_warnings PASSED          [ 67%]
tests/test_service_layer.py::TestChatAnalysisServiceInit::test_service_initialization PASSED [ 67%]
tests/test_service_layer.py::TestGetSessionPaths::test_get_session_paths_success PASSED [ 67%]
tests/test_service_layer.py::TestGetSessionPaths::test_get_session_paths_nonexistent_session PASSED [ 67%]
tests/test_service_layer.py::TestGetSessionPaths::test_get_session_paths_incomplete_session PASSED [ 67%]
tests/test_service_layer.py::TestGetChats::test_get_chats_success PASSED [ 67%]
tests/test_service_layer.py::TestGetChatInfo::test_get_chat_info_from_cache PASSED [ 67%]
tests/test_service_layer.py::TestGetChatInfo::test_get_chat_info_not_in_cache PASSED [ 67%]
tests/test_service_layer.py::TestAnalyzeChat::test_analyze_chat_success PASSED [ 67%]
tests/test_service_layer.py::TestAnalyzeChat::test_analyze_chat_without_cached_info PASSED [ 67%]
tests/test_service_layer.py::TestValidateSession::test_validate_session_success PASSED [ 67%]
tests/test_service_layer.py::TestValidateSession::test_validate_session_not_found PASSED [ 67%]
tests/test_service_layer.py::TestValidateSession::test_validate_session_validation_error PASSED [ 67%]
tests/test_service_monitoring.py::TestMonitoringExceptions::test_monitoring_error_base_exception PASSED [ 67%]
tests/test_service_monitoring.py::TestMonitoringExceptions::test_monitor_not_found_error PASSED [ 67%]
tests/test_service_monitoring.py::TestMonitoringServiceInit::test_init_with_explicit_db_path PASSED [ 67%]
tests/test_service_monitoring.py::TestMonitoringServiceInit::test_init_with_default_db_path PASSED [ 67%]
tests/test_service_monitoring.py::TestEnsureLoader::test_ensure_loader_success PASSED [ 67%]
tests/test_service_monitoring.py::TestEnsureLoader::test_ensure_loader_already_loaded PASSED [ 67%]
tests/test_service_monitoring.py::TestEnsureLoader::test_ensure_loader_session_not_found PASSED [ 67%]
tests/test_service_monitoring.py::TestEnsureLoader::test_ensure_loader_missing_session_file PASSED [ 68%]
tests/test_service_monitoring.py::TestEnableMonitoring::test_enable_monitoring_new_chat PASSED [ 68%]
tests/test_service_monitoring.py::TestEnableMonitoring::test_enable_monitoring_already_enabled PASSED [ 68%]
tests/test_service_monitoring.py::TestEnableMonitoring::test_enable_monitoring_re_enable_disabled PASSED [ 68%]
tests/test_service_monitoring.py::TestEnableMonitoring::test_enable_monitoring_empty_chat PASSED [ 68%]
tests/test_service_monitoring.py::TestEnableMonitoring::test_enable_monitoring_session_not_found PASSED [ 68%]
tests/test_service_monitoring.py::TestDisableMonitoring::test_disable_monitoring_without_delete PASSED [ 68%]
tests/test_service_monitoring.py::TestDisableMonitoring::test_disable_monitoring_with_delete PASSED [ 68%]
tests/test_service_monitoring.py::TestDisableMonitoring::test_disable_monitoring_not_found PASSED [ 68%]
tests/test_service_monitoring.py::TestDisableMonitoring::test_disable_monitoring_delete_not_found PASSED [ 68%]
tests/test_service_monitoring.py::TestSyncChat::test_sync_chat_with_new_messages PASSED [ 68%]
tests/test_service_monitoring.py::TestSyncChat::test_sync_chat_no_new_messages PASSED [ 68%]
tests/test_service_monitoring.py::TestSyncChat::test_sync_chat_first_sync PASSED [ 68%]
tests/test_service_monitoring.py::TestSyncChat::test_sync_chat_with_new_authors PASSED [ 68%]
tests/test_service_monitoring.py::TestSyncChat::test_sync_chat_not_monitored PASSED [ 68%]
tests/test_service_monitoring.py::TestSyncChat::test_sync_chat_disabled PASSED [ 68%]
tests/test_service_monitoring.py::TestSyncChat::test_sync_chat_updates_timestamps PASSED [ 68%]
tests/test_service_monitoring.py::TestSyncAllEnabled::test_sync_all_enabled_multiple_chats PASSED [ 68%]
tests/test_service_monitoring.py::TestSyncAllEnabled::test_sync_all_enabled_with_failures PASSED [ 68%]
tests/test_service_monitoring.py::TestSyncAllEnabled::test_sync_all_enabled_no_monitors PASSED [ 68%]
tests/test_service_monitoring.py::TestGetMonitorState::test_get_monitor_state_exists PASSED [ 69%]
tests/test_service_monitoring.py::TestGetMonitorState::test_get_monitor_state_not_found PASSED [ 69%]
tests/test_service_monitoring.py::TestListMonitors::test_list_monitors_all PASSED [ 69%]
tests/test_service_monitoring.py::TestListMonitors::test_list_monitors_enabled_only PASSED [ 69%]
tests/test_service_monitoring.py::TestListMonitors::test_list_monitors_empty PASSED [ 69%]
tests/test_service_monitoring.py::TestGetMonitoringSummary::test_get_monitoring_summary_with_data PASSED [ 69%]
tests/test_service_monitoring.py::TestGetMonitoringSummary::test_get_monitoring_summary_not_found PASSED [ 69%]
tests/test_service_monitoring.py::TestGetGrowthMetrics::test_get_growth_metrics_with_data PASSED [ 69%]
tests/test_service_monitoring.py::TestGetGrowthMetrics::test_get_growth_metrics_no_data PASSED [ 69%]
tests/test_service_monitoring.py::TestGetGrowthMetrics::test_get_growth_metrics_custom_period PASSED [ 69%]
tests/test_service_monitoring.py::TestGetSnapshots::test_get_snapshots_all PASSED [ 69%]
tests/test_service_monitoring.py::TestGetSnapshots::test_get_snapshots_with_since PASSED [ 69%]
tests/test_service_monitoring.py::TestGetSnapshots::test_get_snapshots_with_limit PASSED [ 69%]
tests/test_service_monitoring.py::TestGetSnapshots::test_get_snapshots_empty PASSED [ 69%]
tests/test_service_monitoring.py::TestGlobalMonitoringService::test_get_monitoring_service_first_call PASSED [ 69%]
tests/test_service_monitoring.py::TestGlobalMonitoringService::test_get_monitoring_service_subsequent_call PASSED [ 69%]
tests/test_service_monitoring.py::TestGlobalMonitoringService::test_get_monitoring_service_without_init PASSED [ 69%]
tests/test_service_monitoring.py::TestGlobalMonitoringService::test_reset_monitoring_service PASSED [ 69%]
tests/test_service_monitoring.py::TestEdgeCasesAndErrors::test_enable_monitoring_with_duplicate_authors PASSED [ 69%]
tests/test_service_monitoring.py::TestEdgeCasesAndErrors::test_sync_chat_cleanup_old_snapshots PASSED [ 69%]
tests/test_service_monitoring.py::TestEdgeCasesAndErrors::test_enable_monitoring_preserves_snapshot_creation PASSED [ 70%]
tests/test_service_monitoring.py::TestEdgeCasesAndErrors::test_get_growth_metrics_zero_period_hours PASSED [ 70%]
tests/test_session.py::TestSessionData::test_creation PASSED             [ 70%]
tests/test_session.py::TestSessionData::test_get_missing_key PASSED      [ 70%]
tests/test_session.py::TestSessionData::test_get_existing_key PASSED     [ 70%]
tests/test_session.py::TestSessionData::test_set PASSED                  [ 70%]
tests/test_session.py::TestSessionData::test_delete PASSED               [ 70%]
tests/test_session.py::TestSessionData::test_delete_missing_key PASSED   [ 70%]
tests/test_session.py::TestSessionData::test_clear PASSED                [ 70%]
tests/test_session.py::TestSessionData::test_touch PASSED                [ 70%]
tests/test_session.py::TestSessionData::test_is_expired_false PASSED     [ 70%]
tests/test_session.py::TestSessionData::test_is_expired_true PASSED      [ 70%]
tests/test_session.py::TestSessionData::test_is_expired_custom_ttl PASSED [ 70%]
tests/test_session.py::TestSessionStore::test_create_session PASSED      [ 70%]
tests/test_session.py::TestSessionStore::test_create_session_unique_ids PASSED [ 70%]
tests/test_session.py::TestSessionStore::test_get_session_existing PASSED [ 70%]
tests/test_session.py::TestSessionStore::test_get_session_touches PASSED [ 70%]
tests/test_session.py::TestSessionStore::test_get_session_missing PASSED [ 70%]
tests/test_session.py::TestSessionStore::test_get_session_beyond_ttl PASSED [ 70%]
tests/test_session.py::TestSessionStore::test_delete_session PASSED      [ 70%]
tests/test_session.py::TestSessionStore::test_delete_session_missing PASSED [ 70%]
tests/test_session.py::TestSessionStore::test_cleanup_expired PASSED     [ 71%]
tests/test_session.py::TestSessionStore::test_get_session_count PASSED   [ 71%]
tests/test_session.py::TestSessionStore::test_thread_safety PASSED       [ 71%]
tests/test_session.py::TestGetSessionStore::test_returns_store PASSED    [ 71%]
tests/test_session.py::TestGetSessionStore::test_singleton PASSED        [ 71%]
tests/test_session.py::TestGetSession::test_creates_new_session PASSED   [ 71%]
tests/test_session.py::TestGetSession::test_returns_existing_session_from_state PASSED [ 71%]
tests/test_session.py::TestGetSession::test_returns_session_from_cookie PASSED [ 71%]
tests/test_session.py::TestGetSession::test_creates_new_if_cookie_invalid PASSED [ 71%]
tests/test_session.py::TestGetSession::test_attaches_to_request_state PASSED [ 71%]
tests/test_session.py::TestSetSessionCookie::test_sets_cookie PASSED     [ 71%]
tests/test_session.py::TestSetSessionCookie::test_cookie_security_settings PASSED [ 71%]
tests/test_session.py::TestDeleteSessionCookie::test_deletes_cookie PASSED [ 71%]
tests/test_session.py::TestSessionIntegration::test_full_session_lifecycle PASSED [ 71%]
tests/test_session.py::TestSessionIntegration::test_multiple_independent_sessions PASSED [ 71%]
tests/test_session_manager.py::TestSessionManagerRegistration::test_register_session PASSED [ 71%]
tests/test_session_manager.py::TestSessionManagerRegistration::test_list_sessions_empty PASSED [ 71%]
tests/test_session_manager.py::TestSessionManagerRegistration::test_unregister_session PASSED [ 71%]
tests/test_session_manager.py::TestSessionManagerConnect::test_connect_success PASSED [ 71%]
tests/test_session_manager.py::TestSessionManagerConnect::test_connect_already_connected PASSED [ 71%]
tests/test_session_manager.py::TestSessionManagerConnect::test_connect_failure PASSED [ 72%]
tests/test_session_manager.py::TestSessionManagerConnect::test_connect_timeout PASSED [ 72%]
tests/test_session_manager.py::TestSessionManagerConnect::test_connect_unregistered_session PASSED [ 72%]
tests/test_session_manager.py::TestSessionManagerDisconnect::test_disconnect_connected_session PASSED [ 72%]
tests/test_session_manager.py::TestSessionManagerDisconnect::test_disconnect_not_connected PASSED [ 72%]
tests/test_session_manager.py::TestSessionManagerDisconnect::test_disconnect_nonexistent PASSED [ 72%]
tests/test_session_manager.py::TestSessionManagerDisconnect::test_disconnect_all PASSED [ 72%]
tests/test_session_manager.py::TestSessionManagerContextManager::test_context_manager_auto_disconnect PASSED [ 72%]
tests/test_session_manager.py::TestSessionManagerContextManager::test_context_manager_no_auto_disconnect PASSED [ 72%]
tests/test_session_manager.py::TestSessionManagerContextManager::test_context_manager_exception_still_disconnects PASSED [ 72%]
tests/test_session_manager.py::TestSessionManagerHealthCheck::test_is_healthy_connected PASSED [ 72%]
tests/test_session_manager.py::TestSessionManagerHealthCheck::test_is_healthy_not_connected PASSED [ 72%]
tests/test_session_manager.py::TestSessionManagerHealthCheck::test_is_healthy_nonexistent PASSED [ 72%]
tests/test_session_manager.py::TestSessionManagerInfo::test_get_info_registered_not_connected PASSED [ 72%]
tests/test_session_manager.py::TestSessionManagerInfo::test_get_info_connected PASSED [ 72%]
tests/test_session_manager.py::TestSessionManagerInfo::test_get_info_nonexistent PASSED [ 72%]
tests/test_session_manager.py::TestSessionManagerLocking::test_concurrent_connects_rejected PASSED [ 72%]
tests/test_session_manager.py::TestSessionManagerLocking::test_unregister_connected_raises PASSED [ 72%]
tests/test_session_manager.py::TestSessionAuthErrors::test_connect_session_revoked_error PASSED [ 72%]
tests/test_session_manager.py::TestSessionAuthErrors::test_connect_auth_key_unregistered_error PASSED [ 72%]
tests/test_session_manager.py::TestSessionAuthErrors::test_connect_phone_banned_error PASSED [ 73%]
tests/test_session_manager.py::TestSessionAuthErrors::test_connect_user_deactivated_ban_error PASSED [ 73%]
tests/test_session_manager.py::TestSessionAuthErrors::test_connect_session_password_needed_error PASSED [ 73%]
tests/test_session_manager.py::TestSessionAuthErrors::test_connect_telethon_auth_expiry_error PASSED [ 73%]
tests/test_session_manager.py::TestSessionAuthErrors::test_invalid_session_state_and_error_message PASSED [ 73%]
tests/test_session_manager.py::TestSessionAuthErrors::test_reauth_required_state_and_error_message PASSED [ 73%]
tests/test_session_manager.py::TestNetworkSwitchHandling::test_is_network_switch_error_broken_pipe PASSED [ 73%]
tests/test_session_manager.py::TestNetworkSwitchHandling::test_is_network_switch_error_connection_reset PASSED [ 73%]
tests/test_session_manager.py::TestNetworkSwitchHandling::test_is_network_switch_error_connection_aborted PASSED [ 73%]
tests/test_session_manager.py::TestNetworkSwitchHandling::test_is_network_switch_error_oserror_with_errno PASSED [ 73%]
tests/test_session_manager.py::TestNetworkSwitchHandling::test_is_network_switch_error_oserror_by_message PASSED [ 73%]
tests/test_session_manager.py::TestNetworkSwitchHandling::test_is_network_switch_error_regular_error PASSED [ 73%]
tests/test_session_manager.py::TestNetworkSwitchHandling::test_handle_network_switch_reconnects PASSED [ 73%]
tests/test_session_manager.py::TestNetworkSwitchHandling::test_handle_network_switch_sets_recovery_flag PASSED [ 73%]
tests/test_session_manager.py::TestNetworkSwitchHandling::test_handle_network_switch_resets_error_tracking PASSED [ 73%]
tests/test_session_manager.py::TestNetworkSwitchHandling::test_network_error_tracking_in_info PASSED [ 73%]
tests/test_session_manager.py::TestNetworkSwitchHandling::test_health_check_clears_old_network_errors PASSED [ 73%]
tests/test_session_manager.py::TestNetworkSwitchIntegration::test_health_check_detects_and_recovers_from_network_switch PASSED [ 73%]
tests/test_session_manager.py::TestDeadSessionRecoveryFlow::test_dead_session_shows_expired_error_message PASSED [ 73%]
tests/test_session_manager.py::TestDeadSessionRecoveryFlow::test_dead_session_revoked_shows_distinct_status PASSED [ 73%]
tests/test_session_manager.py::TestDeadSessionRecoveryFlow::test_dead_session_banned_account_shows_permanent_status PASSED [ 74%]
tests/test_session_manager.py::TestDeadSessionRecoveryFlow::test_temporary_error_vs_permanent_session_death PASSED [ 74%]
tests/test_session_manager.py::TestDeadSessionRecoveryFlow::test_session_recovery_preserves_session_id PASSED [ 74%]
tests/test_session_manager.py::TestDeadSessionRecoveryFlow::test_reauth_required_error_is_recoverable PASSED [ 74%]
tests/test_session_manager.py::TestDeadSessionRecoveryFlow::test_reconnect_flow_same_session_id PASSED [ 74%]
tests/test_session_manager.py::TestAuthKeyUnregisteredAutoRecovery::test_connect_authkey_unregistered_auto_delete PASSED [ 74%]
tests/test_session_manager.py::TestAuthKeyUnregisteredAutoRecovery::test_session_file_deletion_signaled_for_authkey_unregistered PASSED [ 74%]
tests/test_session_manager.py::TestAuthKeyUnregisteredAutoRecovery::test_reregister_after_authkey_unregistered_allows_recovery PASSED [ 74%]
tests/test_session_manager.py::TestAuthKeyUnregisteredAutoRecovery::test_authkey_unregistered_vs_other_auth_errors PASSED [ 74%]
tests/test_session_recovery.py::test_authkey_unregistered_triggers_recovery PASSED [ 74%]
tests/test_session_recovery.py::test_session_revoked_triggers_recovery PASSED [ 74%]
tests/test_session_recovery.py::test_session_expired_triggers_recovery PASSED [ 74%]
tests/test_session_recovery.py::test_corrupted_session_file_triggers_recovery PASSED [ 74%]
tests/test_session_recovery.py::test_recovery_without_phone_publishes_error PASSED [ 74%]
tests/test_sessions_router.py::TestReadUploadWithSizeLimit::test_read_small_file PASSED [ 74%]
tests/test_sessions_router.py::TestReadUploadWithSizeLimit::test_read_file_exceeds_limit PASSED [ 74%]
tests/test_sessions_router.py::TestReadUploadWithSizeLimit::test_read_exact_limit PASSED [ 74%]
tests/test_sessions_router.py::TestReadUploadWithSizeLimit::test_read_chunked_file PASSED [ 74%]
tests/test_sessions_router.py::TestSanitizeSessionName::test_valid_name_alphanumeric PASSED [ 74%]
tests/test_sessions_router.py::TestSanitizeSessionName::test_valid_name_with_underscore PASSED [ 74%]
tests/test_sessions_router.py::TestSanitizeSessionName::test_valid_name_with_hyphen PASSED [ 75%]
tests/test_sessions_router.py::TestSanitizeSessionName::test_removes_path_traversal PASSED [ 75%]
tests/test_sessions_router.py::TestSanitizeSessionName::test_removes_special_characters PASSED [ 75%]
tests/test_sessions_router.py::TestSanitizeSessionName::test_empty_after_sanitization_raises PASSED [ 75%]
tests/test_sessions_router.py::TestSanitizeSessionName::test_truncates_long_name PASSED [ 75%]
tests/test_sessions_router.py::TestValidateSessionFileFormat::test_valid_session_file PASSED [ 75%]
tests/test_sessions_router.py::TestValidateSessionFileFormat::test_invalid_not_sqlite PASSED [ 75%]
tests/test_sessions_router.py::TestValidateSessionFileFormat::test_invalid_missing_sessions_table PASSED [ 75%]
tests/test_sessions_router.py::TestValidateSessionFileFormat::test_invalid_empty_sessions PASSED [ 75%]
tests/test_sessions_router.py::TestValidateSessionFileFormat::test_telethon_2x_session_rejected PASSED [ 75%]
tests/test_sessions_router.py::TestValidateSessionFileFormat::test_valid_telethon_1x_session PASSED [ 75%]
tests/test_sessions_router.py::TestValidateConfigFileFormat::test_valid_config PASSED [ 75%]
tests/test_sessions_router.py::TestValidateConfigFileFormat::test_valid_config_api_id_as_string PASSED [ 75%]
tests/test_sessions_router.py::TestValidateConfigFileFormat::test_invalid_json PASSED [ 75%]
tests/test_sessions_router.py::TestValidateConfigFileFormat::test_missing_api_id PASSED [ 75%]
tests/test_sessions_router.py::TestValidateConfigFileFormat::test_missing_api_hash PASSED [ 75%]
tests/test_sessions_router.py::TestValidateConfigFileFormat::test_invalid_api_id_type PASSED [ 75%]
tests/test_sessions_router.py::TestValidateConfigFileFormat::test_empty_api_hash PASSED [ 75%]
tests/test_sessions_router.py::TestValidateConfigFileFormat::test_empty_config_file PASSED [ 75%]
tests/test_sessions_router.py::TestValidateConfigFileFormat::test_whitespace_only_config PASSED [ 75%]
tests/test_sessions_router.py::TestValidateConfigFileFormat::test_not_json_object_array PASSED [ 76%]
tests/test_sessions_router.py::TestValidateConfigFileFormat::test_not_json_object_string PASSED [ 76%]
tests/test_sessions_router.py::TestValidateConfigFileFormat::test_invalid_utf8 PASSED [ 76%]
tests/test_sessions_router.py::TestValidateConfigFileFormat::test_unknown_fields_lenient PASSED [ 76%]
tests/test_sessions_router.py::TestValidateConfigFileFormat::test_no_warning_for_known_fields_only PASSED [ 76%]
tests/test_sessions_router.py::TestSessionsAPIEndpoints::test_get_sessions_empty PASSED [ 76%]
tests/test_sessions_router.py::TestSessionsAPIEndpoints::test_home_page_loads PASSED [ 76%]
tests/test_sessions_router.py::TestSessionsAPIEndpoints::test_upload_session_invalid_name PASSED [ 76%]
tests/test_sessions_router.py::TestSessionsAPIEndpoints::test_upload_session_invalid_session_file PASSED [ 76%]
tests/test_sessions_router.py::TestSessionsAPIEndpoints::test_upload_session_invalid_config PASSED [ 76%]
tests/test_sessions_router.py::TestSessionsAPIEndpoints::test_delete_session_not_found PASSED [ 76%]
tests/test_sessions_router.py::TestSessionsAPIEndpoints::test_delete_session_invalid_name PASSED [ 76%]
tests/test_sessions_router.py::TestSessionsAPIEndpoints::test_upload_config_file_too_large PASSED [ 76%]
tests/test_sessions_router.py::TestSessionsAPIEndpoints::test_upload_session_file_too_large PASSED [ 76%]
tests/test_sessions_router.py::TestSessionsAPIEndpoints::test_upload_session_with_json_file PASSED [ 76%]
tests/test_sessions_router.py::TestSessionsAPIEndpoints::test_upload_session_json_invalid PASSED [ 76%]
tests/test_sessions_router.py::TestSessionsAPIEndpoints::test_upload_session_json_with_2fa PASSED [ 76%]
tests/test_sessions_router.py::TestMigrateLegacySessions::test_migrate_legacy_session_creates_config PASSED [ 76%]
tests/test_sessions_router.py::TestMigrateLegacySessions::test_migrate_skips_already_migrated PASSED [ 76%]
tests/test_sessions_router.py::TestMigrateLegacySessions::test_migrate_handles_missing_credentials PASSED [ 76%]
tests/test_sessions_router.py::TestMigrateLegacySessions::test_migrate_skips_non_session_directories PASSED [ 76%]
tests/test_sessions_router.py::TestSessionConfigAPI::test_get_session_config_success PASSED [ 77%]
tests/test_sessions_router.py::TestSessionConfigAPI::test_get_session_config_not_found PASSED [ 77%]
tests/test_sessions_router.py::TestSessionConfigAPI::test_get_session_config_invalid_name PASSED [ 77%]
tests/test_sessions_router.py::TestSessionConfigAPI::test_update_session_config_success PASSED [ 77%]
tests/test_sessions_router.py::TestSessionConfigAPI::test_update_session_config_proxy_required PASSED [ 77%]
tests/test_sessions_router.py::TestSessionConfigAPI::test_update_session_config_proxy_not_found PASSED [ 77%]
tests/test_sessions_router.py::TestSessionConfigAPI::test_update_session_config_session_not_found PASSED [ 77%]
tests/test_sessions_router.py::TestSessionConnectDisconnectAPI::test_connect_session_not_found PASSED [ 77%]
tests/test_sessions_router.py::TestSessionConnectDisconnectAPI::test_connect_session_invalid_name PASSED [ 77%]
tests/test_sessions_router.py::TestSessionConnectDisconnectAPI::test_connect_session_not_configured PASSED [ 77%]
tests/test_sessions_router.py::TestSessionConnectDisconnectAPI::test_connect_session_proxy_missing PASSED [ 77%]
tests/test_sessions_router.py::TestSessionConnectDisconnectAPI::test_connect_session_success PASSED [ 77%]
tests/test_sessions_router.py::TestSessionConnectDisconnectAPI::test_connect_session_failure PASSED [ 77%]
tests/test_sessions_router.py::TestSessionConnectDisconnectAPI::test_connect_session_concurrent_request_returns_connecting PASSED [ 77%]
tests/test_sessions_router.py::TestSessionConnectDisconnectAPI::test_connect_session_timeout_returns_connecting PASSED [ 77%]
tests/test_sessions_router.py::TestSessionConnectDisconnectAPI::test_connect_session_missing_session_file PASSED [ 77%]
tests/test_sessions_router.py::TestSessionConnectDisconnectAPI::test_connect_session_invalid_session_auto_reauth PASSED [ 77%]
tests/test_sessions_router.py::TestSessionConnectDisconnectAPI::test_disconnect_session_invalid_name PASSED [ 77%]
tests/test_sessions_router.py::TestSessionConnectDisconnectAPI::test_disconnect_session_success PASSED [ 77%]
tests/test_sessions_router.py::TestSessionConnectDisconnectAPI::test_disconnect_session_not_connected PASSED [ 77%]
tests/test_sessions_router.py::TestDeadSessionRecoveryUX::test_dead_session_returns_connecting_state PASSED [ 78%]
tests/test_sessions_router.py::TestDeadSessionRecoveryUX::test_expired_session_connect_returns_connecting PASSED [ 78%]
tests/test_sessions_router.py::TestDeadSessionRecoveryUX::test_session_recovery_preserves_session_id PASSED [ 78%]
tests/test_sessions_router.py::TestDeadSessionRecoveryUX::test_temporary_error_vs_permanent_session_death_ui PASSED [ 78%]
tests/test_sessions_router.py::TestAPICredentialReValidation::test_change_api_id_triggers_disconnect_and_reauth PASSED [ 78%]
tests/test_sessions_router.py::TestAPICredentialReValidation::test_invalid_api_id_rejected_not_saved PASSED [ 78%]
tests/test_sessions_router.py::TestAPICredentialReValidation::test_valid_credentials_needing_auth_triggers_reconnect PASSED [ 78%]
tests/test_sessions_router.py::TestAPICredentialReValidation::test_credentials_not_saved_before_validation_success PASSED [ 78%]
tests/test_sessions_router.py::TestAPICredentialReValidation::test_network_error_during_validation_shows_proxy_error PASSED [ 78%]
tests/test_sessions_router.py::TestVerify2FA::test_password_validation_logic PASSED [ 78%]
tests/test_sessions_router.py::TestVerify2FA::test_verify_code_2fa_auto_fails_shows_manual_modal PASSED [ 78%]
tests/test_sessions_router.py::TestBackwardCompatibilityLegacySessions::test_list_stored_sessions_without_session_file PASSED [ 78%]
tests/test_sessions_router.py::TestValidateAccountInfoJson::test_valid_json_minimal PASSED [ 78%]
tests/test_sessions_router.py::TestValidateAccountInfoJson::test_valid_json_all_fields PASSED [ 78%]
tests/test_sessions_router.py::TestValidateAccountInfoJson::test_valid_phone_without_plus PASSED [ 78%]
tests/test_sessions_router.py::TestValidateAccountInfoJson::test_invalid_not_dict PASSED [ 78%]
tests/test_sessions_router.py::TestValidateAccountInfoJson::test_unknown_fields_accepted PASSED [ 78%]
tests/test_sessions_router.py::TestValidateAccountInfoJson::test_invalid_nested_object PASSED [ 78%]
tests/test_sessions_router.py::TestValidateAccountInfoJson::test_invalid_nested_array PASSED [ 78%]
tests/test_sessions_router.py::TestValidateAccountInfoJson::test_invalid_missing_phone PASSED [ 78%]
tests/test_sessions_router.py::TestValidateAccountInfoJson::test_invalid_empty_phone PASSED [ 79%]
tests/test_sessions_router.py::TestValidateAccountInfoJson::test_invalid_phone_format_letters PASSED [ 79%]
tests/test_sessions_router.py::TestValidateAccountInfoJson::test_invalid_phone_too_short PASSED [ 79%]
tests/test_sessions_router.py::TestValidateAccountInfoJson::test_invalid_phone_too_long PASSED [ 79%]
tests/test_sessions_router.py::TestValidateAccountInfoJson::test_invalid_phone_leading_zero PASSED [ 79%]
tests/test_sessions_router.py::TestVerifyCode2FAAutoEntry::test_verify_code_auto_2fa_success PASSED [ 79%]
tests/test_sessions_router.py::TestVerifyCode2FAAutoEntry::test_verify_code_auto_2fa_missing PASSED [ 79%]
tests/test_sessions_router.py::TestVerifyCode2FAAutoEntry::test_verify_code_auto_2fa_wrong PASSED [ 79%]
tests/test_sessions_router.py::TestSessionImport::test_validate_import_session_success PASSED [ 79%]
tests/test_sessions_router.py::TestSessionImport::test_validate_import_session_invalid_json_missing_phone PASSED [ 79%]
tests/test_sessions_router.py::TestSessionImport::test_validate_import_session_invalid_phone_format PASSED [ 79%]
tests/test_sessions_router.py::TestSessionImport::test_validate_import_session_extracts_api_credentials PASSED [ 79%]
tests/test_sessions_router.py::TestSessionImport::test_save_import_session_success PASSED [ 79%]
tests/test_sessions_router.py::TestSessionImport::test_save_import_session_duplicate_name PASSED [ 79%]
tests/test_sse_integration.py::TestSSEIntegration::test_sse_endpoint_is_defined PASSED [ 79%]
tests/test_sse_integration.py::TestSSEIntegration::test_sse_endpoint_route_exists PASSED [ 79%]
tests/test_sse_integration.py::TestSSEIntegration::test_sse_event_bus_integration PASSED [ 79%]
tests/test_sse_integration.py::TestSSEIntegration::test_sse_multiple_events_via_bus PASSED [ 79%]
tests/test_sse_integration.py::TestSSEIntegration::test_sse_event_format_correct PASSED [ 79%]
tests/test_sse_integration.py::TestSSEIntegration::test_sse_event_bus_subscription PASSED [ 79%]
tests/test_sse_integration.py::TestSSEIntegration::test_sse_deduplication PASSED [ 80%]
tests/test_sse_integration.py::TestSSEIntegration::test_sse_rate_limiting PASSED [ 80%]
tests/test_sse_integration.py::TestSSEIntegration::test_sse_handler_in_router PASSED [ 80%]
tests/test_sse_integration.py::TestSSEIntegration::test_sse_stream_format PASSED [ 80%]
tests/test_sse_integration.py::TestSSEIntegration::test_sse_handles_exception_in_subscriber PASSED [ 80%]
tests/test_sse_integration.py::TestSSEIntegration::test_sse_endpoint_returns_streaming_response PASSED [ 80%]
tests/test_sse_integration.py::TestSSEIntegration::test_sse_endpoint_cleans_up_on_disconnect PASSED [ 80%]
tests/test_sse_integration.py::TestSSEIntegration::test_sse_connection_stability_multiple_events PASSED [ 80%]
tests/test_sse_integration.py::TestSSEIntegration::test_sse_connection_stability_reconnection PASSED [ 80%]
tests/test_sse_integration.py::TestSSEIntegration::test_sse_connection_stability_no_memory_leak PASSED [ 80%]
tests/test_start_auth_flow.py::TestStartAuthFlowValidation::test_valid_credentials_accepted PASSED [ 80%]
tests/test_start_auth_flow.py::TestStartAuthFlowValidation::test_empty_credentials_accepted PASSED [ 80%]
tests/test_start_auth_flow.py::TestStartAuthFlowValidation::test_api_id_without_api_hash_rejected PASSED [ 80%]
tests/test_start_auth_flow.py::TestStartAuthFlowValidation::test_api_hash_without_api_id_rejected PASSED [ 80%]
tests/test_start_auth_flow.py::TestStartAuthFlowValidation::test_zero_api_id_rejected PASSED [ 80%]
tests/test_start_auth_flow.py::TestStartAuthFlowValidation::test_negative_api_id_rejected PASSED [ 80%]
tests/test_start_auth_flow.py::TestStartAuthFlowValidation::test_invalid_api_hash_format_rejected PASSED [ 80%]
tests/test_start_auth_flow.py::TestStartAuthFlowValidation::test_short_api_hash_rejected PASSED [ 80%]
tests/test_start_auth_flow.py::TestStartAuthFlowValidation::test_non_hex_api_hash_rejected PASSED [ 80%]
tests/test_startup_smoke.py::test_app_startup_and_sessions_endpoint PASSED [ 80%]
tests/test_storage.py::TestFileStorage::test_save_and_load_bytes PASSED  [ 81%]
tests/test_storage.py::TestFileStorage::test_save_and_load_string PASSED [ 81%]
tests/test_storage.py::TestFileStorage::test_save_creates_parent_dirs PASSED [ 81%]
tests/test_storage.py::TestFileStorage::test_atomic_write PASSED         [ 81%]
tests/test_storage.py::TestFileStorage::test_load_nonexistent_file PASSED [ 81%]
tests/test_storage.py::TestFileStorage::test_delete_file PASSED          [ 81%]
tests/test_storage.py::TestFileStorage::test_delete_directory PASSED     [ 81%]
tests/test_storage.py::TestFileStorage::test_delete_nonexistent_path PASSED [ 81%]
tests/test_storage.py::TestFileStorage::test_exists PASSED               [ 81%]
tests/test_storage.py::TestFileStorage::test_list_files PASSED           [ 81%]
tests/test_storage.py::TestFileStorage::test_list_files_nonexistent_dir PASSED [ 81%]
tests/test_storage.py::TestFileStorage::test_ensure_dir PASSED           [ 81%]
tests/test_storage.py::TestFileStorage::test_ensure_dir_idempotent PASSED [ 81%]
tests/test_storage.py::TestFileStorage::test_temp_file_cleanup_on_normal_operation PASSED [ 81%]
tests/test_storage.py::TestFileStorage::test_temp_file_cleanup_on_error PASSED [ 81%]
tests/test_storage.py::TestFileStorage::test_orphaned_temp_files_cleanup PASSED [ 81%]
tests/test_storage.py::TestFileStorage::test_orphaned_temp_files_cleanup_nonexistent_dir PASSED [ 81%]
tests/test_storage.py::TestFileStorage::test_orphaned_temp_files_cleanup_empty_dir PASSED [ 81%]
tests/test_storage.py::TestFileStorage::test_atomic_write_temp_file_registration PASSED [ 81%]
tests/test_storage.py::TestFileStorage::test_cleanup_old_session_files PASSED [ 81%]
tests/test_storage.py::TestFileStorage::test_cleanup_old_session_files_with_config PASSED [ 82%]
tests/test_storage.py::TestFileStorage::test_cleanup_old_session_files_nonexistent_dir PASSED [ 82%]
tests/test_storage.py::TestFileStorage::test_cleanup_old_session_files_empty_dir PASSED [ 82%]
tests/test_storage.py::TestFileStorage::test_cleanup_old_session_files_no_sessions_old_enough PASSED [ 82%]
tests/test_storage.py::TestJSONHelpers::test_save_and_load_json PASSED   [ 82%]
tests/test_storage.py::TestJSONHelpers::test_save_json_with_unicode PASSED [ 82%]
tests/test_storage.py::TestJSONHelpers::test_save_json_creates_dirs PASSED [ 82%]
tests/test_storage.py::TestJSONHelpers::test_load_json_invalid_file PASSED [ 82%]
tests/test_storage.py::TestJSONHelpers::test_load_json_nonexistent_file PASSED [ 82%]
tests/test_storage.py::TestEncryptedStorage::test_save_and_load_encrypted PASSED [ 82%]
tests/test_storage.py::TestEncryptedStorage::test_save_string_content PASSED [ 82%]
tests/test_storage.py::TestEncryptedStorage::test_encrypted_file_is_not_plaintext PASSED [ 82%]
tests/test_storage.py::TestEncryptedStorage::test_machine_derived_key PASSED [ 82%]
tests/test_storage.py::TestEncryptedStorage::test_wrong_key_fails_decryption PASSED [ 82%]
tests/test_storage.py::TestEncryptedStorage::test_key_rotation_support PASSED [ 82%]
tests/test_storage.py::TestEncryptedStorage::test_corrupted_file_raises_error PASSED [ 82%]
tests/test_storage.py::TestEncryptedStorage::test_invalid_magic_raises_error PASSED [ 82%]
tests/test_storage.py::TestEncryptedStorage::test_unsupported_version_raises_error PASSED [ 82%]
tests/test_storage.py::TestEncryptedStorage::test_decorator_delegates_other_methods PASSED [ 82%]
tests/test_storage.py::TestEncryptedStorage::test_list_files_with_encrypted_storage PASSED [ 82%]
tests/test_storage.py::TestEncryptedStorage::test_ensure_dir_with_encrypted_storage PASSED [ 82%]
tests/test_storage.py::TestEncryptedStorage::test_derive_key_from_machine_id_is_deterministic PASSED [ 83%]
tests/test_storage.py::TestEncryptedStorage::test_derive_key_from_machine_id_is_valid_fernet_key PASSED [ 83%]
tests/test_storage.py::TestEncryptedStorage::test_encryption_with_unicode_content PASSED [ 83%]
tests/test_storage.py::TestEncryptedStorage::test_large_file_encryption PASSED [ 83%]
tests/test_storage.py::TestEncryptedStorage::test_tampered_encrypted_data_fails_decryption PASSED [ 83%]
tests/test_storage_errors.py::TestStorageError::test_is_exception PASSED [ 83%]
tests/test_storage_errors.py::TestStorageError::test_can_be_raised PASSED [ 83%]
tests/test_storage_errors.py::TestStorageError::test_can_be_caught_as_exception PASSED [ 83%]
tests/test_storage_errors.py::TestStorageNotFoundError::test_inherits_from_storage_error PASSED [ 83%]
tests/test_storage_errors.py::TestStorageNotFoundError::test_can_be_raised PASSED [ 83%]
tests/test_storage_errors.py::TestStorageNotFoundError::test_can_be_caught_as_storage_error PASSED [ 83%]
tests/test_storage_errors.py::TestStoragePermissionError::test_inherits_from_storage_error PASSED [ 83%]
tests/test_storage_errors.py::TestStoragePermissionError::test_can_be_raised PASSED [ 83%]
tests/test_storage_errors.py::TestStorageValidationError::test_inherits_from_storage_error PASSED [ 83%]
tests/test_storage_errors.py::TestStorageValidationError::test_can_be_raised PASSED [ 83%]
tests/test_storage_errors.py::TestStorageCorruptedError::test_inherits_from_storage_error PASSED [ 83%]
tests/test_storage_errors.py::TestStorageCorruptedError::test_can_be_raised PASSED [ 83%]
tests/test_storage_errors.py::TestExceptionHierarchy::test_all_inherit_from_storage_error PASSED [ 83%]
tests/test_storage_errors.py::TestExceptionHierarchy::test_catch_all_with_storage_error PASSED [ 83%]
tests/test_storage_helpers.py::TestAtomicWrite::test_writes_string_content PASSED [ 83%]
tests/test_storage_helpers.py::TestAtomicWrite::test_writes_bytes_content PASSED [ 84%]
tests/test_storage_helpers.py::TestAtomicWrite::test_uses_custom_storage PASSED [ 84%]
tests/test_storage_helpers.py::TestSaveJson::test_saves_dict PASSED      [ 84%]
tests/test_storage_helpers.py::TestSaveJson::test_saves_list PASSED      [ 84%]
tests/test_storage_helpers.py::TestSaveJson::test_custom_indent PASSED   [ 84%]
tests/test_storage_helpers.py::TestSaveJson::test_raises_on_unserializable PASSED [ 84%]
tests/test_storage_helpers.py::TestSaveJson::test_unicode_content PASSED [ 84%]
tests/test_storage_helpers.py::TestLoadJson::test_loads_valid_json PASSED [ 84%]
tests/test_storage_helpers.py::TestLoadJson::test_loads_array PASSED     [ 84%]
tests/test_storage_helpers.py::TestLoadJson::test_raises_on_invalid_json PASSED [ 84%]
tests/test_storage_helpers.py::TestLoadJson::test_raises_on_invalid_encoding PASSED [ 84%]
tests/test_storage_helpers.py::TestLoadJson::test_uses_custom_storage PASSED [ 84%]
tests/test_task_database.py::test_database_initialization PASSED         [ 84%]
tests/test_task_database.py::test_save_and_load_task PASSED              [ 84%]
tests/test_task_database.py::test_load_nonexistent_task PASSED           [ 84%]
tests/test_task_database.py::test_update_task_status PASSED              [ 84%]
tests/test_task_database.py::test_save_task_result PASSED                [ 84%]
tests/test_task_database.py::test_save_multiple_results PASSED           [ 84%]
tests/test_task_database.py::test_load_all_tasks PASSED                  [ 84%]
tests/test_task_database.py::test_load_incomplete_tasks PASSED           [ 84%]
tests/test_task_database.py::test_delete_task PASSED                     [ 85%]
tests/test_task_database.py::test_delete_task_cascades_results PASSED    [ 85%]
tests/test_task_database.py::test_delete_completed_tasks PASSED          [ 85%]
tests/test_task_database.py::test_task_with_error PASSED                 [ 85%]
tests/test_task_database.py::test_current_chat_index_persistence PASSED  [ 85%]
tests/test_task_queue.py::TestTaskQueue::test_create_task PASSED         [ 85%]
tests/test_task_queue.py::TestTaskQueue::test_get_task PASSED            [ 85%]
tests/test_task_queue.py::TestTaskQueue::test_get_nonexistent_task PASSED [ 85%]
tests/test_task_queue.py::TestTaskQueue::test_get_all_tasks PASSED       [ 85%]
tests/test_task_queue.py::TestTaskQueue::test_run_task_success PASSED    [ 85%]
tests/test_task_queue.py::TestTaskQueue::test_run_task_partial_failure PASSED [ 85%]
tests/test_task_queue.py::TestTaskQueue::test_subscribe_and_receive_events PASSED [ 85%]
tests/test_task_queue.py::TestTaskQueue::test_subscribe_nonexistent_task PASSED [ 85%]
tests/test_task_queue.py::TestTaskQueue::test_cancel_pending_task PASSED [ 85%]
tests/test_task_queue.py::TestTaskQueue::test_cancel_in_progress_task PASSED [ 85%]
tests/test_task_queue.py::TestTaskQueue::test_cancel_completed_task PASSED [ 85%]
tests/test_task_queue.py::TestTaskQueue::test_clear_completed PASSED     [ 85%]
tests/test_task_queue.py::TestTaskQueue::test_find_active_task_exact_match PASSED [ 85%]
tests/test_task_queue.py::TestTaskQueue::test_find_active_task_order_independent PASSED [ 85%]
tests/test_task_queue.py::TestTaskQueue::test_find_active_task_no_match_different_session PASSED [ 85%]
tests/test_task_queue.py::TestTaskQueue::test_find_active_task_no_match_different_chats PASSED [ 86%]
tests/test_task_queue.py::TestTaskQueue::test_find_active_task_no_match_different_limit PASSED [ 86%]
tests/test_task_queue.py::TestTaskQueue::test_find_active_task_ignores_completed PASSED [ 86%]
tests/test_task_queue.py::TestTaskQueue::test_find_active_task_ignores_failed PASSED [ 86%]
tests/test_task_queue.py::TestTaskQueue::test_find_active_task_finds_in_progress PASSED [ 86%]
tests/test_task_queue.py::TestTaskQueue::test_find_active_task_returns_first_match PASSED [ 86%]
tests/test_task_queue.py::TestTaskQueue::test_task_timeout PASSED        [ 86%]
tests/test_task_queue.py::TestTaskQueue::test_per_chat_timeout PASSED    [ 86%]
tests/test_task_queue.py::TestTaskQueue::test_stalled_task_detection PASSED [ 86%]
tests/test_task_queue.py::TestTaskQueue::test_force_cancel_running_task PASSED [ 86%]
tests/test_task_queue.py::TestTaskQueue::test_force_cancel_nonexistent_task PASSED [ 86%]
tests/test_task_queue.py::TestTaskQueue::test_shutdown_cancels_running_tasks PASSED [ 86%]
tests/test_task_queue.py::TestTaskQueue::test_clear_completed_includes_timeout PASSED [ 86%]
tests/test_task_queue.py::TestTaskQueue::test_find_active_task_ignores_timeout PASSED [ 86%]
tests/test_task_queue.py::TestTaskQueue::test_sse_backpressure_consecutive_full_queue PASSED [ 86%]
tests/test_task_queue.py::TestTaskQueue::test_sse_backpressure_total_dropped_events PASSED [ 86%]
tests/test_task_queue.py::TestTaskQueue::test_sse_backpressure_healthy_client_not_disconnected PASSED [ 86%]
tests/test_task_queue.py::TestTaskQueue::test_sse_backpressure_disabled PASSED [ 86%]
tests/test_task_queue.py::TestConcurrentTaskLimit::test_create_task_within_limit PASSED [ 86%]
tests/test_task_queue.py::TestConcurrentTaskLimit::test_create_task_exceeds_limit PASSED [ 86%]
tests/test_task_queue.py::TestConcurrentTaskLimit::test_create_task_after_completion PASSED [ 87%]
tests/test_task_queue.py::TestConcurrentTaskLimit::test_create_task_disabled_limit PASSED [ 87%]
tests/test_task_queue.py::TestConcurrentTaskLimit::test_count_active_tasks_excludes_completed PASSED [ 87%]
tests/test_task_queue.py::TestGlobalTaskQueue::test_get_task_queue_returns_same_instance PASSED [ 87%]
tests/test_task_queue.py::TestGlobalTaskQueue::test_reset_task_queue PASSED [ 87%]
tests/test_task_queue_persistence.py::test_task_queue_with_database PASSED [ 87%]
tests/test_task_queue_persistence.py::test_task_queue_without_database PASSED [ 87%]
tests/test_task_queue_persistence.py::test_create_task_persists_to_database PASSED [ 87%]
tests/test_task_queue_persistence.py::test_recovery_loads_incomplete_tasks PASSED [ 87%]
tests/test_task_queue_persistence.py::test_recovery_resets_in_progress_to_pending PASSED [ 87%]
tests/test_task_queue_persistence.py::test_cancel_task_persists_to_database PASSED [ 87%]
tests/test_task_queue_persistence.py::test_clear_completed_removes_from_memory_preserves_database PASSED [ 87%]
tests/test_task_queue_persistence.py::test_run_task_persists_progress PASSED [ 87%]
tests/test_task_queue_persistence.py::test_run_task_handles_individual_chat_failures PASSED [ 87%]
tests/test_task_queue_persistence.py::test_get_task_queue_with_database PASSED [ 87%]
tests/test_task_queue_persistence.py::test_stale_task_detection_marks_old_tasks_as_failed PASSED [ 87%]
tests/test_task_queue_persistence.py::test_stale_task_detection_resets_recent_tasks PASSED [ 87%]
tests/test_task_queue_persistence.py::test_stale_task_detection_uses_started_at_when_available PASSED [ 87%]
tests/test_task_queue_persistence.py::test_stale_task_detection_uses_created_at_when_no_started_at PASSED [ 87%]
tests/test_task_queue_persistence.py::test_stale_task_detection_with_different_threshold PASSED [ 87%]
tests/test_task_queue_persistence.py::test_stale_task_detection_mixed_recovery PASSED [ 88%]
tests/test_telegram_client.py::TestTelegramConfig::test_from_json_file_valid PASSED [ 88%]
tests/test_telegram_client.py::TestTelegramConfig::test_repr_redacts_api_hash PASSED [ 88%]
tests/test_telegram_client.py::TestTelegramConfig::test_str_redacts_api_hash PASSED [ 88%]
tests/test_telegram_client.py::TestTelegramConfig::test_from_secure_storage_success PASSED [ 88%]
tests/test_telegram_client.py::TestTelegramConfig::test_from_secure_storage_credential_not_found PASSED [ 88%]
tests/test_telegram_client.py::TestTelegramConfig::test_from_secure_storage_general_error PASSED [ 88%]
tests/test_telegram_client.py::TestTelegramConfig::test_from_json_file_api_id_as_string PASSED [ 88%]
tests/test_telegram_client.py::TestTelegramConfig::test_from_json_file_not_found PASSED [ 88%]
tests/test_telegram_client.py::TestTelegramConfig::test_from_json_file_invalid_json PASSED [ 88%]
tests/test_telegram_client.py::TestTelegramConfig::test_from_json_file_missing_api_id PASSED [ 88%]
tests/test_telegram_client.py::TestTelegramConfig::test_from_json_file_missing_api_hash PASSED [ 88%]
tests/test_telegram_client.py::TestTelegramConfig::test_from_json_file_invalid_api_id_type PASSED [ 88%]
tests/test_telegram_client.py::TestTelegramConfig::test_from_json_file_invalid_api_hash_type PASSED [ 88%]
tests/test_telegram_client.py::TestTelegramConfig::test_from_json_file_empty_api_hash PASSED [ 88%]
tests/test_telegram_client.py::TestValidateSessionFile::test_valid_session PASSED [ 88%]
tests/test_telegram_client.py::TestValidateSessionFile::test_session_not_found PASSED [ 88%]
tests/test_telegram_client.py::TestValidateSessionFile::test_invalid_file_not_sqlite PASSED [ 88%]
tests/test_telegram_client.py::TestValidateSessionFile::test_empty_session_no_data PASSED [ 88%]
tests/test_telegram_client.py::TestValidateSessionFile::test_missing_required_tables PASSED [ 88%]
tests/test_telegram_client.py::TestValidateSessionFile::test_locked_session_file PASSED [ 88%]
tests/test_telegram_client.py::TestValidateSessionFile::test_telethon_2x_session_detected PASSED [ 89%]
tests/test_telegram_client.py::TestTelegramClientLoader::test_validate_success PASSED [ 89%]
tests/test_telegram_client.py::TestTelegramClientLoader::test_validate_invalid_config PASSED [ 89%]
tests/test_telegram_client.py::TestTelegramClientLoader::test_validate_invalid_session PASSED [ 89%]
tests/test_telegram_client.py::TestTelegramClientLoader::test_create_client PASSED [ 89%]
tests/test_telegram_client.py::TestTelegramClientLoader::test_properties PASSED [ 89%]
tests/test_telegram_client.py::TestTelegramClientLoader::test_create_client_with_proxy PASSED [ 89%]
tests/test_telegram_client.py::TestTelegramClientLoader::test_create_client_with_http_proxy PASSED [ 89%]
tests/test_telegram_client.py::TestTelegramClientLoader::test_create_client_with_disabled_proxy PASSED [ 89%]
tests/test_telegram_client.py::TestTelegramClientLoader::test_create_client_without_proxy_raises_error PASSED [ 89%]
tests/test_telegram_client.py::TestTelegramClientLoader::test_create_client_with_custom_timeout PASSED [ 89%]
tests/test_telegram_client.py::TestTelegramClientLoader::test_create_client_uses_default_timeout_from_settings PASSED [ 89%]
tests/test_telegram_client.py::TestTelegramClientLoader::test_validate_with_secure_storage_and_fallback PASSED [ 89%]
tests/test_telegram_client.py::TestTelegramClientLoader::test_validate_with_secure_storage_no_fallback PASSED [ 89%]
tests/test_telegram_client.py::TestTelegramClientLoader::test_validate_no_config_path_secure_storage_disabled PASSED [ 89%]
tests/test_telegram_client.py::TestTelegramClientLoader::test_validate_raises_error_when_api_id_is_zero PASSED [ 89%]
tests/test_telegram_client.py::TestTelegramClientLoader::test_validate_raises_error_when_api_hash_is_empty PASSED [ 89%]
tests/test_telegram_client.py::TestTelegramClientLoader::test_validate_raises_error_when_proxy_id_is_missing PASSED [ 89%]
tests/test_telegram_client.py::TestTelegramClientLoader::test_validate_raises_error_when_proxy_not_in_pool PASSED [ 89%]
tests/test_telegram_client.py::TestTelegramClientLoader::test_validate_succeeds_with_all_required_fields PASSED [ 89%]
tests/test_telegram_client.py::TestDialogToChat::test_user_dialog PASSED [ 90%]
tests/test_telegram_client.py::TestDialogToChat::test_saved_messages_dialog PASSED [ 90%]
tests/test_telegram_client.py::TestDialogToChat::test_channel_dialog PASSED [ 90%]
tests/test_telegram_client.py::TestDialogToChat::test_supergroup_dialog PASSED [ 90%]
tests/test_telegram_client.py::TestDialogToChat::test_forum_dialog PASSED [ 90%]
tests/test_telegram_client.py::TestDialogToChat::test_basic_group_dialog PASSED [ 90%]
tests/test_telegram_client.py::TestDialogToChat::test_unknown_entity_type PASSED [ 90%]
tests/test_telegram_client.py::TestGetDialogs::test_get_all_dialogs PASSED [ 90%]
tests/test_telegram_client.py::TestGetDialogs::test_filter_by_chat_type PASSED [ 90%]
tests/test_telegram_client.py::TestGetDialogs::test_deduplication PASSED [ 90%]
tests/test_telegram_client.py::TestGetDialogs::test_caching PASSED       [ 90%]
tests/test_telegram_client.py::TestGetDialogs::test_cache_with_filter PASSED [ 90%]
tests/test_telegram_client.py::TestGetDialogs::test_archived_chats PASSED [ 90%]
tests/test_telegram_client.py::TestTelethonMessageToModel::test_basic_message PASSED [ 90%]
tests/test_telegram_client.py::TestTelethonMessageToModel::test_message_with_media PASSED [ 90%]
tests/test_telegram_client.py::TestTelethonMessageToModel::test_message_no_sender_uses_chat_id PASSED [ 90%]
tests/test_telegram_client.py::TestTelethonMessageToModel::test_message_with_peer_user PASSED [ 90%]
tests/test_telegram_client.py::TestTelethonMessageToModel::test_message_with_peer_channel PASSED [ 90%]
tests/test_telegram_client.py::TestTelethonMessageToModel::test_message_with_negative_sender_id PASSED [ 90%]
tests/test_telegram_client.py::TestTelethonMessageToModel::test_message_without_timestamp_returns_none PASSED [ 90%]
tests/test_telegram_client.py::TestTelethonMessageToModel::test_message_with_naive_timestamp PASSED [ 91%]
tests/test_telegram_client.py::TestTelethonMessageToModel::test_message_empty_returns_none PASSED [ 91%]
tests/test_telegram_client.py::TestTelethonMessageToModel::test_message_timestamp_is_utc PASSED [ 91%]
tests/test_telegram_client.py::TestTelethonMessageToModel::test_service_message_returns_none PASSED [ 91%]
tests/test_telegram_client.py::TestTelethonMessageToModel::test_service_message_join_returns_none PASSED [ 91%]
tests/test_telegram_client.py::TestTelethonMessageToModel::test_service_message_pin_returns_none PASSED [ 91%]
tests/test_telegram_client.py::TestGetMessages::test_get_messages_basic PASSED [ 91%]
tests/test_telegram_client.py::TestGetMessages::test_get_messages_respects_limit PASSED [ 91%]
tests/test_telegram_client.py::TestGetMessages::test_get_messages_deduplication PASSED [ 91%]
tests/test_telegram_client.py::TestGetMessages::test_get_messages_sorts_by_timestamp PASSED [ 91%]
tests/test_telegram_client.py::TestGetMessages::test_get_messages_skips_empty PASSED [ 91%]
tests/test_telegram_client.py::TestGetMessages::test_get_messages_invalid_limit PASSED [ 91%]
tests/test_telegram_client.py::TestGetMessages::test_get_messages_chat_not_found_error PASSED [ 91%]
tests/test_telegram_client.py::TestGetMessages::test_get_messages_access_denied_error PASSED [ 91%]
tests/test_telegram_client.py::TestGetMessages::test_get_messages_chat_forbidden_error PASSED [ 91%]
tests/test_telegram_client.py::TestGetMessages::test_get_messages_channel_private_error PASSED [ 91%]
tests/test_telegram_client.py::TestGetMessages::test_get_messages_user_banned_in_channel_error PASSED [ 91%]
tests/test_telegram_client.py::TestGetMessages::test_get_messages_rate_limit_error PASSED [ 91%]
tests/test_telegram_client.py::TestGetMessages::test_get_messages_forum_with_topics PASSED [ 91%]
tests/test_telegram_client.py::TestGetMessages::test_get_messages_forum_no_topics PASSED [ 91%]
tests/test_telegram_client.py::TestGetMessages::test_get_messages_non_forum PASSED [ 92%]
tests/test_telegram_client.py::TestGetMessages::test_get_messages_connection_interrupted_with_resume PASSED [ 92%]
tests/test_telegram_client.py::TestGetMessages::test_get_messages_connection_interrupted_max_retries PASSED [ 92%]
tests/test_telegram_client.py::TestParseChatReference::test_username_with_at PASSED [ 92%]
tests/test_telegram_client.py::TestParseChatReference::test_bare_username PASSED [ 92%]
tests/test_telegram_client.py::TestParseChatReference::test_public_link_https PASSED [ 92%]
tests/test_telegram_client.py::TestParseChatReference::test_public_link_http PASSED [ 92%]
tests/test_telegram_client.py::TestParseChatReference::test_public_link_no_scheme PASSED [ 92%]
tests/test_telegram_client.py::TestParseChatReference::test_invite_link_joinchat PASSED [ 92%]
tests/test_telegram_client.py::TestParseChatReference::test_invite_link_plus PASSED [ 92%]
tests/test_telegram_client.py::TestParseChatReference::test_invite_link_telegram_me PASSED [ 92%]
tests/test_telegram_client.py::TestParseChatReference::test_empty_string PASSED [ 92%]
tests/test_telegram_client.py::TestParseChatReference::test_whitespace_only PASSED [ 92%]
tests/test_telegram_client.py::TestParseChatReference::test_strips_whitespace PASSED [ 92%]
tests/test_telegram_client.py::TestJoinChat::test_join_by_username PASSED [ 92%]
tests/test_telegram_client.py::TestJoinChat::test_join_by_invite_link PASSED [ 92%]
tests/test_telegram_client.py::TestJoinChat::test_join_invalid_reference_raises_value_error PASSED [ 92%]
tests/test_telegram_client.py::TestJoinChat::test_join_expired_invite_raises_error PASSED [ 92%]
tests/test_telegram_client.py::TestJoinChat::test_join_banned_user_raises_error PASSED [ 92%]
tests/test_telegram_client.py::TestJoinChat::test_join_rate_limit_raises_error PASSED [ 92%]
tests/test_telegram_client.py::TestJoinChat::test_join_username_not_found_raises_error PASSED [ 93%]
tests/test_telegram_client.py::TestJoinChat::test_join_forum_supergroup PASSED [ 93%]
tests/test_telegram_client.py::TestSecureDeleteFile::test_secure_delete_existing_file PASSED [ 93%]
tests/test_telegram_client.py::TestSecureDeleteFile::test_secure_delete_nonexistent_file PASSED [ 93%]
tests/test_telegram_client.py::TestSecureDeleteFile::test_secure_delete_directory_does_nothing PASSED [ 93%]
tests/test_telegram_client.py::TestMigratePlaintextToSecure::test_migrate_success PASSED [ 93%]
tests/test_telegram_client.py::TestGetChatSlowmode::test_get_slowmode_channel_with_slowmode PASSED [ 93%]
tests/test_telegram_client.py::TestGetChatSlowmode::test_get_slowmode_channel_no_slowmode PASSED [ 93%]
tests/test_telegram_client.py::TestGetChatSlowmode::test_get_slowmode_non_channel PASSED [ 93%]
tests/test_telegram_client.py::TestGetChatSlowmode::test_get_slowmode_error_returns_none PASSED [ 93%]
tests/test_telegram_client.py::TestGetMessagesSince::test_get_messages_since_basic PASSED [ 93%]
tests/test_telegram_client.py::TestGetMessagesSince::test_get_messages_since_invalid_min_id PASSED [ 93%]
tests/test_telegram_client.py::TestGetMessagesSince::test_get_messages_since_invalid_limit PASSED [ 93%]
tests/test_telegram_client.py::TestGetMessagesSince::test_get_messages_since_forum PASSED [ 93%]
tests/test_telegram_client.py::TestGetMessagesStreaming::test_streaming_basic PASSED [ 93%]
tests/test_telegram_client.py::TestGetMessagesStreaming::test_streaming_invalid_batch_size PASSED [ 93%]
tests/test_telegram_client.py::TestGetMessagesStreaming::test_streaming_invalid_max_messages PASSED [ 93%]
tests/test_telegram_client.py::TestGetMessagesStreaming::test_streaming_respects_max_messages PASSED [ 93%]
tests/test_telegram_client.py::TestGetAccountInfo::test_get_account_info_basic PASSED [ 93%]
tests/test_telegram_client.py::TestGetAccountInfo::test_get_account_info_premium PASSED [ 93%]
tests/test_telegram_client.py::TestGetAccountInfo::test_get_account_info_rate_limited PASSED [ 94%]
tests/test_telegram_client.py::TestLeaveChat::test_leave_channel PASSED  [ 94%]
tests/test_telegram_client.py::TestLeaveChat::test_leave_basic_group PASSED [ 94%]
tests/test_telegram_client.py::TestLeaveChat::test_leave_chat_not_member PASSED [ 94%]
tests/test_telegram_client.py::TestLeaveChat::test_leave_chat_rate_limited PASSED [ 94%]
tests/test_telegram_client.py::TestJoinChatWithRotation::test_join_with_slots_available PASSED [ 94%]
tests/test_telegram_client.py::TestJoinChatWithRotation::test_join_at_limit_with_rotation PASSED [ 94%]
tests/test_telegram_client.py::TestJoinChatWithRotation::test_join_at_limit_no_rotation_list PASSED [ 94%]
tests/test_telethon_api_contract.py::TestTelethonTypeContracts::test_user_type_contract PASSED [ 94%]
tests/test_telethon_api_contract.py::TestTelethonTypeContracts::test_channel_type_contract PASSED [ 94%]
tests/test_telethon_api_contract.py::TestTelethonTypeContracts::test_chat_type_contract PASSED [ 94%]
tests/test_telethon_api_contract.py::TestTelethonTypeContracts::test_message_type_contract PASSED [ 94%]
tests/test_telethon_api_contract.py::TestTelethonTypeContracts::test_message_service_type_exists PASSED [ 94%]
tests/test_telethon_api_contract.py::TestTelethonTypeContracts::test_dialog_type_contract PASSED [ 94%]
tests/test_telethon_api_contract.py::TestTelethonTypeContracts::test_peer_types_contract PASSED [ 94%]
tests/test_telethon_api_contract.py::TestTelethonClientContracts::test_telegram_client_exists PASSED [ 94%]
tests/test_telethon_api_contract.py::TestTelethonClientContracts::test_telegram_client_constructor_signature PASSED [ 94%]
tests/test_telethon_api_contract.py::TestTelethonClientContracts::test_iter_dialogs_method_exists PASSED [ 94%]
tests/test_telethon_api_contract.py::TestTelethonClientContracts::test_iter_messages_method_exists PASSED [ 94%]
tests/test_telethon_api_contract.py::TestTelethonClientContracts::test_get_entity_method_exists PASSED [ 94%]
tests/test_telethon_api_contract.py::TestTelethonClientContracts::test_call_method_exists PASSED [ 94%]
tests/test_telethon_api_contract.py::TestTelethonErrorContracts::test_chat_forbidden_error_exists PASSED [ 95%]
tests/test_telethon_api_contract.py::TestTelethonErrorContracts::test_channel_private_error_exists PASSED [ 95%]
tests/test_telethon_api_contract.py::TestTelethonErrorContracts::test_user_banned_in_channel_error_exists PASSED [ 95%]
tests/test_telethon_api_contract.py::TestTelethonErrorContracts::test_flood_wait_error_exists PASSED [ 95%]
tests/test_telethon_api_contract.py::TestTelethonRequestContracts::test_get_forum_topics_request_exists PASSED [ 95%]
tests/test_telethon_api_contract.py::TestTelethonRequestContracts::test_join_channel_request_exists PASSED [ 95%]
tests/test_telethon_api_contract.py::TestTelethonRequestContracts::test_import_chat_invite_request_exists PASSED [ 95%]
tests/test_telethon_api_contract.py::TestTelethonRequestContracts::test_get_full_chat_request_exists PASSED [ 95%]
tests/test_telethon_api_contract.py::TestTelethonSessionFileContract::test_telethon_1x_session_schema PASSED [ 95%]
tests/test_telethon_api_contract.py::TestTelethonSessionFileContract::test_telethon_2x_session_detection PASSED [ 95%]
tests/test_telethon_api_contract.py::TestTelethonDataStructureContracts::test_message_to_model_contract PASSED [ 95%]
tests/test_telethon_api_contract.py::TestTelethonDataStructureContracts::test_dialog_to_chat_contract PASSED [ 95%]
tests/test_telethon_api_contract.py::TestTelethonDataStructureContracts::test_entity_types_distinguishable PASSED [ 95%]
tests/test_telethon_api_contract.py::TestTelethonDataStructureContracts::test_channel_megagroup_and_forum_flags PASSED [ 95%]
tests/test_telethon_api_contract.py::TestTelethonVersionCompatibility::test_telethon_1x_version PASSED [ 95%]
tests/test_telethon_api_contract.py::TestTelethonVersionCompatibility::test_telethon_minimum_version PASSED [ 95%]
tests/test_telethon_api_contract.py::TestTelethonAPIAssumptions::test_peer_types_support_negative_ids PASSED [ 95%]
tests/test_telethon_api_contract.py::TestTelethonAPIAssumptions::test_dialog_has_folder_attribute PASSED [ 95%]
tests/test_telethon_api_contract.py::TestTelethonAPIAssumptions::test_message_has_reply_to_attribute PASSED [ 95%]
tests/test_telethon_api_contract.py::TestTelethonImportPaths::test_telethon_client_import PASSED [ 95%]
tests/test_telethon_api_contract.py::TestTelethonImportPaths::test_telethon_errors_import PASSED [ 96%]
tests/test_telethon_api_contract.py::TestTelethonImportPaths::test_telethon_tl_types_import PASSED [ 96%]
tests/test_telethon_api_contract.py::TestTelethonImportPaths::test_telethon_tl_functions_import PASSED [ 96%]
tests/test_template_helpers.py::TestGetTemplateContext::test_returns_context_dict PASSED [ 96%]
tests/test_template_helpers.py::TestGetTemplateContext::test_includes_extra_kwargs PASSED [ 96%]
tests/test_template_helpers.py::TestGetTemplateContext::test_csrf_token_present_in_context PASSED [ 96%]
tests/test_translations.py::TestSupportedLanguages::test_supported_languages PASSED [ 96%]
tests/test_translations.py::TestSupportedLanguages::test_default_language PASSED [ 96%]
tests/test_translations.py::TestGetTranslations::test_returns_translations PASSED [ 96%]
tests/test_translations.py::TestGetTranslations::test_caches_translations PASSED [ 96%]
tests/test_translations.py::TestGetTranslations::test_falls_back_to_default PASSED [ 96%]
tests/test_translations.py::TestGetTranslations::test_missing_mo_fallback PASSED [ 96%]
tests/test_translations.py::TestGetSetCurrentLocale::test_get_current_locale_default PASSED [ 96%]
tests/test_translations.py::TestGetSetCurrentLocale::test_set_current_locale PASSED [ 96%]
tests/test_translations.py::TestGetSetCurrentLocale::test_set_unsupported_locale_falls_back PASSED [ 96%]
tests/test_translations.py::TestGettextFunc::test_returns_string PASSED  [ 96%]
tests/test_translations.py::TestGettextFunc::test_underscore_alias PASSED [ 96%]
tests/test_translations.py::TestNgettextFunc::test_singular PASSED       [ 96%]
tests/test_translations.py::TestNgettextFunc::test_plural PASSED         [ 96%]
tests/test_translations.py::TestNgettextFunc::test_ngettext_alias PASSED [ 96%]
tests/test_version_checker.py::TestVersionInfo::test_creation PASSED     [ 97%]
tests/test_version_checker.py::TestVersionInfo::test_prerelease_default PASSED [ 97%]
tests/test_version_checker.py::TestUpdateCheckResult::test_creation PASSED [ 97%]
tests/test_version_checker.py::TestUpdateCheckResult::test_with_error PASSED [ 97%]
tests/test_version_checker.py::TestVersionChecker::test_initialization PASSED [ 97%]
tests/test_version_checker.py::TestVersionChecker::test_is_newer_version_true PASSED [ 97%]
tests/test_version_checker.py::TestVersionChecker::test_is_newer_version_false PASSED [ 97%]
tests/test_version_checker.py::TestVersionChecker::test_is_newer_version_different_lengths PASSED [ 97%]
tests/test_version_checker.py::TestVersionChecker::test_is_newer_version_invalid PASSED [ 97%]
tests/test_version_checker.py::TestVersionChecker::test_parse_version_info PASSED [ 97%]
tests/test_version_checker.py::TestVersionChecker::test_parse_version_info_prerelease PASSED [ 97%]
tests/test_version_checker.py::TestVersionChecker::test_check_for_updates_newer_available PASSED [ 97%]
tests/test_version_checker.py::TestVersionChecker::test_check_for_updates_no_update PASSED [ 97%]
tests/test_version_checker.py::TestVersionChecker::test_check_for_updates_404 PASSED [ 97%]
tests/test_version_checker.py::TestVersionChecker::test_check_for_updates_http_error PASSED [ 97%]
tests/test_version_checker.py::TestVersionChecker::test_check_for_updates_skips_prerelease PASSED [ 97%]
tests/test_web_app.py::TestHealthEndpoint::test_health_returns_200 PASSED [ 97%]
tests/test_web_app.py::TestHealthEndpoint::test_health_returns_status_ok PASSED [ 97%]
tests/test_web_app.py::TestHealthEndpoint::test_health_returns_version PASSED [ 97%]
tests/test_web_app.py::TestHealthEndpoint::test_health_returns_uptime PASSED [ 97%]
tests/test_web_app.py::TestHealthEndpoint::test_health_returns_disk_space PASSED [ 98%]
tests/test_web_app.py::TestHealthEndpoint::test_health_returns_telegram_status PASSED [ 98%]
tests/test_web_app.py::TestReadyEndpoint::test_ready_returns_200 PASSED  [ 98%]
tests/test_web_app.py::TestReadyEndpoint::test_ready_returns_ready_true PASSED [ 98%]
tests/test_web_app.py::TestRequestIDMiddleware::test_response_has_request_id_header PASSED [ 98%]
tests/test_web_app.py::TestRequestIDMiddleware::test_request_id_is_uuid_format PASSED [ 98%]
tests/test_web_app.py::TestRequestIDMiddleware::test_client_provided_request_id_is_preserved PASSED [ 98%]
tests/test_web_app.py::TestCORSConfiguration::test_cors_headers_present_for_allowed_origin PASSED [ 98%]
tests/test_web_app.py::TestCORSConfiguration::test_default_cors_allows_localhost PASSED [ 98%]
tests/test_web_app.py::TestCORSConfiguration::test_cors_allows_only_specified_methods PASSED [ 98%]
tests/test_web_app.py::TestCORSConfiguration::test_cors_allows_credentials PASSED [ 98%]
tests/test_web_app.py::TestCORSConfiguration::test_cors_default_origins_include_common_frontend_ports PASSED [ 98%]
tests/test_web_app.py::TestCORSConfiguration::test_cors_blocks_disallowed_origin PASSED [ 98%]
tests/test_web_app.py::TestAppFactory::test_create_app_returns_fastapi_instance PASSED [ 98%]
tests/test_web_app.py::TestAppFactory::test_create_app_with_debug_mode PASSED [ 98%]
tests/test_web_app.py::TestAppFactory::test_create_app_default_not_debug PASSED [ 98%]
tests/test_web_app.py::TestAppFactory::test_multiple_app_instances_are_independent PASSED [ 98%]
tests/test_web_app.py::TestStaticFiles::test_static_css_served PASSED    [ 98%]
tests/test_web_app.py::TestStaticFiles::test_static_404_for_missing_file PASSED [ 98%]
tests/test_web_app.py::TestExportCsvEndpoint::test_export_csv_returns_200 PASSED [ 98%]
tests/test_web_app.py::TestExportCsvEndpoint::test_export_csv_content_type PASSED [ 99%]
tests/test_web_app.py::TestExportCsvEndpoint::test_export_csv_content_disposition PASSED [ 99%]
tests/test_web_app.py::TestExportCsvEndpoint::test_export_csv_custom_filename PASSED [ 99%]
tests/test_web_app.py::TestExportCsvEndpoint::test_export_csv_concurrent_requests_unique_filenames PASSED [ 99%]
tests/test_web_app.py::TestExportCsvEndpoint::test_export_csv_includes_data PASSED [ 99%]
tests/test_web_app.py::TestExportCsvEndpoint::test_export_csv_multiple_results PASSED [ 99%]
tests/test_web_app.py::TestExportCsvEndpoint::test_export_csv_empty_results PASSED [ 99%]
tests/test_web_app.py::TestExportCsvEndpoint::test_export_csv_invalid_chat_type_returns_422 PASSED [ 99%]
tests/web/test_sessions.py::TestGetSessionConfigStatus::test_encrypted_credentials_with_proxy PASSED [ 99%]
tests/web/test_sessions.py::TestGetSessionConfigStatus::test_encrypted_credentials_missing PASSED [ 99%]
tests/web/test_sessions.py::TestGetSessionConfigStatus::test_plaintext_credentials_backward_compatibility PASSED [ 99%]
tests/web/test_sessions.py::TestGetSessionConfigStatus::test_missing_config_file PASSED [ 99%]
tests/web/test_sessions.py::TestGetSessionConfigStatus::test_corrupted_config_file PASSED [ 99%]
tests/web/test_sessions.py::TestGetSessionConfigStatus::test_missing_proxy_id PASSED [ 99%]
tests/web/test_sessions.py::TestGetSessionConfigStatus::test_proxy_not_found_in_pool PASSED [ 99%]
tests/web/test_sessions.py::TestGetSessionConfigStatus::test_encrypted_credentials_check_error_handling PASSED [ 99%]
tests/web/test_sessions.py::TestGetSessionConfigStatus::test_encrypted_credentials_with_only_api_id_null PASSED [ 99%]
tests/web/test_sessions.py::TestGetSessionConfigStatus::test_encrypted_credentials_with_only_api_hash_null PASSED [ 99%]
tests/web/test_sessions.py::TestConnectSessionErrorHandling::test_connect_session_publishes_error_when_phone_missing PASSED [ 99%]
tests/web/test_sessions.py::TestConnectSessionErrorHandling::test_connect_session_publishes_error_when_proxy_fails PASSED [ 99%]
tests/web/test_sessions.py::TestConnectSessionErrorHandling::test_connect_session_publishes_error_when_network_unavailable PASSED [100%]

=============================== warnings summary ===============================
src/chatfilter/self_test.py:31
  /Users/m/Zen/Code/ChatFilter/src/chatfilter/self_test.py:31: PytestCollectionWarning: cannot collect test class 'TestResult' because it has a __init__ constructor (from: tests/test_self_test.py)
    @dataclass

src/chatfilter/self_test.py:22
  /Users/m/Zen/Code/ChatFilter/src/chatfilter/self_test.py:22: PytestCollectionWarning: cannot collect test class 'TestStatus' because it has a __init__ constructor (from: tests/test_self_test.py)
    class TestStatus(str, Enum):

tests/test_chatlist_router.py::TestGetChatListEntries::test_get_entries_invalid_id_format
tests/test_proxy_pool_api.py::TestCreateProxy::test_create_proxy_invalid_port
tests/test_sessions_router.py::TestSessionConfigAPI::test_update_session_config_proxy_required
tests/test_web_app.py::TestExportCsvEndpoint::test_export_csv_invalid_chat_type_returns_422
  /Users/m/Zen/Code/ChatFilter/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py:59: DeprecationWarning: 'HTTP_422_UNPROCESSABLE_ENTITY' is deprecated. Use 'HTTP_422_UNPROCESSABLE_CONTENT' instead.
    response = await handler(conn, exc)

tests/test_connect_flow_states.py::TestConnectFlowCodeVerification::test_needs_code_to_connected_success
tests/test_connect_flow_states.py::TestConnectFlow2FA::test_needs_2fa_to_connected_success
  /Users/m/Zen/Code/ChatFilter/src/chatfilter/web/routers/sessions.py:3080: RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
    client.session.save()
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_proxy_health.py::TestProxyHealthMonitor::test_stop
  /Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/unittest/mock.py:2119: RuntimeWarning: coroutine 'ProxyHealthMonitor._run_loop' was never awaited
    def __init__(self, /, *args, **kw):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_sessions_router.py::TestAPICredentialReValidation::test_invalid_api_id_rejected_not_saved
tests/test_sessions_router.py::TestAPICredentialReValidation::test_credentials_not_saved_before_validation_success
  /Users/m/Zen/Code/ChatFilter/src/chatfilter/web/routers/sessions.py:1008: RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
    if client and client.is_connected():
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_sessions_router.py::TestAPICredentialReValidation::test_network_error_during_validation_shows_proxy_error
  /Users/m/Zen/Code/ChatFilter/src/chatfilter/web/routers/sessions.py:1017: RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
    if client and client.is_connected():
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
========== 2001 passed, 16 skipped, 12 warnings in 219.79s (0:03:39) ===========
