============================= test session starts ==============================
platform darwin -- Python 3.12.11, pytest-9.0.2, pluggy-1.6.0 -- /Users/m/Zen/Code/ChatFilter/.venv/bin/python
cachedir: .pytest_cache
hypothesis profile 'default'
rootdir: /Users/m/Zen/Code/ChatFilter
configfile: pyproject.toml
plugins: anyio-4.12.1, timeout-2.4.0, asyncio-1.3.0, hypothesis-6.151.5
timeout: 30.0s
timeout method: signal
timeout func_only: False
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 20 items

.hype/evidence/backend/test_groups_api.py::TestGroupsAPI::test_groups_endpoint_returns_html PASSED [  5%]
.hype/evidence/backend/test_groups_api.py::TestGroupsAPI::test_groups_endpoint_shows_group_cards PASSED [ 10%]
.hype/evidence/backend/test_groups_api.py::TestGroupsAPI::test_create_group_modal_endpoint PASSED [ 15%]
.hype/evidence/backend/test_groups_api.py::TestGroupsAPI::test_create_group_endpoint_accepts_file FAILED [ 20%]
.hype/evidence/backend/test_groups_api.py::TestGroupsAPI::test_group_settings_modal FAILED [ 25%]
.hype/evidence/backend/test_groups_api.py::TestGroupsAPI::test_start_analysis_endpoint FAILED [ 30%]
.hype/evidence/backend/test_groups_api.py::TestGroupsAPI::test_stop_analysis_endpoint FAILED [ 35%]
.hype/evidence/backend/test_groups_api.py::TestGroupsAPI::test_export_csv_endpoint PASSED [ 40%]
.hype/evidence/backend/test_groups_api.py::TestLinkFormatSupport::test_parser_handles_tme_username FAILED [ 45%]
.hype/evidence/backend/test_groups_api.py::TestLinkFormatSupport::test_parser_handles_tme_plus_hash FAILED [ 50%]
.hype/evidence/backend/test_groups_api.py::TestLinkFormatSupport::test_parser_handles_tme_joinchat FAILED [ 55%]
.hype/evidence/backend/test_groups_api.py::TestLinkFormatSupport::test_parser_handles_at_username FAILED [ 60%]
.hype/evidence/backend/test_groups_api.py::TestLinkFormatSupport::test_parser_handles_numeric_id FAILED [ 65%]
.hype/evidence/backend/test_groups_api.py::TestBusinessLogic::test_groups_persist_after_restart PASSED [ 70%]
.hype/evidence/backend/test_groups_api.py::TestBusinessLogic::test_group_stats_calculation PASSED [ 75%]
.hype/evidence/backend/test_groups_api.py::TestBusinessLogic::test_progress_calculation PASSED [ 80%]
.hype/evidence/backend/test_groups_api.py::TestEdgeCases::test_empty_csv_file FAILED [ 85%]
.hype/evidence/backend/test_groups_api.py::TestEdgeCases::test_invalid_link_formats FAILED [ 90%]
.hype/evidence/backend/test_groups_api.py::TestEdgeCases::test_duplicate_chat_refs_in_group PASSED [ 95%]
.hype/evidence/backend/test_groups_api.py::TestEdgeCases::test_nonexistent_group_operations FAILED [100%]

=================================== FAILURES ===================================
____________ TestGroupsAPI.test_create_group_endpoint_accepts_file _____________
.hype/evidence/backend/test_groups_api.py:65: in test_create_group_endpoint_accepts_file
    assert response.status_code in [200, 201, 422, 400]
E   assert 403 in [200, 201, 422, 400]
E    +  where 403 = <Response [403 Forbidden]>.status_code
___________________ TestGroupsAPI.test_group_settings_modal ____________________
.hype/evidence/backend/test_groups_api.py:85: in test_group_settings_modal
    assert settings_response.status_code == 200
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
__________________ TestGroupsAPI.test_start_analysis_endpoint __________________
.hype/evidence/backend/test_groups_api.py:103: in test_start_analysis_endpoint
    assert start_response.status_code in [200, 201, 400, 422]
E   assert 403 in [200, 201, 400, 422]
E    +  where 403 = <Response [403 Forbidden]>.status_code
__________________ TestGroupsAPI.test_stop_analysis_endpoint ___________________
.hype/evidence/backend/test_groups_api.py:118: in test_stop_analysis_endpoint
    assert stop_response.status_code in [200, 201, 400, 422]
E   assert 403 in [200, 201, 400, 422]
E    +  where 403 = <Response [403 Forbidden]>.status_code
____________ TestLinkFormatSupport.test_parser_handles_tme_username ____________
.hype/evidence/backend/test_groups_api.py:150: in test_parser_handles_tme_username
    from chatfilter.importer.parser import parse_chat_links
E   ImportError: cannot import name 'parse_chat_links' from 'chatfilter.importer.parser' (/Users/m/Zen/Code/ChatFilter/src/chatfilter/importer/parser.py)
___________ TestLinkFormatSupport.test_parser_handles_tme_plus_hash ____________
.hype/evidence/backend/test_groups_api.py:158: in test_parser_handles_tme_plus_hash
    from chatfilter.importer.parser import parse_chat_links
E   ImportError: cannot import name 'parse_chat_links' from 'chatfilter.importer.parser' (/Users/m/Zen/Code/ChatFilter/src/chatfilter/importer/parser.py)
____________ TestLinkFormatSupport.test_parser_handles_tme_joinchat ____________
.hype/evidence/backend/test_groups_api.py:165: in test_parser_handles_tme_joinchat
    from chatfilter.importer.parser import parse_chat_links
E   ImportError: cannot import name 'parse_chat_links' from 'chatfilter.importer.parser' (/Users/m/Zen/Code/ChatFilter/src/chatfilter/importer/parser.py)
____________ TestLinkFormatSupport.test_parser_handles_at_username _____________
.hype/evidence/backend/test_groups_api.py:172: in test_parser_handles_at_username
    from chatfilter.importer.parser import parse_chat_links
E   ImportError: cannot import name 'parse_chat_links' from 'chatfilter.importer.parser' (/Users/m/Zen/Code/ChatFilter/src/chatfilter/importer/parser.py)
_____________ TestLinkFormatSupport.test_parser_handles_numeric_id _____________
.hype/evidence/backend/test_groups_api.py:180: in test_parser_handles_numeric_id
    from chatfilter.importer.parser import parse_chat_links
E   ImportError: cannot import name 'parse_chat_links' from 'chatfilter.importer.parser' (/Users/m/Zen/Code/ChatFilter/src/chatfilter/importer/parser.py)
______________________ TestEdgeCases.test_empty_csv_file _______________________
.hype/evidence/backend/test_groups_api.py:298: in test_empty_csv_file
    assert response.status_code in [400, 422]
E   assert 403 in [400, 422]
E    +  where 403 = <Response [403 Forbidden]>.status_code
___________________ TestEdgeCases.test_invalid_link_formats ____________________
.hype/evidence/backend/test_groups_api.py:302: in test_invalid_link_formats
    from chatfilter.importer.parser import parse_chat_links
E   ImportError: cannot import name 'parse_chat_links' from 'chatfilter.importer.parser' (/Users/m/Zen/Code/ChatFilter/src/chatfilter/importer/parser.py)
_______________ TestEdgeCases.test_nonexistent_group_operations ________________
.hype/evidence/backend/test_groups_api.py:348: in test_nonexistent_group_operations
    assert response.status_code in [404, 422]
E   assert 403 in [404, 422]
E    +  where 403 = <Response [403 Forbidden]>.status_code
=========================== short test summary info ============================
FAILED .hype/evidence/backend/test_groups_api.py::TestGroupsAPI::test_create_group_endpoint_accepts_file - assert 403 in [200, 201, 422, 400]
 +  where 403 = <Response [403 Forbidden]>.status_code
FAILED .hype/evidence/backend/test_groups_api.py::TestGroupsAPI::test_group_settings_modal - assert 404 == 200
 +  where 404 = <Response [404 Not Found]>.status_code
FAILED .hype/evidence/backend/test_groups_api.py::TestGroupsAPI::test_start_analysis_endpoint - assert 403 in [200, 201, 400, 422]
 +  where 403 = <Response [403 Forbidden]>.status_code
FAILED .hype/evidence/backend/test_groups_api.py::TestGroupsAPI::test_stop_analysis_endpoint - assert 403 in [200, 201, 400, 422]
 +  where 403 = <Response [403 Forbidden]>.status_code
FAILED .hype/evidence/backend/test_groups_api.py::TestLinkFormatSupport::test_parser_handles_tme_username - ImportError: cannot import name 'parse_chat_links' from 'chatfilter.importer.parser' (/Users/m/Zen/Code/ChatFilter/src/chatfilter/importer/parser.py)
FAILED .hype/evidence/backend/test_groups_api.py::TestLinkFormatSupport::test_parser_handles_tme_plus_hash - ImportError: cannot import name 'parse_chat_links' from 'chatfilter.importer.parser' (/Users/m/Zen/Code/ChatFilter/src/chatfilter/importer/parser.py)
FAILED .hype/evidence/backend/test_groups_api.py::TestLinkFormatSupport::test_parser_handles_tme_joinchat - ImportError: cannot import name 'parse_chat_links' from 'chatfilter.importer.parser' (/Users/m/Zen/Code/ChatFilter/src/chatfilter/importer/parser.py)
FAILED .hype/evidence/backend/test_groups_api.py::TestLinkFormatSupport::test_parser_handles_at_username - ImportError: cannot import name 'parse_chat_links' from 'chatfilter.importer.parser' (/Users/m/Zen/Code/ChatFilter/src/chatfilter/importer/parser.py)
FAILED .hype/evidence/backend/test_groups_api.py::TestLinkFormatSupport::test_parser_handles_numeric_id - ImportError: cannot import name 'parse_chat_links' from 'chatfilter.importer.parser' (/Users/m/Zen/Code/ChatFilter/src/chatfilter/importer/parser.py)
FAILED .hype/evidence/backend/test_groups_api.py::TestEdgeCases::test_empty_csv_file - assert 403 in [400, 422]
 +  where 403 = <Response [403 Forbidden]>.status_code
FAILED .hype/evidence/backend/test_groups_api.py::TestEdgeCases::test_invalid_link_formats - ImportError: cannot import name 'parse_chat_links' from 'chatfilter.importer.parser' (/Users/m/Zen/Code/ChatFilter/src/chatfilter/importer/parser.py)
FAILED .hype/evidence/backend/test_groups_api.py::TestEdgeCases::test_nonexistent_group_operations - assert 403 in [404, 422]
 +  where 403 = <Response [403 Forbidden]>.status_code
========================= 12 failed, 8 passed in 0.71s =========================
