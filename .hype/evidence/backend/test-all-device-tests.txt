============================= test session starts ==============================
platform darwin -- Python 3.12.11, pytest-9.0.2, pluggy-1.6.0 -- /Users/m/Zen/Code/ChatFilter/.venv/bin/python
cachedir: .pytest_cache
hypothesis profile 'default'
rootdir: /Users/m/Zen/Code/ChatFilter
configfile: pyproject.toml
plugins: anyio-4.12.1, timeout-2.4.0, asyncio-1.3.0, hypothesis-6.151.5
timeout: 30.0s
timeout method: signal
timeout func_only: False
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 1968 items / 1954 deselected / 14 selected

tests/integration/test_device_confirmation_timeout.py::TestDeviceConfirmationTimeout::test_polling_task_timeout_triggers_cleanup PASSED [  7%]
tests/integration/test_device_confirmation_timeout.py::TestDeviceConfirmationTimeout::test_polling_task_timeout_with_disconnect_error PASSED [ 14%]
tests/integration/test_device_confirmation_timeout.py::TestDeviceConfirmationTimeout::test_polling_task_stops_if_auth_state_removed_externally PASSED [ 21%]
tests/integration/test_device_confirmation_timeout.py::TestDeviceConfirmationTimeout::test_polling_task_handles_auth_key_unregistered_error PASSED [ 28%]
tests/integration/test_device_confirmation_timeout.py::TestDeviceConfirmationTimeout::test_polling_task_cleanup_on_rpc_error PASSED [ 35%]
tests/integration/test_device_confirmation_timeout.py::TestDeviceConfirmationTimeout::test_polling_task_confirms_successfully_before_timeout PASSED [ 42%]
tests/integration/test_device_confirmation_timeout.py::TestDeviceConfirmationTimeout::test_polling_task_handles_finalize_error PASSED [ 50%]
tests/test_device_confirmation.py::TestDeviceConfirmation::test_verify_code_needs_confirmation PASSED [ 57%]
tests/test_device_confirmation.py::TestDeviceConfirmation::test_verify_2fa_needs_confirmation PASSED [ 64%]
tests/test_device_confirmation.py::TestDeviceConfirmation::test_list_stored_sessions_needs_confirmation_state PASSED [ 71%]
tests/test_device_confirmation.py::TestDeviceConfirmation::test_check_device_confirmation_auth_key_unregistered PASSED [ 78%]
tests/test_device_confirmation.py::TestDeviceConfirmation::test_verify_2fa_auth_key_unregistered_needs_confirmation PASSED [ 85%]
tests/test_device_confirmation.py::TestDeviceConfirmation::test_verify_code_auth_key_unregistered_needs_confirmation PASSED [ 92%]
tests/test_device_confirmation.py::TestDeviceConfirmation::test_auto_2fa_auth_key_unregistered_needs_confirmation PASSED [100%]

=============================== warnings summary ===============================
src/chatfilter/self_test.py:31
  /Users/m/Zen/Code/ChatFilter/src/chatfilter/self_test.py:31: PytestCollectionWarning: cannot collect test class 'TestResult' because it has a __init__ constructor (from: tests/test_self_test.py)
    @dataclass

src/chatfilter/self_test.py:22
  /Users/m/Zen/Code/ChatFilter/src/chatfilter/self_test.py:22: PytestCollectionWarning: cannot collect test class 'TestStatus' because it has a __init__ constructor (from: tests/test_self_test.py)
    class TestStatus(str, Enum):

tests/test_device_confirmation.py::TestDeviceConfirmation::test_verify_code_needs_confirmation
tests/test_device_confirmation.py::TestDeviceConfirmation::test_verify_code_auth_key_unregistered_needs_confirmation
tests/test_device_confirmation.py::TestDeviceConfirmation::test_auto_2fa_auth_key_unregistered_needs_confirmation
  /Users/m/Zen/Code/ChatFilter/src/chatfilter/web/routers/sessions.py:4005: RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
    if not client or not client.is_connected():
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_device_confirmation.py::TestDeviceConfirmation::test_verify_2fa_needs_confirmation
tests/test_device_confirmation.py::TestDeviceConfirmation::test_verify_2fa_auth_key_unregistered_needs_confirmation
  /Users/m/Zen/Code/ChatFilter/src/chatfilter/web/routers/sessions.py:4430: RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
    if not client or not client.is_connected():
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=============== 14 passed, 1954 deselected, 7 warnings in 26.36s ===============
